"use strict";(()=>{var Ce=(t,s)=>{let a=r.dischargeInfo,{energyStage:o,energyType:i}=a;if(t==="galaxy"){let u=e.elements;for(let g=1;g<r.elementsInfo.maxActive;g++)Ne(g,4,"elements")&&(u[g]=0);r.automatization.autoEl=[],r.collapseInfo.pointsLoop=0,e.collapse.mass=.01235,e.collapse.stars=[0,0,0],e.merge.since=0}let l=0;for(let u of s){u!==6&&(l+=o[u]),o[u]=0;let g=e.buildings[u];g[0].current.setValue(w.buildings[u][0].current),g[0].total.setValue(w.buildings[u][0].current);for(let p=1;p<r.buildingsInfo.maxActive[u];p++){if(!Ne(p,u,"structures")){if(!e.inflation.vacuum)continue;let h=g[p].true;u===1&&(g[1].current.setValue(h),g[1].total.setValue(h));let v=i[u][p]*h;a.energyTrue+=v,o[u]+=v;continue}g[p].true=0,g[p].current.setValue(0),g[p].total.setValue(0)}if(u===1?e.inflation.vacuum||(e.discharge.energy=0,a.energyTrue=0):u===2?R.S2Levels(!1):u===4?(r.collapseInfo.trueStars=0,R.S4Levels(!1)):u===6&&(e.darkness.energy=0),t==="discharge")continue;let m=e.upgrades[u];for(let p=0;p<r.upgradesInfo[u].maxActive;p++)Ne(p,u,"upgrades")&&(m[p]=0);if(r.automatization.autoU[u]=[],t==="vaporization")continue;let c=e.researches[u];for(let p=0;p<r.researchesInfo[u].maxActive;p++)Ne(p,u,"researches")&&(c[p]=0,ye(p,u,"researches"));if(r.automatization.autoR[u]=[],t==="rank")continue;let d=e.researchesExtra[u];for(let p=0;p<r.researchesExtraInfo[u].maxActive;p++)Ne(p,u,"researchesExtra")&&(d[p]=0,ye(p,u,"researchesExtra"));r.automatization.autoE[u]=[]}if(e.inflation.vacuum&&l!==0){let u=a.energyTrue-e.discharge.energy-l;for(let g=2;g<6;g++){if(s.includes(g))continue;let m=e.buildings[g];for(let c=r.buildingsInfo.maxActive[g]-1;c>=1;c--)if(Ne(c,g,"structures")){if(u>0){let d=Math.min(Math.ceil(u/i[g][c]),m[c].true);d>0&&(m[c].true-=d,u-=d*i[g][c],o[g]-=d*i[g][c],g===4&&(r.collapseInfo.trueStars-=d))}m[c].current.setValue(m[c].true),m[c].total.setValue(m[c].true)}g!==5&&(m[0].current.setValue(w.buildings[g][0].current),m[0].total.setValue(w.buildings[g][0].current)),g===2?(R.S2Levels(!0),R.S2FreeBuilds()):g===5&&R.S4Levels(!0)}e.discharge.energy+=u,a.energyTrue=e.discharge.energy}R.globalCache(),e.inflation.vacuum&&B.solarHardcap()},Pe=(t,s=!0,a=!0)=>{let o=e.strangeness;for(let i of t){let l=e.buildings[i],u=w.buildings[i][0].current;l[0].current.setValue(u),l[0].total.setValue(u),l[0].trueTotal.setValue(u);for(let g=1;g<w.buildings[i].length;g++)l[g].true=0,l[g].current.setValue(0),l[g].total.setValue(0),l[g].trueTotal.setValue(0);e.upgrades[i]=I(w.upgrades[i]),e.researches[i]=I(w.researches[i]),e.researchesExtra[i]=I(w.researchesExtra[i]),r.automatization.autoU[i]=[],r.automatization.autoR[i]=[],r.automatization.autoE[i]=[],r.lastUpgrade[i][0]=null,i===1?(e.discharge.energy=0,e.discharge.energyMax=0,e.discharge.current=0,r.dischargeInfo.energyTrue=0):i===2?(e.vaporization.clouds=0,R.S2Levels(!1)):i===3?(e.inflation.vacuum?e.accretion.rank=1:(e.accretion.rank=0,l[0].current.setValue(59722e23)),B.rankInformation()):i===4?(r.collapseInfo.pointsLoop=0,r.collapseInfo.trueStars=0,e.collapse.mass=.01235,e.collapse.massMax=.01235,e.collapse.stars=[0,0,0],e.collapse.maxElement=0,R.S4Levels(!1),e.elements=I(w.elements),e.elements[0]=o[4][8]>=1?1:0,r.automatization.autoEl=[],r.lastElement=null):i===5?(r.mergeInfo.galaxies=0,e.merge.rewards=[0,0,0,0],e.merge.resets=0,e.merge.since=0,e.merge.claimed=[0,0]):i===6&&(e.darkness.energy=0,e.darkness.energyMax=0,e.darkness.fluid=0)}a&&(e.time.stage=0,e.stage.time=0,e.stage.peak=[0,0],r.debug.timeLimit=!1,e.researchesAuto[0]=o[3][6],e.researchesAuto[1]=o[4][6],e.researchesAuto[2]=e.inflation.vacuum?o[1][4]<1?0:o[3][4]<1?1:o[2][4]<1?2:o[4][4]<1?3:4:o[Math.min(e.stage.current,4)][4]>=1?1:0),(e.inflation.vacuum||t.includes(1))&&B.trueEnergy(!0);for(let i of t){for(let l=0;l<r.researchesInfo[i].maxActive;l++)C(l,i,"researches");for(let l=0;l<r.researchesExtraInfo[i].maxActive;l++)C(l,i,"researchesExtra");i===6?e.ASR[i]=o[6][3]>=2?1:0:o[i][5]<1&&(e.ASR[i]=0)}s!==null&&(j(),J(s))},Ge=(t=0)=>{let s=e.inflation.vacuum;if(t>=2){e.verses[0].true=0,e.verses[0].other=[0,0,0],r.inflationInfo.trueUniverses=0,e.inflation.ends[0]>=1&&(e.verses[0].current=e.verses[0].highest);for(let l=0;l<w.tree[0].length;l++)e.tree[0][l]=0,ye(l,0,"inflations");let o=e.challenges.supervoid,i=e.challenges.stability+o[1]+o[2]+o[3]+o[4]+o[5]+o[6];e.inflation.ends[1]>=1&&(i+=1+Math.max(e.verses[0].highest-e.verses[0].lowest,0)),e.inflation.vacuum&&i++,e.cosmon[0].current=i,e.cosmon[0].total=i,e.inflation.resets=0,e.inflation.peak=[0,0],e.time.end=0,e.challenges.supervoidMax=I(w.challenges.supervoidMax),r.inflationInfo.totalSuper=0;for(let l=0;l<r.challengesInfo.length;l++)be(l)}t>=1&&(e.inflation.age=0,e.time.universe=0);let a=e.verses[0].current;for(let o=1;o<=6;o++){let i=e.buildings[o],l=w.buildings[o][0].current;i[0].current.setValue(l),i[0].total.setValue(l),i[0].trueTotal.setValue(l);for(let u=1;u<w.buildings[o].length;u++)i[u].true=0,i[u].current.setValue(0),i[u].total.setValue(0),i[u].trueTotal.setValue(0);if(o<6){e.milestones[o]=I(w.milestones[o]),r.milestonesInfo[o].recent=I(w.milestones[o]);for(let u=0;u<w.milestones[o].length;u++)ve(u,o)}e.upgrades[o]=I(w.upgrades[o]),e.researches[o]=I(w.researches[o]),e.researchesExtra[o]=I(w.researchesExtra[o]),e.strangeness[o]=I(w.strangeness[o]),r.lastUpgrade[o][0]=null,r.automatization.autoU[o]=[],r.automatization.autoR[o]=[],r.automatization.autoE[o]=[]}e.researchesAuto[0]=a>=3?3:0,e.researchesAuto[1]=a>=3?2:0,e.researchesAuto[2]=a>=5?s?4:1:0,e.stage.current=1,e.stage.resets=0,e.stage.peak=[0,0],e.stage.time=0,e.time.stage=0,e.time.vacuum=0,e.inflation.time=0,r.debug.timeLimit=!1,r.historyStorage.stage=[],e.history.stage.best=I(w.history.stage.best),e.challenges.void=I(w.challenges.void);for(let o=0;o<w.strange.length;o++)e.strange[o].current=0,e.strange[o].total=0;e.discharge.energy=0,e.discharge.energyMax=0,e.discharge.current=0,e.vaporization.clouds=0,R.S2Levels(!1),s?e.accretion.rank=1:(e.accretion.rank=0,e.buildings[3][0].current.setValue(59722e23)),r.collapseInfo.pointsLoop=0,r.collapseInfo.trueStars=0,e.collapse.mass=.01235,e.collapse.massMax=.01235,e.collapse.stars=[0,0,0],e.collapse.maxElement=0,R.S4Levels(!1),e.elements=I(w.elements),r.automatization.autoEl=[],r.lastElement=null,r.mergeInfo.galaxies=0,e.merge.since=0,e.merge.resets=0,e.merge.rewards=[0,0,0,0],e.merge.claimed=[0,0],r.automatization.autoS=[],r.lastStrangeness=[null,0],r.lastMilestone=[null,0],e.darkness.energy=0,e.darkness.energyMax=0,e.darkness.fluid=0,a>=1&&(e.strange[0].current+=Math.ceil(r.inflationInfo.trueUniverses**1.5),e.strange[0].total=e.strange[0].current,s&&(e.strangeness[1][8]=2)),a>=3&&(e.strangeness[3][6]=3,e.strangeness[4][6]=2),s&&a>=5&&(e.strangeness[5][9]=1),a>=8&&(e.strangeness[5][6]=s?1:2);for(let o=0;o<w.researchesAuto.length;o++)C(o,0,"researchesAuto");for(let o=1;o<=6;o++){for(let i=0;i<r.researchesInfo[o].maxActive;i++)C(i,o,"researches");for(let i=0;i<r.researchesExtraInfo[o].maxActive;i++)C(i,o,"researchesExtra");C(0,o,"ASR"),o<6&&a>=2?(e.ASR[o]=r.ASRInfo.max[o],e.strangeness[o][5]=1,a>=5&&(e.strangeness[o][4]=1)):e.ASR[o]=0;for(let i=0;i<r.strangenessInfo[o].maxActive;i++)C(i,o,"strangeness")}R.strange1(),R.strange0(),B.rankInformation(),B.trueEnergy(!0),j(),J()},ss=t=>{let s=e.clone;s.depth=t,s.buildings=[[]],s.upgrades=[[]],s.researches=[[]],s.researchesExtra=[[]],s.ASR=[0],t!=="stage"&&(s.strangeness=[[]],s.milestones=[[]]);for(let a=1;a<=6;a++){let o=e.buildings[a];s.buildings[a]=[{current:o[0].current.toString(),total:o[0].total.toString(),trueTotal:o[0].trueTotal.toString()}];for(let i=1;i<o.length;i++)s.buildings[a][i]={true:o[i].true,current:o[i].current.toString(),total:o[i].total.toString(),trueTotal:o[i].trueTotal.toString()};s.ASR[a]=e.ASR[a],s.upgrades[a]=I(e.upgrades[a]),s.researches[a]=I(e.researches[a]),s.researchesExtra[a]=I(e.researchesExtra[a]),t!=="stage"?(s.strangeness[a]=I(e.strangeness[a]),a<6&&(s.milestones[a]=I(e.milestones[a]))):a<6&&(r.milestonesInfo[a].recent=I(w.milestones[a]))}if(s.stage={current:e.stage.current,time:e.stage.time,peak:I(e.stage.peak)},s.time={stage:e.time.stage},s.researchesAuto=I(e.researchesAuto),s.discharge={energy:e.discharge.energy,energyMax:e.discharge.energyMax,current:e.discharge.current},s.vaporization={clouds:e.vaporization.clouds},s.accretion={rank:e.accretion.rank},s.collapse={mass:e.collapse.mass,massMax:e.collapse.massMax,stars:I(e.collapse.stars),maxElement:e.collapse.maxElement},s.elements=I(e.elements),s.merge={rewards:I(e.merge.rewards),claimed:I(e.merge.claimed),resets:e.merge.resets,since:e.merge.since},s.darkness={energy:e.darkness.energy,energyMax:e.darkness.energyMax,fluid:e.darkness.fluid},t!=="stage"){s.strange=[];for(let a=0;a<e.strange.length;a++)s.strange[a]={current:e.strange[a].current,total:e.strange[a].total};s.history={stage:{list:r.historyStorage.stage.slice(0,e.history.stage.input[0]),best:I(e.history.stage.best)}},s.challenges={void:I(e.challenges.void)},s.inflation={vacuum:e.inflation.vacuum,time:e.inflation.time},s.time.vacuum=e.time.vacuum,s.stage.resets=e.stage.resets}},ns=()=>{let t=e.clone,s=t.depth;for(let o=1;o<=6;o++){let i=e.buildings[o],l=t.buildings[o];i[0].current.setValue(l[0].current),i[0].total.setValue(l[0].total),i[0].trueTotal.setValue(l[0].trueTotal);for(let u=1;u<l.length;u++)i[u].true=l[u].true,i[u].current.setValue(l[u].current),i[u].total.setValue(l[u].total),i[u].trueTotal.setValue(l[u].trueTotal);if(e.ASR[o]=t.ASR[o],e.upgrades[o]=t.upgrades[o],e.researches[o]=t.researches[o],e.researchesExtra[o]=t.researchesExtra[o],s!=="stage"&&(e.strangeness[o]=t.strangeness[o],o<6)){e.milestones[o]=t.milestones[o];for(let u=0;u<w.milestones[o].length;u++)ve(u,o)}r.automatization.autoU[o]=[],r.automatization.autoR[o]=[],r.automatization.autoE[o]=[],r.lastUpgrade[o][0]=null}e.researchesAuto=t.researchesAuto,e.stage.current=t.stage.current,e.stage.time=t.stage.time,e.stage.peak=t.stage.peak,e.time.stage=t.time.stage,r.debug.timeLimit=!1,e.discharge.energy=t.discharge.energy,e.discharge.energyMax=t.discharge.energyMax,e.discharge.current=t.discharge.current,e.vaporization.clouds=t.vaporization.clouds,e.accretion.rank=t.accretion.rank,R.S2Levels(!0);let a=t.buildings[4];if(r.collapseInfo.trueStars=a[1].true+a[2].true+a[3].true+a[4].true+a[5].true,r.collapseInfo.pointsLoop=0,e.collapse.mass=t.collapse.mass,e.collapse.massMax=t.collapse.massMax,e.collapse.stars=t.collapse.stars,e.collapse.maxElement=t.collapse.maxElement,R.S4Levels(!0),e.elements=t.elements,r.automatization.autoEl=[],r.lastElement=null,r.mergeInfo.galaxies=e.buildings[5][3].current.toNumber(),e.merge.rewards=t.merge.rewards,e.merge.claimed=t.merge.claimed,e.merge.resets=t.merge.resets,e.merge.since=t.merge.since,e.darkness.energy=t.darkness.energy,e.darkness.energyMax=t.darkness.energyMax,e.darkness.fluid=t.darkness.fluid,s!=="stage"){for(let o=0;o<t.strange.length;o++)e.strange[o].current=t.strange[o].current,e.strange[o].total=t.strange[o].total;e.stage.resets=t.stage.resets,e.time.vacuum=t.time.vacuum,e.inflation.time=t.inflation.time,r.historyStorage.stage=t.history.stage.list,e.history.stage.best=t.history.stage.best,e.challenges.void=t.challenges.void,r.automatization.autoS=[],r.lastStrangeness=[null,0],r.lastMilestone=[null,0]}for(let o=0;o<w.researchesAuto.length;o++)C(o,0,"researchesAuto");for(let o=1;o<=6;o++){for(let i=0;i<r.researchesInfo[o].maxActive;i++)C(i,o,"researches");for(let i=0;i<r.researchesExtraInfo[o].maxActive;i++)C(i,o,"researchesExtra");if(C(0,o,"ASR"),s!=="stage")for(let i=0;i<r.strangenessInfo[o].maxActive;i++)C(i,o,"strangeness")}B.trueEnergy(),B.rankInformation(),s!=="stage"&&(R.strange1(),R.strange0()),j(),J(),e.clone={}};var Ye=(t,s=null)=>{let{time:a,ASR:o}=e;if(s!==null)s-=t;else{let p=Date.now(),h=p-a.updated;if(a.updated=p,a.export[0]+=h,r.lastSave+=h,s=a.excess+h,s<t){a.excess=s;return}else a.excess=0;if(s>t*600)return void De(s);s-=t,a.online+=t}let{auto:i,buildings:l}=e.toggles,u=r.buildingsInfo.maxActive,g=r.stageInfo.activeAll,m=t/1e3;(e.inflation.vacuum||g.includes(4))&&(e.merge.since+=m),a.stage+=m,a.vacuum+=m,a.universe+=m,a.end+=m,E.T0Inflation3=y.T0Inflation3()**e.tree[0][3];let c=m*R.globalSpeed();e.stage.time+=c,e.inflation.time+=c,e.inflation.age+=c,e.toggles.normal[3]&&Hs(),e.inflation.vacuum?ee(5,m):(i[9]&&g.includes(5)&&pt(!0),g.includes(4)&&ee(5,m),i[0]&&(g.includes(3)&&ee(3,0),g.includes(2)&&ee(2,0),g.includes(1)&&ee(1,0)),e.challenges.active===1&&a.stage>600&&ee(e.stage.current)&&(Se(e.stage.current),U("Stage reset has been forced")));let d=e.inflation.vacuum;if(i[11]&&e.verses[0].current>=12&&Ls(),R.globalCache(),g.includes(6)){e.strangeness[6][3]>=3&&(Ve(6),ce("researches",6),e.strangeness[6][3]>=5&&ce("researchesExtra",6));for(let p=u[6]-1;p>=1;p--)l[6][p]&&o[6]>=p&&oe(p,6,0,!0);i[10]&&Pt(!0),R.stage6Cache(),re(0,6,c)}if(g.includes(4)){if(i[8]&&As(),g.includes(5)){(e.strangeness[5][3]>=1||e.verses[0].current>=3)&&(Ve(5),ce("researches",5),ce("researchesExtra",5));for(let v=u[5]-1;v>=1;v--)l[5][v]&&o[5]>=v&&oe(v,5,0,!0);R.stage5Cache(),re(0,5,c);let h=e.researches[5][0];h>=1&&re(1,5,c),h>=2&&re(2,5,c),h>=3&&re(3,5,c),h>=4&&e.challenges.active!==0&&re(4,5,c)}else R.stage5Cache();Ve(4),ce("researches",4),ce("researchesExtra",4),R.stage4Cache();for(let h=u[4]-1;h>=1;h--)l[4][h]&&o[4]>=h&&oe(h,4,0,!0),re(h-1,4,c);R.S4Levels(),ue(0,5),ue(0,4);let p=!Bt(!0);ue(1,4),d&&p&&pt(!0)}else d&&(E.star[2]=1,B.solarHardcap());if(g.includes(3)){Ve(3),ce("researches",3),ce("researchesExtra",3),Ut(!0),R.stage3Cache(),r.accretionInfo.disableAuto=d&&e.researchesExtra[3][5]<1&&e.strangeness[1][8]>=2&&R.S3Build1(!0).moreOrEqual(y.dustHardcap());for(let p=1;p<u[3];p++)l[3][p]&&o[3]>=p&&oe(p,3,0,!0);re(2,3,c),re(1,3,c),d||re(0,3,c)}if(g.includes(2)){Ve(2),ce("researches",2),ce("researchesExtra",2),Lt(m);for(let p=u[2]-1;p>=1;p--)l[2][p]&&o[2]>=p&&oe(p,2,0,!0);re(1,2,c),d||re(0,2,c),ue(1,2),ue(0,2)}if(g.includes(1)){Ve(1),ce("researches",1),ce("researchesExtra",1),At(!0),R.stage1Cache(),re(5,1,c);for(let p=u[1]-1;p>=1;p--)l[1][p]&&o[1]>=p&&oe(p,1,0,!0),re(p-1,1,c);ue(1,1),ue(0,1)}s>=t?Ye(t,s):a.excess+=s},ge=(t,s)=>Math.log(t)/Math.log(s),y={effectiveEnergy:()=>{let t=e.discharge.energy;return e.upgrades[1][10]===1&&(t*=2),e.inflation.vacuum&&e.tree[0][4]>=1&&(t*=r.milestonesInfo[1].reward[1]),t+1},effectiveGoals:()=>{let t=e.discharge.current+e.strangeness[1][3]/2;return e.inflation.vacuum&&(t+=e.tree[1][4],e.tree[1][6]>=1&&(t+=r.accretionInfo.effective/2)),t},dischargeScaling:(t=e.researches[1][3],s=e.strangeness[1][2])=>{let a=2*t+s/2;return e.inflation.vacuum&&(a+=e.tree[1][4]/2),10-a},dischargeCost:(t=r.dischargeInfo.scaling)=>{let s=t**e.discharge.current;return e.inflation.vacuum&&e.strangeness[5][10]>=1&&(s/=r.mergeInfo.galaxies**2+1),e.strangeness[1][6]>=2&&(s/=r.strangeInfo.stageBoost[1]),s},dischargeBase:(t=e.researches[1][4])=>{let s=(4+t)/2;return e.challenges.active===0&&(s**=.5),e.inflation.vacuum&&(s+=e.tree[1][4]/10),s},S1Upgrade6:()=>.1+.03*e.researches[1][0],S1Upgrade7:(t=!1)=>{let s=2+e.researches[1][1],a=(s+100)/100;return!t||e.buildings[1][1].true>=1001?a:(s=s*.016+1,(a/s)**((e.buildings[1][1].true-1)/1e3)*s)},S1Upgrade9:()=>{let t=y.effectiveEnergy();return e.upgrades[1][10]!==1&&(t**=.5),t},S1Research2:(t=e.strangeness[1][1])=>20+t*(e.inflation.vacuum?1.5:1),S1Research5:()=>{let t=r.dischargeInfo.total;return e.inflation.vacuum?t>7?t+14:t*3:t>5?t+15:t*4},S1Extra1:(t=e.researchesExtra[1][1])=>t>=4?1.1:t>=3?1.2:2-.3*t,S1Extra3:(t=e.researchesExtra[1][3])=>t/20,S1Extra4:(t=e.researchesExtra[1][5])=>(r.dischargeInfo.base+y.effectiveEnergy()**.1)*(t+1)/100+1,preonsHardcap:(t=y.effectiveEnergy()**y.S1Extra3())=>new T(R.S3Build1()).multiply(1e14*t*E.S1SolarDelay),clouds:(t=!1)=>{let s=e.vaporization.clouds+1;return t&&(s+=r.vaporizationInfo.get),s>1e4&&(s=(s-1e4)**.7+1e4),s},cloudsGain:()=>e.challenges.active===0?.4:e.inflation.vacuum?.5:.6,S2Upgrade1:()=>{let t=e.buildings[2][2],s=Math.min(t.true,200);return(e.challenges.active===0&&e.challenges.super?1.01:1.02)**((t.current.toNumber()-s)**.7+s)},S2Upgrade2:()=>{let t=1e10/(e.inflation.vacuum?2.5:2)**e.strangeness[2][3];return e.inflation.vacuum&&(t/=2**e.tree[1][5],e.tree[0][4]>=1&&(t/=r.milestonesInfo[2].reward[1])),e.strangeness[2][6]>=2&&(t/=r.strangeInfo.stageBoost[2]),t},S2Upgrade3_power:(t=e.researches[2][2])=>(2+t)/200,S2Upgrade3:(t=y.S2Upgrade3_power())=>Math.max(e.buildings[2][0].current.toNumber(),1)**t,S2Upgrade4_power:(t=e.researches[2][3])=>(2+t)/200,S2Upgrade4:(t=y.S2Upgrade4_power())=>Math.max(e.buildings[2][1].current.toNumber(),1)**t,S2Extra1:(t,s=!1)=>{if(t<=0)return 1;let a=e.vaporization.clouds;return s&&(a+=r.vaporizationInfo.get),Math.max(a**(t/60)*Math.min(a,1e6)**(t/30),1)},S2Extra2:(t,s=e.researchesExtra[2][2])=>s>=1?(t+31)/32:1,submersion:()=>{let t=e.buildings[2][1].current.toNumber()+1;return Math.log2(t**.6/Math.min(t,1e10)**.4+1)},effectiveRank:()=>{let t=e.challenges.active===0&&e.challenges.super?e.accretion.rank<5?1:0:e.accretion.rank;if(e.inflation.vacuum){if(e.researchesExtra[1][2]<1)return 0;e.tree[0][4]>=1&&(t+=r.milestonesInfo[3].reward[1])}return t},S3Upgrade0:()=>(101+e.researches[3][1])/100,S3Upgrade1_power:(t=e.researchesExtra[3][3])=>(11+t)/100,S3Upgrade1:(t=y.S3Upgrade1_power())=>Math.max((e.buildings[3][1].current.toNumber()*(e.buildings[3][1].true+1))**t,1),S3Upgrade3:()=>(204+e.researches[3][4])/200,S3Upgrade13:()=>{let t=((y.S3Research6_base()-1)/2e5)**.8+1;return t===1||e.strangeness[3][7]<2?t:t*r.strangeInfo.stageBoost[3]**.1},S3Research6_base:(t=e.researches[3][6])=>{if(t===0)return 1;let s=new T(e.buildings[3][0].current);return Math.max(Math.min(s.toNumber(),1e21)**(t/60)*s.power(t/120).toNumber(),1)},S3Research6:(t=y.S3Research6_base())=>t===1||e.strangeness[3][7]<2?t:t*r.strangeInfo.stageBoost[3],S3Extra1:(t=e.researchesExtra[3][1])=>1+.11*t,S3Extra4:(t=e.researchesExtra[3][4])=>t>0?8**((r.accretionInfo.effective+t)/8):1,dustDelay:()=>{let t=E.S3SolarDelay*1.4**e.strangeness[3][8];return e.strangeness[5][10]>=3&&(t*=r.mergeInfo.galaxies/100+1),t},dustHardcap:()=>(e.accretion.rank>=5?1e48:8e46)*y.dustDelay(),mass:(t=!1)=>{let s=e.collapse.mass;return t&&r.collapseInfo.newMass>s&&(s=r.collapseInfo.newMass),s>1&&(e.elements[21]>=1&&(s**=1.1),e.challenges.active===0&&(s**=.2)),s},star:[(t=!1)=>{let s=e.collapse.stars[0];return t&&(s+=r.collapseInfo.starCheck[0]),e.elements[28]>=1&&(s*=1.5),s+=1,e.elements[6]>=1&&(s**=y.element6()),s},(t=!1)=>{let s=e.collapse.stars[1]*(1+e.strangeness[4][8]);t&&(s+=r.collapseInfo.starCheck[1]*(1+e.strangeness[4][8]),e.elements[22]>=1&&(s+=r.collapseInfo.starCheck[0])),e.elements[22]>=1&&(s+=e.collapse.stars[0]);let a=(s+1)**(.5+e.strangeness[4][8]/8);return e.elements[12]>=1&&(a*=ge(s+4,4)),a},(t=!1)=>{let s=e.collapse.stars[2];if(t&&(s+=r.collapseInfo.starCheck[2]),s<=0)return 1;let a=e.elements[18]>=1?3:2,o=(s+1)/ge(s+a,a);return e.inflation.vacuum&&e.tree[0][4]>=1&&(o*=r.milestonesInfo[4].reward[1]),o}],massGain:()=>{let t=e.elements,s=.004;return t[3]>=1&&(s+=.002),t[5]>=1&&(s+=2e-4*e.buildings[4][1].true),s*=t[15]>=1?r.collapseInfo.trueStars:e.buildings[4][1].true,e.inflation.vacuum?s=s*(e.challenges.active===0?48:96)+1:(t[10]>=1&&(s*=2),e.researchesExtra[4][1]>=1&&(s*=y.S4Extra1()),s*=E.star[2],e.strangeness[5][7]>=1&&(s*=r.strangeInfo.stageBoost[5])),s},S4Shared:()=>{let t=new T(y.S4Research1()).power(r.collapseInfo.trueStars);return e.elements[24]>=1&&t.multiply(y.element24()),e.inflation.vacuum&&e.researchesExtra[1][4]>=1&&t.multiply(y.S1Extra4()**r.dischargeInfo.total),t},S4Research0_base:(t=e.researches[4][2])=>(14+t)/10,S4Research0:(t=y.S4Research0_base())=>{let s=e.researches[4][0];return e.elements[19]>=1&&s++,t**s},S4Research1:(t=e.researches[4][1],s=e.researchesExtra[4][1])=>t<=0?1:1+(s>=1?.006:.005)*(t>=11?(t+92)/16:t>=8?(t+41)/8:t>=6?(t+17)/4:t>=5?5.5:1+t),S4Research4:(t=!1,s=e.researches[4][4])=>{if(s<1)return 1;let a=e.collapse.stars[2],o=e.collapse.mass;t&&(a+=r.collapseInfo.starCheck[2],r.collapseInfo.newMass>o&&(o=r.collapseInfo.newMass));let i=s>=2?2:3,l=ge(a+i,i);return o>1&&e.elements[23]>=1&&(l*=o**.1),l},S4Extra1:()=>(10+e.researches[4][1])/10,mergeMaxResets:()=>{if(e.upgrades[5][3]!==1)return 0;let t=2+e.researchesExtra[5][3];return e.elements[30]>=1&&(t+=e.collapse.maxElement-29),t},reward:[(t=!1)=>{let s=e.merge.rewards[0]+1;return t&&(s+=r.mergeInfo.checkReward[0]),s*y.S5Extra2(r.mergeInfo.S5Extra2,t)},(t=!1)=>{let s=e.researchesExtra[5][2]+e.merge.rewards[1];return t&&(s+=r.mergeInfo.checkReward[1]),y.S5Extra2(s,t)/y.S5Extra2(e.researchesExtra[5][2],t)}],groupsCost:()=>50-y.S5Extra4(),mergeScore:()=>r.mergeInfo.galaxies+e.merge.rewards[0]*2+e.merge.rewards[1]*4,S5Upgrade0:()=>3*(e.inflation.vacuum?1.6:1.8)**e.strangeness[5][1],S5Upgrade1:()=>2*(e.inflation.vacuum?1.6:1.8)**e.strangeness[5][1],S5Upgrade2:(t=!1,s=e.upgrades[5][2])=>{if(s<1)return 0;let a=e.collapse.mass;return t&&r.collapseInfo.newMass>a&&(a=r.collapseInfo.newMass),a=Math.log10(Math.max(a/1e4,10))/4,e.inflation.vacuum||(a*=2),a},S5Research2:()=>1+e.researches[5][2]/160,S5Research3:()=>1+e.researches[5][3]/160,S5Extra2:(t,s=!1)=>{let a=e.merge.rewards[0];return s&&(a+=r.mergeInfo.checkReward[0]),(8+t*a)/8},S5Extra4:(t=e.researchesExtra[5][4])=>(19-t)*t/2,element6:()=>e.researchesExtra[4][2]>=1?2:1.5,element24_power:()=>e.elements[27]>=1?.02:.01,element24:()=>new T(e.buildings[4][0].current).max(1).power(y.element24_power()),element26:()=>{let t=new T(e.buildings[4][0].trueTotal).log(10).toNumber()-48;return e.elements[29]>=1&&(t=(199+t)*t/200),Math.max(t,0)},darkSoftcap:(t=!1)=>{let s=r.buildingsInfo.producing[6][1]*(1+e.researches[6][1])*y.effectiveDarkEnergy()**(e.researchesExtra[6][2]/8);return t?s:s*2e6},effectiveDarkEnergy:(t=E.fluid)=>e.darkness.energy*t+(t-1)*e.researchesExtra[6][4]/4+1,darkFluid:(t=!1)=>{let s=e.darkness.fluid+1;return t&&(s+=r.inflationInfo.newFluid),s},S6Upgrade0:()=>(4+e.researchesExtra[6][4])/20,S2Strange9:()=>e.tree[1][5]>=4?(e.vaporization.clouds+1)**.01:Math.log10(e.vaporization.clouds+1)/80+1,trueUniverses:()=>e.verses[0].true+e.verses[0].other[0],T0Inflation0:()=>Math.max(2**(1-e.time.stage/3600),1),TOInflation1_softcap:()=>(e.challenges.active===0&&e.challenges.super?1:2e6)*(1+e.researchesExtra[6][1])**2,T0Inflation1:()=>{let t=e.buildings[6][0].current.toNumber()+1;return t**.01*Math.min(t,y.TOInflation1_softcap())**.03},T0Inflation3:()=>(10+r.inflationInfo.totalSuper)/10,strangeGain:(t,s=!0)=>{let a=s?e.inflation.vacuum?e.strangeness[5][3]>=1?5:4:e.milestones[1][0]>=6?2:1:0;if(t&&(a=(a+E.element26)*E.strangeMiltipliers),s){if(a*=1.4**e.strangeness[5][2]*1.4**e.tree[0][2]*1.2**e.tree[1][1],e.inflation.vacuum&&e.tree[1][6]>=4&&(a*=1.02**r.accretionInfo.effective),e.challenges.active===1){let o=e.challenges.stability;a/=2**Math.max(e.stage.resets+o-8,0)*2**o,t||(a/=2**o*4)}else if(e.challenges.active===0&&e.challenges.super)return 1}else a*=1.4**e.strangeness[6][1]*1.4**e.tree[1][3];return a*r.strangeInfo.strangeletsInfo[1]*E.T0Inflation3},cosmonGain:()=>{let t=(e.darkness.energy>=1e3?e.verses[0].current:r.inflationInfo.trueUniverses)*1.4**e.tree[1][2];return(e.clone.inflation?.vacuum??e.inflation.vacuum)&&t++,t}},R={globalSpeed:()=>{let t=e.tree,s=e.challenges.active,a=1.1**e.researches[6][1]*1.4**e.strangeness[6][0]*y.T0Inflation1()**t[0][1]*E.T0Inflation3*1.4**t[1][0];return e.researchesExtra[4][4]>=1&&(a*=y.star[2]()),t[0][0]>=1&&(a*=2),t[0][0]>=2&&s===null&&(e.inflation.vacuum||t[0][4]>=1)&&(a*=e.challenges.stability>=2?2:y.T0Inflation0()),s!==null&&(a*=1.2**Math.min(t[0][2],e.challenges.stability)*5/(5-t[0][5]),s===1&&(a/=4**e.challenges.stability*4)),r.inflationInfo.globalSpeed=a},globalCache:()=>{r.dischargeInfo.total=y.effectiveGoals(),r.dischargeInfo.base=y.dischargeBase(),E.S2Upgrade3=e.upgrades[2][3]===1?y.S2Upgrade3():1,E.S2Upgrade4=e.upgrades[2][4]===1?y.S2Upgrade4():1,r.accretionInfo.effective=y.effectiveRank()},stage1Cache:()=>{E.S1Upgrade6=e.upgrades[1][6]===1?y.S1Upgrade6():0,E.S1Upgrade7=e.upgrades[1][7]===1?y.S1Upgrade7():1;let t=(e.inflation.vacuum?2:1.8)**e.strangeness[1][0];e.upgrades[1][5]===1&&(t*=r.dischargeInfo.base**r.dischargeInfo.total),e.strangeness[1][6]>=1&&(t*=r.strangeInfo.stageBoost[1]),e.inflation.vacuum&&(e.tree[0][4]>=1&&(t*=r.milestonesInfo[1].reward[0]),e.challenges.active===0&&(t/=4)),E.microworld=t},S1Build1:(t=!1)=>{let s=e.buildings[1][1],a=y.effectiveEnergy()**y.S1Extra3(),o,i=6e-4*E.microworld*a,l=new T(s.current).minus(s.true);return l.moreThan(1)?o=l.power(.11).plus(s.true):o=s.current,e.upgrades[1][7]===1&&(i*=y.S1Upgrade7(!0)**Math.min(s.true,1001),e.challenges.supervoid[4]>=4&&s.true>1001&&(i*=1.04**(s.true-1001))),t?new T(i).multiply(o):r.buildingsInfo.producing[1][1].setValue(i).multiply(o).min(y.preonsHardcap(a))},S1Build2:()=>r.buildingsInfo.producing[1][2].setValue(E.S1Upgrade7).power(e.buildings[1][2].true).allMultiply(.4*E.microworld,e.buildings[1][2].current),S1Build3:()=>{let t=e.inflation.vacuum?3:1,s=(e.inflation.vacuum?.2:1.6)*E.microworld;return e.upgrades[1][0]===1&&(s*=8),r.buildingsInfo.producing[1][t].setValue(E.S1Upgrade7).power(e.buildings[1][t].true).allMultiply(s,e.buildings[1][t].current)},S1Build4:()=>{let t=e.inflation.vacuum,s=t?4:2,a=(t?.8:.4)*E.microworld;return e.upgrades[1][3]===1&&(a*=t?6:4),r.buildingsInfo.producing[1][s].setValue(E.S1Upgrade7).power(e.buildings[1][s].true).allMultiply(a,e.buildings[1][s].current)},S1Build5:(t=!1)=>{let s=e.inflation.vacuum?5:3,a=.2*E.microworld*e.buildings[1][s].current.toNumber()*E.S1Upgrade7**e.buildings[1][s].true;return e.upgrades[1][4]===1&&(a*=4),t&&r.buildingsInfo.producing[1][s].setValue(a),a},S1Build6:()=>{let t=R.S1Build5();return t<1&&(t=1),t=ge(t,y.S1Extra1())*y.S1Research2()**e.researches[1][2]*y.S1Research5()**e.researches[1][5],e.upgrades[1][9]===1&&(t*=y.S1Upgrade9()),e.inflation.vacuum&&(t*=R.S2Build1()),E.tritium=t},S2Levels:(t=null)=>{let s=r.vaporizationInfo;if(t!==null&&(s.S2Extra1=0,s.S2Research1=0,s.S2Research0=0,!t))return;let a=e.buildings[2][1].total.toNumber();s.S2Extra1!==e.researchesExtra[2][1]&&(s.S2Extra1=Math.min(e.researchesExtra[2][1],ge(a*999e-12+1,1e3))),s.S2Research1!==e.researches[2][1]&&(s.S2Research1=Math.min(e.researches[2][1],ge(a/100+1,5))),s.S2Research0!==e.researches[2][0]&&(s.S2Research0=Math.min(e.researches[2][0],Math.max(ge(a/10,1.366)+1,ge(a*.0366+1,1.366))))},S2FreeBuilds:()=>{let t=e.buildings[2],s=e.upgrades[2],a=t[5].true,o=t[4].true,i=t[3].true,l=t[2].true;s[8]===1&&(a+=t[6].true),s[7]===1&&(o+=a*(1+e.researches[2][6])),s[6]===1&&(i+=o*(1+e.researches[2][5])),s[5]===1&&(l+=i*(1+e.researches[2][4])),t[5].current.setValue(a),t[4].current.setValue(o),t[3].current.setValue(i),t[2].current.setValue(l)},S2Build1:()=>{let t=e.inflation.vacuum,s=e.buildings[2][1],a=s.current.toNumber();if(e.challenges.active===0)a>1&&(a=1);else if(t){let o=a-s.true;o>1&&(a=o**.2+s.true)}return a*=(t?2:8e-4)*(e.challenges.active===0&&e.challenges.super?2:3)**r.vaporizationInfo.S2Research0*2**e.strangeness[2][0],e.upgrades[2][0]===1&&(a*=(t?1.02:1.04)**s.true),t&&a<1&&(a=1),r.buildingsInfo.producing[2][1]=a},S2Build2:(t=!1)=>{let s=r.buildingsInfo.producing[2],a=e.buildings[2];if(a[2].true<1&&!t){let m=y.S2Extra1(e.researchesExtra[2][1]);return s[2]=(m-1)*y.S2Extra2(m)}let o=y.S2Extra1(r.vaporizationInfo.S2Extra1),i=1.24**e.strangeness[2][7],l=e.challenges.active===0,u=l&&e.challenges.super?1:2;if(s[6]=a[6].true<1?1:(e.upgrades[2][8]===1?1.1:1.08)**a[6].true*i,s[5]=Math.max(u*a[5].current.toNumber()*y.S2Extra2(o)*i,1),s[4]=Math.max(u*a[4].current.toNumber()*i,1),s[3]=Math.max(u*a[3].current.toNumber()*i,1),t)return 0;let g=(l?6e-4:4.8)*a[2].current.toNumber()*y.clouds()*s[3]*s[4]*s[5]*s[6]*E.S2Upgrade3*E.S2Upgrade4*(l&&e.challenges.super?1.4:2)**r.vaporizationInfo.S2Research1*o*(e.inflation.vacuum?1.8:1.6)**e.strangeness[2][1];return e.upgrades[2][1]===1&&(g*=y.S2Upgrade1()),e.inflation.vacuum&&(g*=y.S3Extra4(),e.elements[1]>=1&&(g*=2),e.tree[0][4]>=1&&(g*=r.milestonesInfo[2].reward[0]),e.strangeness[5][10]>=2&&(g*=r.mergeInfo.galaxies+1)),e.strangeness[2][6]>=1&&(g*=r.strangeInfo.stageBoost[2]),s[2]=g},stage3Cache:()=>{let t=r.buildingsInfo.producing[3];t[5]=1.1**e.buildings[3][5].true,E.S3Strange1=(e.inflation.vacuum?1.48:1.6)**e.strangeness[3][1],t[4]=(e.upgrades[3][12]===1?1.14:1.1)**e.buildings[3][4].true*t[5],E.S3Strange3=t[4]**(e.inflation.vacuum?.1:.2)},S3Build1:(t=!1)=>{let s=e.researches[3],a=e.upgrades[3],o=e.inflation.vacuum,i=(o?2:8e-20)*3**s[0]*2**s[3]*3**s[5]*1.11**e.researchesExtra[3][0]*y.S3Extra1()**r.accretionInfo.effective*1.8**e.strangeness[3][0];o&&(i*=y.submersion(),e.elements[4]>=1&&(i*=1.4),e.elements[14]>=1&&(i*=1.4),e.strangeness[5][10]>=3&&(i*=r.mergeInfo.galaxies+1),e.tree[0][4]>=1&&(i*=r.milestonesInfo[3].reward[0])),a[0]===1&&(i*=y.S3Upgrade0()**e.buildings[3][1].true),a[1]===1&&(i*=y.S3Upgrade1()),a[2]===1&&(i*=2),a[5]===1&&(i*=3),a[6]===1&&(i*=2*1.5**s[7]),a[9]===1&&(i*=2),a[10]===1&&(i*=8*2**s[8]),e.strangeness[3][3]>=1&&(i*=E.S3Strange3),e.challenges.active===0?r.accretionInfo.dustSoft=e.accretion.rank>=5?.8:.9:e.accretion.rank>=5?r.accretionInfo.dustSoft=o||i>1?.9:1.1:r.accretionInfo.dustSoft=1;let l=(t?new T(i):r.buildingsInfo.producing[3][1].setValue(i)).multiply(e.buildings[3][1].current).power(r.accretionInfo.dustSoft);return o&&(e.researchesExtra[3][5]>=2?l.multiply(y.dustDelay()):!t&&e.researchesExtra[3][5]<1&&l.min(y.dustHardcap()),l.max(1)),l},S3Build2:()=>{let t=e.buildings[3][2].current.toNumber()*3**e.researches[3][2]*y.S3Research6()*E.S3Strange1;return e.upgrades[3][3]===1&&(t*=y.S3Upgrade3()**e.buildings[3][2].true),e.upgrades[3][4]===1&&(t*=3),e.strangeness[3][3]>=1&&(t*=E.S3Strange3),r.buildingsInfo.producing[3][2]=t},S3Build3:()=>{let t=.4*e.buildings[3][3].current.toNumber()*r.buildingsInfo.producing[3][4]*E.S3Strange1;return e.researchesExtra[3][2]>=1&&(t*=2),e.upgrades[3][7]===1&&(t*=1.02**e.buildings[3][3].true),r.buildingsInfo.producing[3][3]=t},stage4Cache:()=>{E.star[0]=y.star[0](),E.star[1]=y.star[1](),E.star[2]=y.star[2]();let t=y.S4Research0()*y.mass()*E.star[1]*y.S4Research4()*1.6**e.strangeness[4][0];e.elements[4]>=1&&(t*=1.4),e.elements[14]>=1&&(t*=1.4),e.inflation.vacuum&&(e.researchesExtra[2][3]>=1&&(t*=E.S2Upgrade3),e.researchesExtra[2][3]>=3?t*=E.S2Upgrade4:e.researchesExtra[2][3]===2&&(t*=E.S2Upgrade4**.5),e.tree[0][4]>=1&&(t*=r.milestonesInfo[4].reward[0]),e.challenges.active===0&&(t/=8e3)),e.strangeness[4][7]>=1&&(t*=r.strangeInfo.stageBoost[4]),E.interstellar=t},S4Levels:(t=null)=>{if(t!==null&&(r.mergeInfo.S5Extra2=0,!t))return;let s=e.researchesExtra[5][2]+e.merge.rewards[1];r.mergeInfo.S5Extra2!==s&&(r.mergeInfo.S5Extra2=Math.min(s,Math.max(new T(e.buildings[4][0].total).divide("1e360").log(1e30).toNumber(),0)))},S4Build1:()=>{let t=[e.buildings[4][1].current,y.S4Shared()],s=40*E.interstellar;e.elements[1]>=1&&(s*=2),e.elements[27]>=1&&(s*=E.star[0]);let a=e.inflation.vacuum?4:3;return e.researches[5][1]>=a&&(t.push(r.buildingsInfo.producing[5][2]),s/=2**a),r.buildingsInfo.producing[4][1].setValue(s).allMultiply(...t)},S4Build2:()=>{let t=[e.buildings[4][2].current,y.S4Shared()],s=1200*E.interstellar*E.star[0]*2**e.researches[4][3],a=e.inflation.vacuum?3:2;return e.researches[5][1]>=a&&(t.push(r.buildingsInfo.producing[5][2]),s/=2**a),r.buildingsInfo.producing[4][2].setValue(s).allMultiply(...t)},S4Build3:()=>{let t=[e.buildings[4][3].current,y.S4Shared()],s=6e7*E.interstellar,a=e.inflation.vacuum?2:1;return e.researches[5][1]>=a&&(t.push(r.buildingsInfo.producing[5][2]),s/=2**a),e.elements[33]>=1&&(s*=E.star[0]),r.buildingsInfo.producing[4][3].setValue(s).allMultiply(...t)},S4Build4:()=>{let t=[e.buildings[4][4].current,y.S4Shared()],s=6e9*E.interstellar,a=e.inflation.vacuum?1:0;return e.researches[5][1]>=a&&(t.push(r.buildingsInfo.producing[5][2]),s/=2**a),r.buildingsInfo.producing[4][4].setValue(s).allMultiply(...t)},S4Build5:()=>r.buildingsInfo.producing[4][5].setValue(2e11*E.interstellar).allMultiply(e.buildings[4][5].current,y.S4Shared(),r.buildingsInfo.producing[5][2]),stage5Cache:()=>{let t=e.inflation.vacuum,s=r.buildingsInfo.producing[5][3],a=10**e.researches[5][4],o=(t?2:6)+y.S5Upgrade2();t&&e.tree[0][4]>=1&&(o+=r.milestonesInfo[5].reward[1]),E.galaxyBase=o;let i=1;if(e.strangeness[5][7]>=2&&(i*=r.strangeInfo.stageBoost[5]),s.setValue(o).power(e.buildings[5][3].true),r.mergeInfo.galaxies>0){let m=(r.mergeInfo.galaxies+1)/(e.buildings[5][3].true+1)*i;t&&(m*=y.reward[0]()),e.upgrades[5][6]===1&&(m*=100*a),s.multiply(m)}i*=(t?1.4:1.6)**e.strangeness[5][0],t&&e.tree[0][4]>=1&&(i*=r.milestonesInfo[5].reward[0]);let l=2**e.researches[5][1],u=2*l*i;e.upgrades[5][1]===1&&(u*=y.S5Upgrade1()),e.upgrades[5][5]===1&&(u*=1e3*a),t&&e.upgrades[3][13]===1&&(u*=y.S3Upgrade13()),r.buildingsInfo.producing[5][2].setValue(u).allMultiply(e.buildings[5][2].current,s,y.S5Research3()**e.buildings[5][2].true).max(l);let g=6*2**e.researches[5][0]*i;e.upgrades[5][0]===1&&(g*=y.S5Upgrade0()),e.upgrades[5][4]===1&&(g*=1e3*a),t&&(e.researchesExtra[2][4]>=1&&(g*=E.S2Upgrade3),e.researchesExtra[2][4]>=3?g*=E.S2Upgrade4:e.researchesExtra[2][4]===2&&(g*=E.S2Upgrade4**.5)),r.buildingsInfo.producing[5][1].setValue(g).allMultiply(e.buildings[5][1].current,s,y.S5Research2()**e.buildings[5][1].true)},stage6Cache:()=>{E.fluid=y.darkFluid()},S6Build1:()=>{let t=2*e.buildings[6][1].true*(1+e.researches[6][2]/100)**e.buildings[6][1].true;return t<1&&(t=1),r.buildingsInfo.producing[6][1]=t},verse0:()=>{let t=6+e.researchesExtra[6][0],s=(r.inflationInfo.trueUniverses<1?e.verses[0].current:r.inflationInfo.trueUniverses**(r.inflationInfo.trueUniverses/4)*(e.verses[0].current+1)/(r.inflationInfo.trueUniverses+1))*E.fluid*3**Math.min(e.researches[6][0],t)*y.darkSoftcap(!0)**(e.researchesExtra[6][3]/40);return e.researches[6][0]>t&&(s*=2**(e.researches[6][0]-t)),s},strange0:(t=e.elements[26]>=1)=>{let s=e.inflation.vacuum,a=r.strangeInfo.stageBoost,o=e.strange[0][e.verses[0].current>=12?"total":"current"]+1;a[1]=o**(s?e.strangeness[1][6]>=2?.34:.26:.22),a[2]=o**(s?.22:.18),a[3]=o**(s?.68:.76),a[4]=o**((s&&e.strangeness[4][7]>=2?.18:.16)*(t?2:1)),a[5]=o**.06},strange1:()=>{let t=r.strangeInfo.strangeletsInfo,s=e.strange[1].current;t[0]=(Math.log2(s+2)-1)/100,t[1]=s**.4/80+1}},B={trueEnergy:(t=!1)=>{let s=r.dischargeInfo.energyType;e.inflation.vacuum?(s[1]=[0,1,3,5,10,20],s[2]=[0,20,30,40,50,60,120],s[3]=[0,20,40,60,120,160],s[4]=[0,80,160,240,320,400],s[5]=[0,400,400,2e3],s[1][1]+=e.strangeness[1][7]*2,e.strangeness[5][10]>=1&&(s[5][3]*=5)):s[1]=[0,1,5,20];let a=0;for(let o=1;o<(e.inflation.vacuum?6:2);o++){let i=0;for(let l=1;l<s[o].length;l++)e.challenges.active===0&&o!==1&&(s[o][l]/=o>=4?4:2),t||(i+=s[o][l]*e.buildings[o][l].true);r.dischargeInfo.energyStage[o]=i,t||(a+=i)}r.dischargeInfo.energyTrue=a,s[6]=[0,1],r.dischargeInfo.energyStage[6]=0;for(let o=1;o<s[6].length;o++)s[6][o]*=1+e.researches[6][3],t||(r.dischargeInfo.energyStage[6]+=s[6][o]*e.buildings[6][o].true)},newClouds:()=>{let t=y.cloudsGain();return r.vaporizationInfo.get=(e.vaporization.clouds**(1/t)+e.buildings[2][1][e.researchesExtra[2][0]>=1||e.inflation.vacuum&&e.tree[1][5]>=1?"total":"current"].toNumber()/y.S2Upgrade2())**t-e.vaporization.clouds},rankInformation:()=>{let t=r.accretionInfo;t.maxRank=e.inflation.vacuum?e.strangeness[3][9]>=2?1e15:e.strangeness[3][9]>=1?7:6:e.stage.true>=4||e.stage.true===3&&e.event?5:4;let s=e.accretion.rank;if(s<7){t.nextRank.setValue(t.rankCost[s]);return}t.nextRank.setValue(1e16).power(s-3.5)},solarHardcap:()=>{E.S3SolarDelay=y.massGain();let t=E.star[2];e.elements[10]>=1&&(t*=2),e.researchesExtra[4][1]>=1&&(t*=y.S4Extra1()),E.S1SolarDelay=t,r.collapseInfo.solarCap=.01235*E.S3SolarDelay*t,e.strangeness[5][7]>=1&&(r.collapseInfo.solarCap*=r.strangeInfo.stageBoost[5]),e.tree[1][6]>=3&&(r.collapseInfo.solarCap*=1.01**r.accretionInfo.effective),e.strangeness[5][10]>=4&&e.tree[1][7]>=3&&(r.collapseInfo.solarCap*=r.mergeInfo.galaxies/1e3+1)},timeUntil:()=>e.inflation.vacuum?(R.stage3Cache(),R.stage1Cache(),new T(r.collapseInfo.solarCap/896499278339628e-81).minus(e.buildings[1][0].current).allDivide(R.S1Build1(),r.inflationInfo.globalSpeed).replaceNaN(1/0).toNumber()):0,newMass:()=>{e.inflation.vacuum?(B.solarHardcap(),r.collapseInfo.newMass=Math.min(e.buildings[1][0].current.toNumber()*896499278339628e-81,r.collapseInfo.solarCap)):r.collapseInfo.newMass=y.massGain()},newStars:(t=!1)=>{let s=r.collapseInfo.starCheck;if(t){s[0]=0,s[1]=0,s[2]=0;return}let a=e.buildings[4],o=e.collapse.stars,i=e.inflation.vacuum&&e.challenges.supervoid[4]>=3,l=i?(1+e.strangeness[4][3])*e.strangeness[4][3]/20:e.strangeness[4][3]/10;s[0]=a[2].trueTotal.moreThan(0)?a[2].true+a[1].true*l:0,s[1]=a[3].true,i&&a[3].trueTotal.moreThan(0)&&(s[1]+=a[2].true*l),s[2]=a[4].true+a[5].true*e.researches[4][5],e.inflation.vacuum&&e.tree[1][7]>=1&&(s[0]+=Math.min(s[0],o[0])/4,s[1]+=Math.min(s[1],o[1])/4,s[2]+=Math.min(s[2],o[2])/4),s[0]=Math.max(Math.floor(s[0])-o[0],0),s[1]=Math.max(Math.floor(s[1])-o[1],0),s[2]=Math.max(Math.floor(s[2])-o[2],0)},mergeReward:(t=!1)=>{let s=r.mergeInfo.checkReward;if(t){s[0]=0,s[1]=0;return}let a=e.researchesExtra[5],o=y.groupsCost();s[0]=a[1]>=2?Math.floor(r.mergeInfo.galaxies/o)-e.merge.rewards[0]:a[1]>=1?Math.floor(e.buildings[5][3].true/o)-e.merge.claimed[0]:0,s[1]=a[5]>=2?Math.floor(r.mergeInfo.galaxies/100)-e.merge.rewards[1]:a[5]>=1?Math.floor(e.buildings[5][3].true/100)-e.merge.claimed[1]:0},newFluid:()=>{let t=e.darkness.fluid+1,s=y.S6Upgrade0();return r.inflationInfo.newFluid=(Math.log2(Math.max(e.buildings[6][0].current.toNumber()/1e8,1))+e.darkness.energy+t**(1/s))**s-t},quarksGain:()=>{let t=r.mergeInfo.galaxies+1;e.inflation.vacuum&&(t*=y.S5Extra2(e.researchesExtra[5][2]+e.merge.rewards[1]),e.strangeness[2][9]>=1&&(t*=y.S2Strange9())),E.strangeMiltipliers=t,E.element26=y.element26(),r.strangeInfo.strange0Gain=e.stage.true>=6||e.strange[0].total>=1?y.strangeGain(!0):1,r.strangeInfo.strange1Gain=e.strangeness[5][8]>=1?y.strangeGain(!0,!1):0}},oe=(t,s,a=e.toggles.shop.input,o=!1)=>{if(!us(t,s))return;let i=e.buildings[s][t],l,u,g=!1,m=!0;s===1?(l=e.buildings[1][t-1].current,e.tree[1][8]>=1?g=!0:t===1&&e.inflation.vacuum&&(g=e.strangeness[1][8]>=1&&(e.challenges.supervoid[3]>=5||e.researchesExtra[1][2]>=1))):s===2?(l=e.buildings[2][t===1?0:1].current,g=e.tree[1][8]>=2):s===3?(l=e.buildings[3][0].current,g=e.tree[1][8]>=3,r.accretionInfo.disableAuto&&(e.accretion.rank>=6?u=r.collapseInfo.solarCap*198847e28:e.strangeness[3][4]<2&&e.challenges.supervoid[3]>=5&&(u=r.accretionInfo.nextRank))):s===5&&t===3?(l=e.collapse.mass,m=!1):s===6?l=e.buildings[6][0].current:(l=e.buildings[4][0].current,g=e.tree[1][8]>=4);let c=new T(l);o&&!g&&m&&i.true>=1&&(u!==void 0&&c.minus(u),e.toggles.shop.wait[s]>1&&c.divide(e.toggles.shop.wait[s]));let d=Ue(t,s);if(d.moreThan(c))return;let p=1;if(a!==1&&m){let h=r.buildingsInfo.increase[s][t];if(g){if(p=Math.floor(c.divide(d).log(h).toNumber())+1,a>0){if(p<a)return;p=a}}else{if(p=Math.floor(c.multiply(h-1).divide(d).plus(1).log(h).toNumber()),a>0){if(p<a)return;p=a}p>1&&d.multiply(new T(h).power(p).minus(1).divide(h-1))}if(!isFinite(p)){Ie(`Error encountered, couldn't create ${p} of ${r.buildingsInfo.name[s][t]}`);return}}i.true+=p,i.current.plus(p),i.total.plus(p),i.trueTotal.plus(p),typeof l=="object"?(g||(l.minus(d),e.inflation.vacuum&&(s===1?t===1&&e.buildings[3][0].current.setValue(l).multiply(178266192e-41):s===2?t===1&&e.buildings[1][5].current.setValue(l).multiply(602214076e15):s===3&&e.buildings[1][0].current.setValue(l).divide(178266192e-41))),(e.inflation.vacuum||s===1)&&rs(p,t,s),s===1?t===5&&e.upgrades[1][8]===0&&e.buildings[2][0].current.setValue(i.current).divide(602214076e15):s===2?t===1?e.buildings[2][2].true<1&&R.S2Levels():R.S2FreeBuilds():s===3?t>=4&&(R.stage3Cache(),ue(1,3)):s===4&&(r.collapseInfo.trueStars+=p),o||(P(),b.SRSettings[0]&&(n("SRMain").textContent=`Made ${f(p)} '${r.buildingsInfo.name[s][t]}'`))):s===5&&t===3&&(r.mergeInfo.galaxies+=p,Ce("galaxy",e.inflation.vacuum?[1,2,3,4,5]:[4,5]),C(0,4,"researches"),C(1,4,"researches"),C(2,4,"researches"),C(5,4,"researches"),ne(5),ue(1,5),o||(P(),b.SRSettings[0]&&(n("SRMain").textContent="Caused Galaxy reset")))},rs=(t,s,a)=>{let o=e.discharge,i=r.dischargeInfo,l=i.energyType[a][s]*t;if(i.energyStage[a]+=l,a===6){if(e.upgrades[6][0]!==1)return;let u=e.darkness;u.energy+=l,u.energyMax<u.energy&&(u.energyMax=u.energy);return}i.energyTrue+=l,o.energy+=l,o.energyMax<o.energy&&(o.energyMax=o.energy)},Ue=(t,s)=>{let a=r.buildingsInfo.increaseStart[s][t],o=r.buildingsInfo.firstCost[s][t];return s===1?(a-=E.S1Upgrade6,t===1?!e.inflation.vacuum&&e.upgrades[1][2]===1&&(o/=8):t===3?e.upgrades[1][1]===1&&(o/=16):t===4&&(e.upgrades[1][2]===1&&(o/=8),e.researchesExtra[1][0]>=1&&(o/=16))):s===3?(e.strangeness[3][7]>=1&&(o/=r.strangeInfo.stageBoost[3]),t===4&&e.upgrades[3][11]===1&&(a/=2)):s===4?(e.elements[2]>=1&&(a-=.1),e.elements[8]>=1&&(a-=.05),o/=2**e.strangeness[4][1],e.researchesExtra[4][3]>=1&&(o/=E.star[1]),e.elements[13]>=1&&(o/=100),t===1?e.strangeness[4][7]>=2&&(o/=r.strangeInfo.stageBoost[4]):e.challenges.active===0&&e.challenges.super&&(o*=100)):s===5?t===3?(e.elements[32]>=1&&(a-=.01),e.challenges.active===0?a+=.05:e.challenges.active===1&&(a+=.01),e.elements[36]>=1&&(o/=1.21)):e.challenges.active===0&&e.challenges.super&&(o*=100):s===6&&t===1&&(a-=e.researches[6][2]/20),r.buildingsInfo.increase[s][t]=a,new T(a).power(e.buildings[s][t].true).multiply(o)},ht=(t,s=!1)=>{if(!gs(t)||Ze(t)>y.mergeScore())return;let a=e.challenges.active,o=e.verses[t];if(t!==0||a===null){if(t!==0)return U("Not implemented");o.true++}else if(a===0&&!e.challenges.super)o.other[0]++;else return U("Not implemented");if(o.current++,o.total++,t===0){e.stage.true<8&&(e.stage.true<7?(e.stage.true=7,e.event=!1,fe(),te(9)):o.true>=5&&(e.stage.true=8,e.event=!1,fe(),te(11))),e.stage.active<6&&Q(1),r.inflationInfo.trueUniverses=y.trueUniverses();let i=r.inflationInfo.trueUniverses,l=!1;l&&i++,e.cosmon[0].current+=i,e.cosmon[0].total+=i,e.inflation.resets++,e.time.export[1]=0,e.time.export[2]=0,l||(e.inflation.vacuum=!1,xe(!1)),a!==null&&(e.challenges.active=null,e.clone={},Fe()),Ge(1),!s&&b.SRSettings[0]&&(n("SRMain").textContent="Caused Universe reset");let u=y.cosmonGain()/e.time.end;e.inflation.peak[0]<u&&(e.inflation.peak[0]=u,e.inflation.peak[1]=e.time.end)}},Ze=t=>{if(t!==0)return 2+e.verses[1].true;let s=e.challenges.active;return 120*1.5**(s===null?e.verses[0].true:e.verses[0].other[s===0&&!e.challenges.super?0:s+1])},re=(t,s,a)=>{let o=s,i=new T(a);if(s===1){if(!e.inflation.vacuum&&t<5&&(t+=2),i.multiply(R[`S1Build${t+1}`]()),t===5&&e.upgrades[1][8]!==1)return;e.inflation.vacuum||(t-=2)}else if(s===5)i.multiply(r.buildingsInfo.producing[5][1]).divide(4**t),o=4,t++;else if(s===6){R.S6Build1(),i.multiply(R.verse0());let u=e.buildings[6][0].current.toNumber(),g=y.darkSoftcap();if(u>g)i.setValue(((g*(g+24*i.toNumber())+8*u*(2*u+g))**.5-g)/4-u);else{let m=u+i.toNumber();m>g&&i.setValue(((g*(g+24*m))**.5-g)/4-u)}}else i.multiply(R[`S${s}Build${t+1}`]()),s===4&&(t=0);if(i.equal(0))return;if(!i.isFinite()){Ie(`Error encountered, couldn't gain ${i} of ${r.buildingsInfo.name[o][t]}`);return}let l=e.buildings[o][t];l.current.plus(i),l.total.plus(i),l.trueTotal.plus(i),s===1?e.inflation.vacuum&&(t===0?(e.buildings[3][0].current.setValue(l.current).multiply(178266192e-41),e.buildings[3][0].total.setValue(l.total).multiply(178266192e-41),ue(0,3)):t===5&&e.buildings[2][0].current.setValue(l.current).divide(602214076e15)):s===2?t===1&&R.S2Levels():s===3&&t===0&&(e.accretion.rank<5&&l.current.moreThan(1e30)&&l.current.setValue(1e30),ue(0,3))},Rs=(t,s)=>{let a=e.strange[t],o=r.strangeInfo.strangeletsInfo[0]*(r.strangeInfo[`strange${t}Gain`]/e.time.stage)*s;if(o!==0){if(!isFinite(o)){Ie(`Error encountered, couldn't gain ${o} of ${r.strangeInfo.name[t]}`);return}a.current+=o,a.total+=o,R[`strange${t}`]()}},W=(t,s,a,o=!1)=>{if(!o&&!pe(t,s,a))return!1;let i=!1,l;if(s===1?(l=new T(e.discharge.energy),e.inflation.vacuum&&(i=(e.challenges.supervoid[3]>=5||e.accretion.rank>=6)&&e.strangeness[1][9]>=1)):s===2?l=e.buildings[2][1].current:s===3?l=e.buildings[3][0].current:s===6?l=a==="researchesExtra"?new T(e.darkness.energy):e.buildings[6][0].current:l=e.buildings[4][0].current,l.isNaN())return Ie(`Error encountered, prevented spending of NaN ${r.stageInfo.costName[s]}`),!1;if(a==="upgrades"){let u=r.upgradesInfo[s];if(e.upgrades[s][t]>=1||l.lessThan(u.cost[t]))return!1;e.upgrades[s][t]++,i||l.minus(u.cost[t]),s===2?t===3?E.S2Upgrade3=y.S2Upgrade3():t===4?E.S2Upgrade4=y.S2Upgrade4():t>=5&&R.S2FreeBuilds():s===4&&t===1&&r.tabs.current==="upgrade"&&j(),!o&&b.SRSettings[0]&&(n("SRMain").textContent=`New upgrade '${u.name[t]}', has been created`)}else if(a==="researches"||a==="researchesExtra"){let u=r[`${a}Info`][s],g=e[a][s],m=u.max[t]-g[t];if(m<=0)return!1;let c=u.cost[t];if(l.lessThan(c))return!1;let d=1;if(m>1&&(o||e.toggles.max[0]!==r.hotkeys.shift)){let p=u.scaling[t];if(typeof c=="number")if(i)d=Math.min(Math.floor((l.toNumber()-c)/p+1),m);else{let h=c-p/2;d=Math.min(Math.floor(((h**2+2*p*l.toNumber())**.5-h)/p),m),d>1&&(c=d*(d*p/2+h))}else d=Math.min(Math.floor(new T(l).multiply(p-1).divide(c).plus(1).log(p).toNumber()),m),d>1&&(c=new T(p).power(d).minus(1).divide(p-1).multiply(c))}if(g[t]+=d,i||l.minus(c),ye(t,s,a),a==="researches")s===1?t===4&&(r.dischargeInfo.base=y.dischargeBase()):s===2?t===0||t===1?R.S2Levels():t===2?e.upgrades[2][3]===1&&(E.S2Upgrade3=y.S2Upgrade3()):t===3?e.upgrades[2][4]===1&&(E.S2Upgrade4=y.S2Upgrade4()):t>=4&&R.S2FreeBuilds():s===4?(t===2||t===3)&&(C(0,4,"researches"),o&&W(0,4,"researches",!0),os("researches",4,0)):s===6&&t===3&&B.trueEnergy();else if(a==="researchesExtra")if(s===1){if(t===2){r.accretionInfo.effective=y.effectiveRank();let p=!1;e.stage.current<4&&(e.stage.current=g[2]>1?2:3,e.toggles.normal[0]&&(e.stage.active<4?(Q(e.stage.current),p=!0):r.trueActive<4&&(r.trueActive=e.stage.current))),J(p),ne(1)}}else s===2?t===1&&R.S2Levels():s===4?(t===2||t===3)&&C(1,4,"researches",!0):s===6&&(t===0?C(0,6,"researches",!0):t===1&&C(1,6,"researches",!0));!o&&b.SRSettings[0]&&(n("SRMain").textContent=`Level increased ${g[t]>=u.max[t]?"and maxed at":"to"} ${f(g[t])} for the '${u.name[t]}' ${a==="researches"?"Stage":k.researchExtraDivHTML[e.stage.active]} Research`)}else if(a==="researchesAuto"||a==="ASR"){a==="ASR"&&(t=s);let u=r[`${a}Info`],g=e[a],m=g[t];if(m>=u.max[t])return!1;a==="researchesAuto"&&(t===1?e.strangeness[4][6]>=1&&m--:t===2&&(e.strangeness[1][4]>=1&&m--,e.strangeness[2][4]>=1&&m--,e.strangeness[3][4]>=1&&m--,e.strangeness[4][4]>=1&&m--,e.inflation.vacuum&&m++));let c=u.costRange[t][Math.max(m,0)];if(l.lessThan(c))return!1;if(g[t]++,i||l.minus(c),a==="researchesAuto")if(t===1)for(let d=1;d<r.elementsInfo.maxActive&&(d=e.elements.indexOf(.5,d),!(d<1));d++)W(d,4,"elements",!0);else t===2&&e.inflation.vacuum&&(g[2]===1&&e.strangeness[3][4]>=1&&(g[2]=2),g[2]===2&&e.strangeness[2][4]>=1&&(g[2]=3),g[2]===3&&e.strangeness[4][4]>=1&&(g[2]=4));!o&&b.SRSettings[0]&&(n("SRMain").textContent=`Level increased ${g[t]>=u.max[t]?"and maxed at":"to"} ${f(g[t])} for the '${a==="ASR"?u.name:u.name[t]}' automatization Research`)}else if(a==="elements"){let u=e.elements[t];if(u>=1)return!1;if(u===0){if(l.lessThan(r.elementsInfo.cost[t]))return!1;l.minus(r.elementsInfo.cost[t])}else if(!o)return!1;if(u=e.researchesAuto[1]>=1||u>0?1:.5,e.elements[t]=u,e.collapse.show<t&&(e.collapse.show=t),u===1)if(e.collapse.maxElement<t&&(e.collapse.maxElement=t),[7,16,20,25,28,31,34].includes(t))C(1,4,"researches",!0);else if(t===9||t===17)C(0,4,"researches",!0);else if(t===11)C(2,4,"researches",!0);else if(t===26){e.stage.current=5,e.stage.true<5&&(e.stage.true=5,e.event=!1,fe());let g=!1;e.toggles.normal[0]&&(e.strangeness[5][3]>=1||!e.inflation.vacuum)&&(e.stage.active===4?(Q(5),g=!0):r.trueActive===4&&(r.trueActive=5)),J(g),R.strange0(),ne(4)}else t===35&&C(5,4,"researches",!0);!o&&b.SRSettings[0]&&(n("SRMain").textContent=`New Element '${r.elementsInfo.name[t]}' ${e.elements[t]>=1?"obtained":"awaiting activation"}`)}if(!i)if(s===1)e.discharge.energy=Math.round(l.toNumber());else if(s===2){let u=e.buildings[2][1],g=u.true;e.buildings[2][2].true<1&&l.lessThan(g)&&(u.true=Math.floor(l.toNumber()),e.inflation.vacuum?rs(u.true-g,1,2):l.lessOrEqual(0)&&e.buildings[2][0].current.max(.0027753108348135))}else s===3?e.inflation.vacuum&&e.buildings[1][0].current.setValue(l).divide(178266192e-41):s===6&&a==="researchesExtra"&&(e.darkness.energy=Math.round(l.toNumber()));return o||P(),!0},yt=(t,s,a,o=!1)=>{if(!o&&!pe(t,s,a))return!1;if(a==="strangeness"){let i=r.strangenessInfo[s],l=e.strangeness[s],u=e.strange[0];if(l[t]>=i.max[t]||u.current<i.cost[t])return!1;if(l[t]++,u.current-=i.cost[t],ye(t,s,"strangeness"),s===1)if(t===4)if(e.inflation.vacuum){let g=e.strangeness[3][4]<1?1:e.strangeness[2][4]<1?2:e.strangeness[4][4]<1?3:4;e.clone.depth==="stage"&&e.clone.researchesAuto[2]===0&&(e.clone.researchesAuto[2]=g),e.researchesAuto[2]<1&&(e.researchesAuto[2]=g)}else e.stage.current===1&&e.researchesAuto[2]<1&&(e.researchesAuto[2]=1);else t===5?(e.clone.depth==="stage"&&(e.clone.ASR[1]=r.ASRInfo.max[1]),e.ASR[1]=r.ASRInfo.max[1]):t===6?e.verses[0].current>=12&&R.strange0():t===7&&B.trueEnergy();else if(s===2)if(t===2)C(4,2,"researches",!0),C(5,2,"researches",!0);else if(t===4)if(e.inflation.vacuum){let g=e.strangeness[4][4]<1?3:4;e.clone.depth==="stage"&&e.clone.researchesAuto[2]===2&&(e.clone.researchesAuto[2]=g),e.researchesAuto[2]===2&&(e.researchesAuto[2]=g)}else e.stage.current===2&&e.researchesAuto[2]<1&&(e.researchesAuto[2]=1);else t===5?(e.clone.depth==="stage"&&(e.clone.ASR[2]=r.ASRInfo.max[2]),e.ASR[2]=r.ASRInfo.max[2]):t===8&&(C(2,2,"researches",!0),C(3,2,"researches",!0));else if(s===3)if(t===2)C(0,3,"researchesExtra",!0),C(1,3,"researchesExtra",!0);else if(t===4)if(e.inflation.vacuum){let g=e.strangeness[2][4]<1?2:e.strangeness[4][4]<1?3:4;e.clone.depth==="stage"&&e.clone.researchesAuto[2]===1&&(e.clone.researchesAuto[2]=g),e.researchesAuto[2]===1&&(e.researchesAuto[2]=g)}else e.stage.current===3&&e.researchesAuto[2]<1&&(e.researchesAuto[2]=1);else t===5?(e.clone.depth==="stage"&&(e.clone.ASR[3]=r.ASRInfo.max[3]),e.ASR[3]=r.ASRInfo.max[3]):t===6?(e.clone.depth==="stage"&&(e.clone.researchesAuto[0]=Math.max(l[6],e.clone.researchesAuto[0])),e.researchesAuto[0]=Math.max(l[6],e.researchesAuto[0])):t===9&&(r.debug.rankUpdated=null,B.rankInformation());else if(s===4)if(t===4)e.inflation.vacuum?(e.clone.depth==="stage"&&e.clone.researchesAuto[2]===3&&(e.clone.researchesAuto[2]=4),e.researchesAuto[2]===3&&(e.researchesAuto[2]=4)):e.stage.current===4&&e.researchesAuto[2]<1&&(e.researchesAuto[2]=1);else if(t===5)e.clone.depth==="stage"&&(e.clone.ASR[4]=r.ASRInfo.max[4]),e.ASR[4]=r.ASRInfo.max[4];else if(t===6){e.clone.depth==="stage"&&(e.clone.researchesAuto[1]=Math.max(l[6],e.clone.researchesAuto[1])),e.researchesAuto[1]=Math.max(l[6],e.researchesAuto[1]);for(let g=1;g<r.elementsInfo.maxActive&&(g=e.elements.indexOf(.5,g),!(g<1));g++)W(g,4,"elements",!0)}else t===7?e.verses[0].current>=12&&R.strange0():t===8&&(e.clone.depth==="stage"&&(e.clone.elements[0]=1),e.elements[0]<1&&(e.elements[0]=1));else if(s===5)if(t===3)e.inflation.vacuum&&(J(!1),e.elements[26]>=1&&ne(4));else if(t===4)l[5]>=1&&(e.clone.depth==="stage"&&(e.clone.ASR[5]=r.ASRInfo.max[5]),e.ASR[5]=r.ASRInfo.max[5]);else if(t===5){let g=l[4]>=1?r.ASRInfo.max[5]:2;e.clone.depth==="stage"&&(e.clone.ASR[5]=g),e.ASR[5]=g}else t===10&&B.trueEnergy();else s===6&&(t===2?(C(1,2,"strangeness",!0),C(7,2,"strangeness",!0),C(0,4,"strangeness",!0),C(1,4,"strangeness",!0),C(4,4,"strangeness",!0),C(0,5,"strangeness",!0),C(1,5,"strangeness",!0)):t===3&&(e.ASR[6]<1&&l[3]>=2&&(e.ASR[6]=1,e.clone.depth==="stage"&&(e.clone.ASR[6]=1)),C(0,6,"ASR",!0)));e.verses[0].current<12&&R.strange0(),!o&&b.SRSettings[0]&&(n("SRMain").textContent=`Level increased ${l[t]>=i.max[t]?"and maxed at":"to"} ${f(l[t])} for the '${i.name[t]}' ${r.stageInfo.word[s]} Strangeness`)}else if(a==="inflations"){let i=r.treeInfo[s],l=e.tree[s],u=e.cosmon[s];if(l[t]>=i.max[t]||u.current<i.cost[t])return!1;if(l[t]++,u.current-=i.cost[t],ye(t,s,"inflations"),!o&&s===0&&r.loadouts.open&&(r.loadouts.input.push(t),_e(r.loadouts.input)),s===0){if(t===0){for(let g=0;g<r.challengesInfo.length;g++)be(g);for(let g=1;g<w.milestones.length;g++)for(let m=0;m<w.milestones[g].length;m++)ve(m,g)}else if(t===4){if(e.challenges.active===1)for(let g=0;g<r.challengesInfo.length;g++)be(g)}else if(t===5)for(let g=0;g<r.challengesInfo.length;g++)be(g)}else s===1&&(t===3?C(2,0,"inflations",!0):t===5?C(0,2,"researchesExtra",!0):t===6?C(0,4,"researches",!0):t===7&&(C(10,5,"strangeness",!0),ve(1,4)));b.SRSettings[0]&&(n("SRMain").textContent=`Level increased ${l[t]>=i.max[t]?"and maxed at":"to"} ${f(l[t])} for the '${i.name[t]}' Inflation`)}return o||P(),!0},He=(t,s,a)=>{let o=e.toggles.max[a==="strangeness"?1:2]!==r.hotkeys.shift;for(;yt(t,s,a)&&o;);},Gt=async(t=!1,s=!1)=>{let a=e.cosmon[0];if(a.current===a.total&&e.tree[0][0]<1)return!0;let o=e.challenges.active;if(!t&&!await X(`This will force a Stage reset${o!==null?" and restart current Challenge":""} to refund Inflations${s?" and load this loadout":""}, continue?
(Holding shift will automatically accept this)`))return!1;o!==null&&Xe(),is(),o!==null&&Xe(o),a.current=a.total;for(let i=0;i<w.tree[0].length;i++)e.tree[0][i]=0,ye(i,0,"inflations");for(let i=0;i<r.challengesInfo.length;i++)be(i);for(let i=1;i<w.milestones.length;i++)for(let l=0;l<w.milestones[i].length;l++)ve(l,i);return s||(P(),_e([]),b.SRSettings[0]&&(n("SRMain").textContent="Inflations have been refunded")),!0},ye=(t,s,a)=>{if(a==="researches"||a==="researchesExtra"){let o=r[`${a}Info`][s];typeof o.cost[t]=="number"?o.cost[t]=o.firstCost[t]+o.scaling[t]*e[a][s][t]:o.cost[t].setValue(o.scaling[t]).power(e[a][s][t]).multiply(o.firstCost[t])}else if(a==="strangeness"){let o=r.strangenessInfo[s];o.cost[t]=e.inflation.vacuum?Math.floor(Math.round(o.firstCost[t]*o.scaling[t]**e.strangeness[s][t]*100)/100):Math.floor(Math.round((o.firstCost[t]+o.scaling[t]*e.strangeness[s][t])*100)/100)}else a==="inflations"&&(r.treeInfo[s].cost[t]=et(t,s))},et=(t,s,a=e.tree[s][t])=>{let o=r.treeInfo[s].scaling[t];if(s===1){if(t===0||t===1)o+=Math.floor(a/4)/4;else if(t===2)return Math.floor(Math.round(r.treeInfo[s].firstCost[t]*o**a*100)/100)}return Math.floor(Math.round((r.treeInfo[s].firstCost[t]+o*a)*100)/100)},C=(t,s,a,o=!1)=>{let i=null;if(a==="researches")if(s===2)t===2?i=e.strangeness[2][8]>=1?7:4:t===3?i=e.strangeness[2][8]>=2?5:4:t===4?i=e.strangeness[2][2]>=1?3:2:t===5&&(i=e.strangeness[2][2]>=2?2:1);else if(s===4)t===0?(i=(e.elements[9]>=1?15:3)+3*e.researches[4][2]+3*e.researches[4][3],e.elements[17]>=1&&(i+=24),e.inflation.vacuum&&e.tree[1][6]>=2&&(i+=Math.floor(r.accretionInfo.effective))):t===1?(i=(e.elements[7]>=1?4:2)+e.researchesExtra[4][2]+e.researchesExtra[4][3],e.elements[16]>=1&&i++,e.elements[20]>=1&&i++,e.elements[25]>=1&&i++,e.elements[28]>=1&&i++,e.elements[31]>=1&&i++,e.elements[34]>=1&&i++):t===2?i=e.elements[11]>=1?2:1:t===5&&(i=e.elements[35]>=1?2:1);else if(s===5)if(t===0||t===1)i=e.inflation.vacuum?4:3;else if(t===2||t===3){let l=Y();i=l>=60?8:l>=5?4:l>=4?2:1}else t===4&&(i=Y()>=70?6:1);else s===6&&(t===0?i=20+e.researchesExtra[6][0]:t===1&&(i=8+2*e.researchesExtra[6][1]));else if(a==="researchesExtra"){if(s===2)t===0&&(i=e.inflation.vacuum&&e.tree[1][5]>=2?4:1);else if(s===3)t===0?i=(e.strangeness[3][2]>=1?20:14)+Math.floor(2*y.effectiveRank()):t===1?i=e.strangeness[3][2]>=2?8:6:t===4&&(i=Math.min(e.accretion.rank-2,5));else if(s===5)if(t===1)i=Y()>=4?2:1;else if(t===2){let l=Y();i=l>=70?8:l>=60?4:l>=5?2:1}else if(t===3){let l=Y();i=l>=110?4:l>=90?3:l>=5?2:1}else if(t===4){let l=Y();i=l>=100?4:l>=80?3:1}else t===5&&(i=Y()>=100?2:1)}else a==="researchesAuto"?t===2&&(i=e.inflation.vacuum?4:1):a==="ASR"?s===1?i=e.inflation.vacuum?5:3:s===2?i=e.inflation.vacuum?6:5:s===3?i=e.inflation.vacuum?5:4:s===4?i=e.inflation.vacuum?5:4:s===6&&(i=e.strangeness[6][3]>=1?1:0):a==="strangeness"?s===1?t===0?(i=6,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===3?(i=2,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===4?i=e.inflation.vacuum&&e.challenges.void[4]>=1?2:1:t===6&&(i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1):s===2?t===1?(i=e.strangeness[6][2]>=2?14:8,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===3?(i=2,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===4?i=e.inflation.vacuum&&e.challenges.void[4]>=1?2:1:t===6?i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1:t===7&&(i=e.strangeness[6][2]>=4?9:6):s===3?t===0?(i=8,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===1?(i=4,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===4?i=e.inflation.vacuum&&e.challenges.void[4]>=1?2:1:t===7?i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1:t===9&&(i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1):s===4?t===0?(i=e.strangeness[6][2]>=5?12:8,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===1?(i=e.strangeness[6][2]>=3?8:4,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===3?i=e.inflation.vacuum&&e.challenges.supervoid[4]>=3?4:2:t===4?(i=e.inflation.vacuum&&e.challenges.void[4]>=1?2:1,e.strangeness[6][2]>=1&&i++):t===6?i=e.inflation.vacuum||e.milestones[4][0]>=8||e.verses[0].current>=3?2:1:t===7&&(i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1):s===5&&(t===0||t===1?i=e.strangeness[6][2]>=6?9:8:t===2?(i=2,e.inflation.vacuum&&(i+=Math.min(e.challenges.void[3],4))):t===6?i=!e.inflation.vacuum&&(e.milestones[5][0]>=8||e.verses[0].current>=8)?2:1:t===7?i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1:t===8?i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1:t===9?i=e.inflation.vacuum&&e.challenges.void[5]>=3?2:1:t===10&&(i=e.tree[1][7]>=2?4:3)):a==="inflations"&&s===0&&t===2&&(i=8+e.tree[1][3]);i!==null&&(i<0&&(i=0),a==="inflations"?r.treeInfo[s].max[t]=i:a==="researchesAuto"||a==="ASR"?r[`${a}Info`].max[a==="ASR"?s:t]=i:r[`${a}Info`][s].max[t]=i),a!=="researchesAuto"&&a!=="ASR"&&ye(t,s,a),o&&(a==="researches"||a==="researchesExtra")&&os(a,s,t)},Ve=t=>{let s=r.automatization.autoU[t];if(s[0]===-1||e.researchesAuto[0]<1||!e.toggles.auto[5])return;let a=e.upgrades[t];if(s.length===0){for(let i=0;i<r.upgradesInfo[t].maxActive;i++)a[i]<1&&s.push(i);let o=r.upgradesInfo[t].cost;s.sort(typeof o[0]=="number"?(i,l)=>o[i]-o[l]:(i,l)=>Vt(o[i],o[l]))}for(let o=0;o<s.length;o++){let i=s[o];if(pe(i,t,"upgrades"))if(W(i,t,"upgrades",!0),a[i]!==0)s.splice(o,1),o--;else break}s.length===0&&(s[0]=-1)},os=(t,s,a)=>{let o=r.automatization[t==="researches"?"autoR":"autoE"][s];if(o.length===0||o.includes(a))return;let i=r[`${t}Info`][s];if(e[t][s][a]>=i.max[a])return;if(o[0]===-1){o[0]=a;return}let l=i.cost[a];for(let u=0;u<o.length;u++)if(typeof l=="number"?l<i.cost[o[u]]:l.lessThan(i.cost[o[u]])){o.splice(u,0,a);return}o.push(a)},ce=(t,s)=>{let a=r.automatization[t==="researches"?"autoR":"autoE"][s];if(a[0]===-1||e.researchesAuto[0]<(t==="researches"?2:3)||!e.toggles.auto[t==="researches"?6:7])return;let o=r[`${t}Info`][s],i=o.cost,l=e[t][s];if(a.length===0){for(let u=0;u<o.maxActive;u++)l[u]<o.max[u]&&a.push(u);a.sort(typeof i[0]=="number"?(u,g)=>i[u]-i[g]:(u,g)=>Vt(i[u],i[g]))}for(let u=0;u<a.length;u++){let g=a[u];if(!pe(g,s,t))continue;let m=W(g,s,t,!0);if(l[g]>=o.max[g])a.splice(u,1),u--;else if(m){let c=u,d=i[g];if(typeof d=="number")for(;d>i[a[u+1]];)u++;else for(;d.moreThan(i[a[u+1]]);)u++;if(c===u)break;a.splice(u,0,a.splice(c,1)[0]),u=c-1}else break}a.length===0&&(a[0]=-1)},As=()=>{let t=r.automatization.autoEl;if(t[0]===-1||e.researchesAuto[1]<2)return;let s=e.elements;if(t.length===0)for(let a=1;a<r.elementsInfo.maxActive;a++)s[a]<1&&t.push(a);for(let a=0;a<t.length;a++){let o=t[a];if(!pe(o,4,"elements"))break;if(W(o,4,"elements",!0),s[o]>0)t.splice(a,1),a--;else break}t.length===0&&(t[0]=-1)},Ls=()=>{let t=r.automatization.autoS;if(t.length!==0&&t[0][0]===-1)return;let s=r.strangenessInfo,a=e.strangeness;if(t.length===0){for(let o=1;o<s.length;o++)for(let i=0;i<s[o].maxActive;i++)a[o][i]<s[o].max[i]&&t.push([i,o]);t.sort((o,i)=>s[o[1]].cost[o[0]]-s[i[1]].cost[i[0]])}for(let o=0;o<t.length;o++){let i=t[o][0],l=t[o][1];if(!pe(i,l,"strangeness"))continue;let u=yt(i,l,"strangeness",!0);if(a[l][i]>=s[l].max[i])t.splice(o,1),o--;else if(u){let g=o,m=s[l].cost[i];for(;m>s[t[o+1][1]].cost[t[o+1][0]];)o++;if(g===o){o--;continue}for(;;){let c=t[o+1];if(l<c[1]||i<c[0]||m!==s[c[1]].cost[c[0]])break;o++}t.splice(o,0,t.splice(g,1)[0]),o=g-1}else break}t.length===0&&(t[0]=[-1,0])},as=()=>r.inflationInfo.trueUniverses>=1||e.darkness.energy>=1e3,Oe=async()=>{if(!(!as()||e.stage.true<8&&(e.stage.true!==7||!e.event))){if(e.toggles.confirm[6]!=="None"){let t=[];if(e.clone.inflation?.vacuum??e.inflation.vacuum?Ze(0)<=y.mergeScore()&&t.push(`can create an Universe${e.challenges.active!==null?" outside of any Challenge":""}`):t.push(`current Vacuum state ${e.challenges.active!==null?" outside of any Challenge":""} is false`),e.darkness.energy<1e3&&e.strangeness[6][3]>=1&&t.push("not enough Dark energy for Big Rip"),e.toggles.confirm[6]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented End reset because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!as())return U("End reset canceled, requirements are no longer met")}}Ns(),P(),b.SRSettings[0]&&(n("SRMain").textContent="Caused End reset")}},Ns=()=>{e.stage.active<6&&Q(1);let t=y.cosmonGain();e.cosmon[1].current+=t,e.cosmon[1].total+=t;let s=e.history.end,a=r.historyStorage.end,o=e.darkness.energy>=1e3?1:0;a.unshift([e.time.end,t,o,e.inflation.peak[0],e.inflation.peak[1]]),a.length>100&&(a.length=100),t/e.time.end>s.best[1]/s.best[0]&&(s.best=I(a[0])),o===1?(e.inflation.ends[1]++,r.inflationInfo.trueUniverses<e.verses[0].lowest&&(e.verses[0].lowest=r.inflationInfo.trueUniverses),e.stage.true<9&&(e.stage.true=9,e.event=!1,fe())):(e.inflation.ends[0]++,r.inflationInfo.trueUniverses>e.verses[0].highest&&(e.verses[0].highest=r.inflationInfo.trueUniverses)),e.time.export[1]=0,e.time.export[2]=0,e.time.export[3]<t/5&&(e.time.export[3]=t/5);let i=!1;i!==e.inflation.vacuum&&(e.inflation.vacuum=i,xe(i)),e.challenges.active!==null&&(e.challenges.active=null,e.clone={},Fe()),Ge(2)},ee=(t,s=null)=>{if(t===5){if(s!==null){if(e.elements[26]<.5)return!1;B.quarksGain();let a=e.stage,o=r.strangeInfo.strange0Gain/e.time.stage;if(a.peak[0]<o&&(a.peak[0]=o,a.peak[1]=e.time.stage),e.elements[26]<1||(Rs(0,s),!e.toggles.auto[0]||e.strangeness[5][6]<(e.inflation.vacuum?1:2)||e.challenges.active!==null||e.inflation.vacuum&&e.toggles.normal[2]&&e.toggles.auto[9]&&e.strangeness[5][9]>=1&&e.merge.resets<y.mergeMaxResets()))return!1;let i=wt();return a.input[i]<=0||a.input[i]>(i===3?e.time.stage-a.peak[1]:i===2?e.time.stage:r.strangeInfo.strange0Gain)?!1:(Se(t),!0)}return B.quarksGain(),e.elements[26]>=1&&(e.challenges.active!==0||!e.challenges.super)}else if(e.inflation.vacuum)return!1;if(t===3){if(e.buildings[3][0].current.lessThan(245576045e23))return!1}else if(t===2){if(e.buildings[2][1].current.lessThan(119444e24))return!1}else if(t===1){if(e.buildings[1][3].current.lessThan(167133125e13))return!1}else return!1;if(s!==null){if(e.strangeness[5][6]<1)return!1;if(e.toggles.normal[2]){let a=r.milestonesInfo[t],o=e.tree[0][4]>=1;for(let i=0;i<a.scaling.length;i++)if(e.milestones[t][i]<a.scaling[i].length&&(o||a.reward[i]>=e.time.stage))return!1}Se(t)}return!0},ze=async()=>{let t=e.inflation.vacuum||e.stage.active===4&&(e.stage.true>=7||e.event)?5:e.stage.active;if(ee(t)){if(e.toggles.confirm[0]!=="None"){let s=[];if(t===5){if(e.inflation.vacuum?(Ze(0)<=y.mergeScore()&&s.push("can create an Universe"),e.merge.resets<y.mergeMaxResets()&&s.push("still capable to do more Merge resets")):e.upgrades[5][3]===1&&e.buildings[5][3].true>=22&&s.push("can Collapse Vacuum into its true state"),e.researchesExtra[5][0]>=1){let a=Ue(3,5).toNumber();a<=Math.max(e.collapse.mass,r.collapseInfo.newMass)&&s.push(`can afford a Galaxy${a>e.collapse.mass?" after Collapse":""}`)}e.challenges.active===0&&s.push("currently inside the Void")}if(e.toggles.confirm[0]==="All"&&s.length===0&&s.push("confirmation is enabled"),s.length!==0){if(!await X(`Prevented ${e.inflation.vacuum?"":`${r.stageInfo.word[t===5?4:t]} `}Stage reset because ${s.join(`,
Also `)}
Reset anyway?`))return;if(!ee(t))return U("Stage reset canceled, requirements are no longer met")}}Se(t),b.SRSettings[0]&&(n("SRMain").textContent="Caused Stage reset")}},Se=t=>{let s=e.stage,a=!0,o=!0,i=e.inflation.vacuum?[1,2,3,4,5]:[t];if(e.inflation.vacuum)s.active===1||s.active>=6?o=!1:Q(1),s.current=1,s.true>=7?i.push(6):s.resets<1&&te(7);else if(t===s.current){if(t<4){let l=s.current===s.active;s.current++,s.current===2&&e.milestones[2][1]>=7&&s.current++,s.current===3&&e.milestones[3][1]>=7&&s.current++,l?Q(s.current):o=!1,s.current>s.true&&(s.true=s.current,e.event=!1,fe())}else s.current=e.milestones[1][1]<6?1:e.milestones[2][1]<7?2:e.milestones[3][1]<7?3:4,s.active===4&&s.current!==4||s.active===5?Q(s.current):o=!1,i.unshift(4);r.milestonesInfo[s.current].recent=I(w.milestones[s.current]),s.current===4&&(r.milestonesInfo[5].recent=I(w.milestones[5])),s.true>=7&&i.push(6)}else r.milestonesInfo[t].recent=I(w.milestones[t]),o=t===s.active?!1:null,a=!1;if(s.true>=5){let l=e.time.export,u=(1+e.tree[0][5])*e.tree[0][5]/50,g=t>=4?r.strangeInfo.strange0Gain:y.strangeGain(!1),m=t>=4?r.strangeInfo.strange1Gain:0;if(e.strange[0].current+=g,e.strange[0].total+=g,m>0&&(e.strange[1].current+=m,e.strange[1].total+=m,R.strange1(),l[2]=Math.max(l[2],m)+m*u),R.strange0(t>=4?!1:void 0),l[1]=Math.max(l[1],g)+g*u,t>=4){let c=e.history.stage,d=r.historyStorage.stage;d.unshift([e.time.stage,g,m,s.peak[0],s.peak[1]]),d.length>100&&(d.length=100),g/e.time.stage>c.best[1]/c.best[0]&&(c.best=I(d[0]))}}s.resets++,Pe(i,o,a)},is=(t=!1)=>{let s=e.inflation.vacuum,a=s?5:e.stage.current;if(s||(a!==1&&e.milestones[1][1]>=6&&(!t&&ee(1)?Se(1):Pe([1],!1,!1)),a!==2&&e.milestones[2][1]>=7&&(!t&&ee(2)?Se(2):Pe([2],!1,!1)),a!==3&&e.milestones[3][1]>=7&&(!t&&ee(3)?Se(3):Pe([3],!1,!1))),!t&&ee(a))Se(a);else{let o=s?[1,2,3,4,5]:[a];e.stage.true>=7&&o.push(6);let i=!1;s&&(e.stage.active!==1&&e.stage.active<6&&(Q(1),i=!0),e.stage.current=1),Pe(o,i)}},tt=(t,s=t)=>{if(!r.stageInfo.activeAll.includes(t)||e.stage.active===t){e.stage.active===t&&r.trueActive!==t&&(r.trueActive=t,n(`stageSwitch${t}`).style.textDecoration="underline"),q(),P();return}Q(t,s),J()},Q=(t,s=t)=>{if(r.offline.active||(n(`stageSwitch${e.stage.active}`).style.textDecoration=""),e.stage.active=t,r.trueActive=s,r.offline.active){r.offline.stage[0]=t;return}n(`stageSwitch${t}`).style.textDecoration="underline"+(r.trueActive!==t?" dashed":""),r.tabs.current==="Elements"?t!==4&&t!==5&&j("upgrade"):r.tabs.current==="upgrade"&&r.tabs.upgrade.current==="Elements"&&t!==4&&t!==5&&j("upgrade","Upgrades")},At=(t=!1)=>{if(e.upgrades[1][5]!==1)return!1;let s=r.dischargeInfo,a=e.discharge.energy,o=e.strangeness[1][4];if(s.scaling=y.dischargeScaling(),s.next=y.dischargeCost(),t){if(o>=2){if(s.energyTrue>=s.next){let i=Math.floor(ge(s.energyTrue/s.next,s.scaling))+1;e.discharge.current+=i,s.total=y.effectiveGoals(),ne(1)}}else if(o<1&&(e.researchesAuto[2]<1||!e.inflation.vacuum&&e.stage.current!==1))return!1;return!e.toggles.auto[1]||a>=s.energyTrue&&(o>=2||a<s.next)?!1:(ls(),!0)}return a<s.energyTrue||o<2&&a>=s.next},vt=async()=>{if(At()){if(e.toggles.confirm[1]!=="None"){let t=[];if(e.stage.active!==1&&t.push("current active Stage isn't Microworld"),e.toggles.confirm[1]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented Discharge because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!At())return U("Discharge canceled, requirements are no longer met")}}ls(),P(),b.SRSettings[0]&&(n("SRMain").textContent="Caused Discharge reset")}},ls=()=>{e.strangeness[1][4]<2&&e.discharge.energy>=r.dischargeInfo.next&&e.discharge.energy>=r.dischargeInfo.energyTrue&&(e.discharge.energy-=Math.ceil(r.dischargeInfo.next),e.discharge.current++),ne(1),Ce("discharge",e.challenges.active===0?[1,2,3,4,5]:[1])},Lt=(t=null)=>{if(e.upgrades[2][2]!==1||B.newClouds()<=0)return!1;if(t!==null){let s=e.strangeness[2][4];if(s>=2||e.inflation.vacuum&&e.researchesExtra[2][0]>=1&&e.tree[1][5]>=1){if(Nt(t),e.toggles.normal[1]||!e.toggles.auto[2])return!1;B.newClouds()}else if(!e.toggles.auto[2])return!1;if(s<1&&(e.inflation.vacuum?e.researchesAuto[2]<3:e.researchesAuto[2]<1||e.stage.current!==2))return!1;let a=e.vaporization;if(e.inflation.vacuum&&a.input[1]>0&&a.clouds>=a.input[1])return!1;let o=y.S2Extra1(e.researchesExtra[2][1]),i=y.S2Extra1(e.researchesExtra[2][1],!0);if(y.clouds(!0)/y.clouds()*(i/o)*(y.S2Extra2(i)/y.S2Extra2(o))<a.input[0])return!1;Nt()}return!0},bt=async()=>{if(Lt()){if(e.toggles.confirm[2]!=="None"){let t=[];(e.strangeness[2][4]>=2||e.inflation.vacuum&&e.researchesExtra[2][0]>=1&&e.tree[1][5]>=1)&&t.push("already gaining Clouds without needing to reset");let s=y.S2Extra1(e.researchesExtra[2][1]),a=y.S2Extra1(e.researchesExtra[2][1],!0);if(y.clouds(!0)/y.clouds()*(a/s)*(y.S2Extra2(a)/y.S2Extra2(s))<2&&t.push("boost from doing it is below 2x"),e.stage.active!==2&&t.push("current active Stage isn't Submerged"),e.toggles.confirm[2]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented Vaporization because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!Lt())return U("Vaporization canceled, requirements are no longer met")}}Nt(),P(),b.SRSettings[0]&&(n("SRMain").textContent="Caused Vaporization reset")}},Nt=(t=null)=>{let s=e.vaporization;if(t!==null){let a=e.researchesExtra[2][0];a>=1&&e.tree[1][5]>=1?(t/=20/(a+a**2),e.strangeness[2][4]<2&&(t/=4)):t/=40,s.clouds+=r.vaporizationInfo.get*t}else s.clouds+=r.vaporizationInfo.get,Ce("vaporization",e.challenges.active===0?[1,2,3,4,5]:e.inflation.vacuum?[1,2]:[2]);ne(2)},Ut=(t=!1)=>{if(e.accretion.rank>=r.accretionInfo.maxRank||e.buildings[3][0][e.strangeness[3][4]>=2?"total":"current"].lessThan(r.accretionInfo.nextRank))return!1;let s=e.strangeness[3][4]>=2&&e.challenges.supervoid[3]>=2;return t?s?(Ht(!0),!0):!e.toggles.auto[3]||e.strangeness[3][4]<1&&(e.inflation.vacuum?e.researchesAuto[2]<2:e.researchesAuto[2]<1||e.stage.current!==3)?!1:(Ht(),!0):!s},St=async()=>{if(Ut()){if(e.toggles.confirm[3]!=="None"&&e.accretion.rank!==0){let t=[];if(e.inflation.vacuum&&(e.researchesExtra[2][1]<=0||e.vaporization.clouds<=0)&&e.accretion.rank>=4&&t.push(`current ${e.researchesExtra[2][1]<=0?"level for Clouds Research 'Rain Clouds'":"Cloud amount"} is 0, which could make next Rank slow`),e.stage.active!==3&&t.push("current active Stage isn't Accretion"),e.toggles.confirm[3]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented Rank increase because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!Ut())return U("Rank increase canceled, requirements are no longer met")}}Ht(),P(),b.SRSettings[0]&&(n("SRMain").textContent=`Increased Rank to '${r.accretionInfo.rankName[e.accretion.rank]}'`)}},Ht=(t=!1)=>{if(e.accretion.rank++,e.accretion.rank===6){e.stage.current=4;let s=!1;e.toggles.normal[0]&&(e.stage.active<4?(Q(4),s=!0):r.trueActive<4&&(r.trueActive=4)),J(s)}ne(3),B.rankInformation(),t?(r.accretionInfo.effective=y.effectiveRank(),r.dischargeInfo.total=y.effectiveGoals()):Ce("rank",e.challenges.active===0?[1,2,3,4,5]:e.inflation.vacuum?[1,2,3]:[3]),C(0,3,"researchesExtra",!0),C(4,3,"researchesExtra",!0),C(0,4,"researches",!0),e.stage.active===3&&q()},Bt=(t=!1)=>{if(B.newMass(),e.upgrades[4][0]!==1)return!1;B.newStars();let s=r.collapseInfo,a=e.collapse,o=e.strangeness[4][4];if(t){if(o>=2){if((s.starCheck[0]>0||s.starCheck[1]>0||s.starCheck[2]>0)&&(a.stars[0]+=s.starCheck[0],a.stars[1]+=s.starCheck[1],a.stars[2]+=s.starCheck[2],E.star[0]=y.star[0](),E.star[1]=y.star[1](),E.star[2]=y.star[2](),B.newStars(!0),B.newMass(),ne(4)),o>=3)return s.newMass>a.mass&&(a.mass=s.newMass,a.massMax<a.mass&&(a.massMax=a.mass),ne(4)),!1}else if(o<1&&(e.inflation.vacuum?e.researchesAuto[2]<4:e.researchesAuto[2]<1||e.stage.current<4))return!1;if(!e.toggles.auto[4])return!1;if(e.strangeness[5][4]>=1&&e.toggles.buildings[5][3]&&e.researchesExtra[5][0]>=1){let m=s.newMass;if(o<2&&e.verses[0].current>=2&&(m*=y.star[2](!0)/E.star[2]),Ue(3,5).toNumber()<=m)return Je(),!0}let i=B.timeUntil();if(i>0&&i<a.input[1])return!1;for(;s.pointsLoop<a.points.length;){let m=a.points[s.pointsLoop];if(m>s.newMass||m>40&&e.strangeness[5][4]<1)break;if(s.pointsLoop++,m>a.mass)return Je(),!0}let l=y.mass(!0)/y.mass()*(y.S4Research4(!0)/y.S4Research4())*(1+(y.S5Upgrade2(!0)-y.S5Upgrade2())/E.galaxyBase)**(e.buildings[5][3].true*2);if(l>=a.input[0])return Je(),!0;if(o>=2)return!1;let u=r.buildingsInfo.producing[4],g=new T(u[1]).allPlus(u[3],u[4],u[5]);return l*new T(u[2]).multiply(y.star[0](!0)/E.star[0]).plus(g).divide(g.plus(u[2])).toNumber()*(y.star[1](!0)/E.star[1])*(y.star[2](!0)/E.star[2])>=a.input[0]?(Je(),!0):!1}return o<3&&s.newMass>a.mass||o<2&&(s.starCheck[0]>0||s.starCheck[1]>0||s.starCheck[2]>0)||e.elements.includes(.5,1)},st=async()=>{if(Bt()){if(e.toggles.confirm[4]!=="None"){let t=[];if(e.inflation.vacuum){let s=B.timeUntil(),a=e.researchesExtra[5][0]>=1,o=!a||Ue(3,5).toNumber()>r.collapseInfo.newMass;s>0&&s<1e6&&o&&t.push(`${a?"will not be able to afford new Galaxy and ":""}Solar mass isn't hardcapped, but can be hardcapped soon`),(e.researchesExtra[2][1]<=0||e.vaporization.clouds<=0)&&t.push(`current ${e.researchesExtra[2][1]<=0?"level for Clouds Research 'Rain Clouds'":"Cloud amount"} is 0, which could make recovering from Collapse really slow`)}if(e.stage.active!==4&&e.stage.active!==5&&t.push("current active Stage isn't Interstellar"),e.toggles.confirm[4]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented Collapse because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!Bt())return U("Collapse canceled, requirements are no longer met")}}Je(),P(),b.SRSettings[0]&&(n("SRMain").textContent="Caused Collapse reset")}},Je=()=>{let t=r.collapseInfo,s=e.collapse;s.stars[0]+=t.starCheck[0],s.stars[1]+=t.starCheck[1],s.stars[2]+=t.starCheck[2],t.newMass>s.mass&&(s.mass=t.newMass,s.massMax<s.mass&&(s.massMax=s.mass));for(let a=1;a<r.elementsInfo.maxActive&&(a=e.elements.indexOf(.5,a),!(a<1));a++)W(a,4,"elements",!0);Ce("collapse",e.challenges.active===0?[1,2,3,4,5]:e.inflation.vacuum?[1,2,3,4]:e.strangeness[5][3]<1?[4,5]:[4]),C(0,4,"researches"),C(1,4,"researches"),ne(4)},pt=(t=!1)=>{if(e.upgrades[5][3]!==1)return!1;let s=e.buildings[5][3].true;if(!e.inflation.vacuum){if(s<22)return!1;if(t){if(e.strangeness[5][9]<1)return!1;Dt()}return!0}B.mergeReward();let a=e.merge;if(t){let o=r.mergeInfo;if(e.strangeness[5][9]>=2&&(o.checkReward[0]>0||o.checkReward[1]>0)&&(a.claimed[0]+=o.checkReward[0],a.claimed[1]+=o.checkReward[1],a.rewards[0]+=o.checkReward[0],a.rewards[1]+=o.checkReward[1],B.mergeReward(!0),ne(5)),!e.toggles.auto[9]||a.resets>=y.mergeMaxResets()||e.strangeness[5][9]<1||(a.input[1]!==0?a.since<a.input[1]:B.timeUntil()>0)||s<Math.max(a.input[0],1))return!1;Dt()}return s>=1&&a.resets<y.mergeMaxResets()},nt=async()=>{if(pt()){if(e.toggles.confirm[5]!=="None"&&e.inflation.vacuum){let t=[],s=Ue(3,5).toNumber();if(s<=Math.max(e.collapse.mass,r.collapseInfo.newMass)&&t.push(`can afford a Galaxy${s>e.collapse.mass?" after Collapse":""}`),e.stage.active!==5&&e.stage.active!==6&&t.push("current active Stage isn't Intergalactic"),e.toggles.confirm[5]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented Merging because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!pt())return U("Merge canceled, requirements are no longer met")}}Dt(),P(),b.SRSettings[0]&&(n("SRMain").textContent=e.inflation.vacuum?"Merged Galaxies":"Decayed Vacuum")}},Dt=()=>{if(!e.inflation.vacuum){if(Us()||(e.stage.true<6?(e.stage.true=6,e.collapse.show=0,e.event=!1,fe(),te(6)):(e.cosmon[0].current++,e.cosmon[0].total++,e.stage.true<8&&e.challenges.supervoid[1]<1&&e.event&&e.cosmon[0].total>=2&&U("Click the 'Void' button in the 'Advanced' subtab to toggle into Supervoid")),e.stage.active<6&&Q(1),e.inflation.vacuum=!0,e.inflation.resets++,e.time.export[1]=0,e.time.export[2]=0,xe(!0),Ge(),r.inflationInfo.trueUniverses<1))return;let t=y.cosmonGain()/e.time.end;e.inflation.peak[0]<t&&(e.inflation.peak[0]=t,e.inflation.peak[1]=e.time.end);return}e.merge.resets++,e.merge.rewards[0]+=r.mergeInfo.checkReward[0],e.merge.rewards[1]+=r.mergeInfo.checkReward[1],e.buildings[5][3].true=0,e.merge.claimed=[0,0],Ce("galaxy",[1,2,3,4,5]),C(0,4,"researches"),C(1,4,"researches"),C(2,4,"researches"),C(5,4,"researches"),e.stage.current<6&&(e.stage.current=6,J(!1)),ne(5)},Pt=(t=!1)=>{if(e.upgrades[6][0]!==1)return!1;if(B.newFluid(),t){if(e.strangeness[6][3]<4)return!1;if(r.dischargeInfo.energyStage[6]<=e.darkness.energy){let s=y.darkFluid(!0);if(s/E.fluid*(y.effectiveDarkEnergy(s)/y.effectiveDarkEnergy())**(e.researchesExtra[6][3]/40)<e.darkness.input)return!1}return cs(),!0}return r.dischargeInfo.energyStage[6]>e.darkness.energy||r.inflationInfo.newFluid>0},xt=async()=>{if(Pt()){if(e.toggles.confirm[7]!=="None"){let t=[],s=y.darkFluid(!0);if(e.darkness.energy>=r.dischargeInfo.energyStage[6]&&s/E.fluid*(y.effectiveDarkEnergy(s)/y.effectiveDarkEnergy())**(e.researchesExtra[6][3]/40)<1.1&&t.push(`boost from doing it is below ${f(1.1)}x`),e.stage.active!==6&&t.push("current active Stage isn't Abyss"),e.toggles.confirm[7]==="All"&&t.length===0&&t.push("confirmation is enabled"),t.length!==0){if(!await X(`Prevented Nucleation because ${t.join(`,
Also `)}
Reset anyway?`))return;if(!Pt())return U("Nucleation canceled, requirements are no longer met")}}cs(),P(),b.SRSettings[0]&&(n("SRMain").textContent="Caused Nucleation reset")}},cs=()=>{r.inflationInfo.newFluid>0&&(e.darkness.fluid+=r.inflationInfo.newFluid),Ce("collapse",e.challenges.active===0?[1,2,3,4,5,6]:[6])},ve=(t,s)=>{let a=r.milestonesInfo[s],o=e.milestones[s][t];if(e.inflation.vacuum)if(s===1)t===0?(a.need[0].setValue(1e24).power(o).multiply(1e24),a.reward[0]=1.05**o):t===1&&(a.need[1].setValue(24e3+24e3*o),a.reward[1]=1.03**o);else if(s===2)t===0?(a.need[0].setValue(1e3).power(o).multiply(1e3),a.reward[0]=1.08**o):t===1&&(a.need[1].setValue(10).power(o).multiply(10),a.reward[1]=1.12**o);else if(s===3)t===0?(a.need[0].setValue(1e-12*1e4**o),a.reward[0]=1.08**o):t===1&&(a.need[1].setValue(8+8*o),a.reward[1]=o/4);else if(s===4){if(t===0)a.need[0].setValue(1e6).power(o).multiply(1e6),a.reward[0]=1.06**o;else if(t===1){let i=e.tree[1][7]>=1?35:28;a.need[1].setValue(i+i*o),a.reward[1]=1.01**o}}else s===5&&(t===0?(a.need[0].setValue(10).power(o).multiply(10),a.reward[0]=1.04**o):t===1&&(a.need[1].setValue(1+o),a.reward[1]=o/100));else{let i=0;if(e.challenges.active!==1){let l=o/(a.scaling[t].length-1);s===1?i=14400/(l*(t===1?11:3)+1)**l:s===2?i=28800/(l*(t===1?23:7)+1)**l:s===3?i=43200/(l*(t===1?35:11)+1)**l:s===4?i=57600/(l*(t===1?47:15)+1)**l:s===5&&(i=t===0?3600/(l*2+1):1200),e.tree[0][0]===1&&(i/=4)}else e.tree[0][4]>=1&&(i=600);a.reward[t]=i,a.need[t].setValue(a.scaling[t][o])}},ue=(t,s)=>{if(!ds(t,s))return;let a=r.milestonesInfo[s];a.recent[t]++,e.milestones[s][t]++,ve(t,s);let o=!e.inflation.vacuum&&e.milestones[s][t]>=a.scaling[t].length;b.toggles[6]&&U(`Milestone '${a.name[t]}' new tier completed${o?", Maxed":""}`),e.inflation.vacuum?s===3&&t===1&&(r.accretionInfo.effective=y.effectiveRank(),r.dischargeInfo.total=y.effectiveGoals(),C(0,3,"researchesExtra",!0),C(0,4,"researches",!0)):(e.strange[0].current++,e.strange[0].total++,R.strange0(),o&&(s===4||s===5)&&t===0&&C(6,s,"strangeness",!0)),ue(t,s)},qe=(t=!1)=>{let s=r.challengesInfo[0];if(t){if(e.challenges.active===0)return U(`Can't be toggled while inside the '${s.name}'`);e.challenges.super=!e.challenges.super&&e.stage.true>=7}e.challenges.super?(s.name="Supervoid",s.resetType="vacuum",mt(!0)):(s.name="Void",s.resetType="stage",mt(!1)),t&&(be(0),P())},be=t=>{let s=(t===1?7200:e.challenges.super?1200:3600)/(6/(6-e.tree[0][5]));e.tree[0][0]===1&&(s/=4),r.challengesInfo[t].time=s},ne=t=>{let s=e.challenges;if(s.active!==0)return;let a=r.challengesInfo[0],o=1;t===1?o+=e.researchesExtra[1][2]:t===2?(e.vaporization.clouds>1e4&&o++,e.vaporization.clouds>1e12&&(e.challenges.supervoid[3]>=2&&e.strangeness[3][4]>=2||e.accretion.rank===1)&&o++):t===3?o=Math.min(e.accretion.rank-1,6):t===4?(e.collapse.stars[0]>=1&&o++,e.collapse.stars[1]>=1&&o++,e.collapse.stars[2]>=1&&o++,e.elements[26]>=1&&e.strangeness[5][3]>=1&&o++):t===5&&(e.merge.resets>=1&&o++,e.merge.rewards[0]>=1&&o++,e.merge.rewards[1]>=1&&o++);let i=s.void;if(i[t]<o&&e.time.stage<=a.time){i[t]++;let u=o!==i[t];u&&(o=i[t]),s.voidCheck[t]<o&&(s.voidCheck[t]=o);let g=i[1]+i[2]+i[3]+i[4]+i[5];if(e.strange[0].current+=g,e.strange[0].total+=g,R.strange0(),U(`New Void reward unlocked:
${a.rewardText[0][t][o-1]}`),t===3?o<=4&&(C(0,1,"strangeness",!0),C(3,1,"strangeness",!0),C(1,2,"strangeness",!0),C(3,2,"strangeness",!0),C(0,3,"strangeness",!0),C(1,3,"strangeness",!0),C(0,4,"strangeness",!0),C(1,4,"strangeness",!0),C(2,5,"strangeness",!0)):t===4?o===1&&(C(4,1,"strangeness",!0),C(4,2,"strangeness",!0),C(4,3,"strangeness",!0),C(4,4,"strangeness",!0)):t===5&&o===3&&(C(6,1,"strangeness",!0),C(6,2,"strangeness",!0),C(7,3,"strangeness",!0),C(9,3,"strangeness",!0),C(7,4,"strangeness",!0),C(7,5,"strangeness",!0),C(8,5,"strangeness",!0),C(9,5,"strangeness",!0)),u)return ne(t)}if(!s.super)return;let l=s.supervoidMax;if(l[t]<o&&e.time.vacuum<=a.time){l[t]++;let u=o!==l[t];if(u&&(o=l[t]),s.supervoid[t]<o?(s.supervoid[t]++,e.cosmon[0].current++,e.cosmon[0].total++,U(`New Supervoid reward unlocked:
${a.rewardText[1][t][o-1]}`)):U("Strength of the 'Instability' increased"),r.inflationInfo.totalSuper=l[1]+l[2]+l[3]+l[4]+l[5],t===4&&o===3&&C(3,4,"strangeness",!0),u)return ne(t)}},Us=()=>{let t=e.challenges;if(t.active!==1)return!1;let s=r.challengesInfo[1];if(e.time.vacuum<=s.time){t.stability++,e.cosmon[0].current++,e.cosmon[0].total++;let a=s.rewardText[t.stability-1];U(`New Vacuum stability completion${a!==void 0?` and a new reward:
${a}`:""}`),e.stage.active<6&&Q(1),Ge()}return!0},Be=t=>{let s=e.challenges.active;if(s===t||t===null){if(s===null)return;Xe(),U(`Exited the ${r.challengesInfo[s].name}`)}else{if(!fs(t))return;Xe(t),U(`Entered the ${r.challengesInfo[t].name}`)}},Hs=()=>{let t=e.challenges.active;if(t===null)return;let s=r.challengesInfo[t];e.time[s.resetType]<=s.time||e.strangeness[5][6]<(e.inflation.vacuum?1:2)||(Xe(),U(`Automatically exited the ${s.name}`))},Xe=(t=null)=>{let s=e.challenges.active;if(s!==null){s===0&&!e.challenges.super&&ee(5)&&Se(5),e.challenges.active=null,e.stage.active<6&&Q(Math.min(e.clone.stage.current,(e.clone.depth!=="stage"?e.clone:e).strangeness[5][3]>=1?5:4));let a=e.clone.inflation?.vacuum;a!==void 0&&a!==e.inflation.vacuum&&(e.inflation.vacuum=a,xe(a)),Fe(),ns()}if(t!==null){e.challenges.active=t;let a=r.challengesInfo[t].resetType;if(ss(a),a!=="stage"){e.stage.active<6&&Q(1);let o=t!==1;e.inflation.vacuum!==o&&(e.inflation.vacuum=o,xe(o))}Fe(),a==="vacuum"?Ge():is(!0)}};var j=(t=null,s=null)=>{let a=r.tabs.current;if(t===null){if(!we(a))return j("stage");let i=0;for(let l of r.tabs[a].list){let u=we(a,l);n(`${a}SubtabBtn${l}`).style.display=u?"":"none",u?i++:r.tabs[a].current===l&&j(a,r.tabs[a].list[0])}if(n("subtabs").style.visibility=i>1?"":"hidden",b.SRSettings[0]){let l=`Current tab is '${a}'${i>1?` and subtab is '${r.tabs[a].current}'`:""}`;n("SRTab").textContent!==l&&(n("SRTab").textContent=l)}return}else if(s===null){if(a===t)return ct("up");n(`${a}Tab`).style.display="none",n(`${a}TabBtn`).classList.remove("tabActive"),r.tabs.current=t,n(`${t}Tab`).style.display="",n(`${t}TabBtn`).classList.add("tabActive");let i=0;for(let l of r.tabs[a].list)n(`${a}SubtabBtn${l}`).style.display="none";for(let l of r.tabs[t].list)we(t,l)?(n(`${t}SubtabBtn${l}`).style.display="",i++):r.tabs[t].current===l&&j(t,r.tabs[t].list[0]);n("subtabs").style.visibility=i>1?"":"hidden",b.SRSettings[0]&&(n("SRTab").textContent=`Current tab is '${t}'${i>1?` and subtab is '${r.tabs[t].current}'`:""}`)}else{let i=r.tabs[t].current;if(n(`${t}Subtab${i}`).style.display="none",n(`${t}SubtabBtn${i}`).classList.remove("tabActive"),r.tabs[t].current=s,n(`${t}Subtab${s}`).style.display="",n(`${t}SubtabBtn${s}`).classList.add("tabActive"),a!==t)return;b.SRSettings[0]&&(n("SRTab").textContent=`Current subtab is '${s}', part of '${t}' tab`)}let o=e.stage.active;if(t==="upgrade"&&r.tabs.upgrade.current==="Elements"||t==="Elements"){if(o!==4&&o!==5){t==="upgrade"&&s===null?j("upgrade","Upgrades"):(Q(r.trueActive===5?5:4,r.trueActive),J());return}}else if(r.trueActive!==o){Q(r.stageInfo.activeAll.includes(r.trueActive)?r.trueActive:Math.min(e.stage.current,5)),J();return}q(),P()},P=(t=!1)=>{if(r.offline.active&&!t)return;let s=r.tabs.current,a=r.tabs[s].current,o=e.stage.active,i=e.buildings[o],l=e.inflation.vacuum;if(!r.debug.timeLimit){let g=e.challenges.active,m=null;if(g!==null)m=e.time[r.challengesInfo[g].resetType]>r.challengesInfo[g].time;else if(!l&&e.tree[0][4]<1&&(e.stage.true>=7||e.stage.resets>=4)){let c=Math.min(e.stage.current,4),d=r.milestonesInfo,p=0;for(let h=0;h<d[c].need.length;h++){if(e.milestones[c][h]>=d[c].scaling[h].length){c===4&&e.milestones[5][h]<d[5].scaling[h].length&&(p=Math.max(d[5].reward[h],p));continue}p=Math.max(d[c].reward[h],p)}p>0&&(m=e.time.stage>p)}m?(U(`Time limit has been reached for ${g!==null?`the '${r.challengesInfo[g].name}'`:"all Milestones"}`),r.debug.timeLimit=!0):m===null&&(r.debug.timeLimit=!0)}{if(b.toggles[4]||(n("globalStat1Span").textContent=f(e.discharge.energy,{padding:"exponent"}),n("globalStat2Span").textContent=f(e.buildings[2][1].current,{padding:!0}),n("globalStat3Span").textContent=f(e.buildings[3][0].current,{padding:!0}),n("globalStat4Span").textContent=f(e.buildings[4][0].current,{padding:!0}),n("globalStat5Span").textContent=f(e.buildings[6][0].current,{padding:!0})),o===1)n("footerStat1Span").textContent=f(i[0].current,{padding:!0}),n("footerStat2Span").textContent=f(e.discharge.energy,{padding:"exponent"});else if(o===2)n("footerStat1Span").textContent=f(i[0].current,{padding:!0}),n("footerStat2Span").textContent=f(i[1].current,{padding:!0}),n("footerStat3Span").textContent=f(e.vaporization.clouds,{padding:!0});else if(o===3)n("footerStat1Span").textContent=f(i[0].current,{padding:!0});else if(o===4||o===5){let c=e.buildings[4];n("footerStat1Span").textContent=f(c[0].current,{padding:!0}),n("footerStat2Span").textContent=f(e.collapse.mass,{padding:!0}),o===5&&(n("footerStat3Span").textContent=f(new T(c[1].current).allPlus(c[2].current,c[3].current,c[4].current,c[5].current),{padding:!0}))}else o===6&&(n("footerStat1Span").textContent=f(i[0].current,{padding:!0}),n("footerStat2Span").textContent=f(e.darkness.energy,{padding:"exponent"}),n("footerStat3Span").textContent=f(e.darkness.fluid,{padding:!0}));let g=r.hotkeys.shift,m=n("shiftFooter");k.cache.innerHTML.get(m)!==g&&(k.cache.innerHTML.set(m,g),m.style.borderColor=g?"forestgreen":"",m.style.color=g?"var(--green-text)":"")}if(s==="stage"){if(a==="Structures"){let g=r.buildingsInfo,m=r.hotkeys.shift?r.hotkeys.ctrl?100:1:r.hotkeys.ctrl?10:e.toggles.shop.input,c=r.inflationInfo.globalSpeed;o===1?R.S1Build5(!0):o===2&&R.S2Build2(!0);for(let p=1;p<g.maxActive[o];p++){let h=n(`building${p}True`);n(`building${p}Cur`).textContent=f(i[p].current,{padding:h.style.display!=="none"}),n(`building${p}Prod`).textContent=f(g.type[o][p-1]==="producing"?new T(g.producing[o][p]).multiply(c):g.producing[o][p],{padding:!0}),h.textContent=`[${f(i[p].true,{padding:"exponent"})}]`;let v;if(o===3?p>1&&e.upgrades[3][r.accretionInfo.unlockA[p-2]]!==1&&(v="Unlocked with Upgrade"):o===4&&e.researchesExtra[5][0]<1&&e.collapse.mass<r.collapseInfo.unlockB[p]&&(v=`Unlocked at ${f(r.collapseInfo.unlockB[p])} Mass`),v!==void 0){n(`building${p}`).classList.remove("availableB"),n(`building${p}Btn`).textContent=v,n(`building${p}BuyX`).textContent="Locked";continue}let S,M,N=!1,A=!0;if(o===5&&p===3)S="Mass",M=e.collapse.mass,A=!1;else{let V=p-1,z=o;o===1?e.tree[1][8]>=1?N=!0:p===1&&l&&(N=(e.challenges.supervoid[3]>=5||e.researchesExtra[1][2]>=1)&&e.strangeness[1][8]>=1):o===2?(p!==1&&(V=1),N=e.tree[1][8]>=2):o>=3&&(V=0,o===5&&(z=4),o<6&&(N=e.tree[1][8]>=(o===3?3:4))),S=g.name[z][V],M=e.buildings[z][V].current}let D=1,G=Ue(p,o);if(m!==1&&A){let V=g.increase[o][p];N?(D=m<=0?Math.max(Math.floor(new T(M).divide(G).log(V).toNumber())+1,1):m,D>1&&G.multiply(new T(V).power(D-1))):(D=m<=0?Math.max(Math.floor(new T(M).multiply(V-1).divide(G).plus(1).log(V).toNumber()),1):m,D>1&&G.multiply(new T(V).power(D).minus(1).divide(V-1)))}n(`building${p}`).classList[G.lessOrEqual(M)?"add":"remove"]("availableB"),n(`building${p}Btn`).textContent=`Need: ${f(G,{padding:!0})} ${S}`,n(`building${p}BuyX`).textContent=f(D,{padding:"exponent"})}if(o===1){let p=r.dischargeInfo;if(n("reset0Button").textContent=p.energyTrue>e.discharge.energy?"Reset to regain spent Energy":`Next goal is ${f(p.next,{padding:!0})} Energy`,x("#tritiumEffect > span").textContent=f(E.tritium*c,{padding:!0}),x("#dischargeEffect > span").textContent=f(p.base**p.total,{padding:!0}),x("#energySpent > span").textContent=f(p.energyTrue-e.discharge.energy,{padding:"exponent"}),l){let h=y.preonsHardcap();n("preonCapRatio").textContent=f(R.S1Build1(!0).divide(h),{padding:!0}),x("#preonCap > span").textContent=f(h.multiply(c),{padding:!0})}}else if(o===2){n("reset0Button").textContent=`Reset for ${f(r.vaporizationInfo.get,{padding:!0})} Clouds`,x("#cloudEffect > span").textContent=f(y.clouds(),{padding:!0}),l&&(x("#molesProduction > span").textContent=f(E.tritium/602214076e15*c,{padding:!0}));let p=y.S2Extra1(e.researchesExtra[2][1]),h=y.S2Extra1(e.researchesExtra[2][1],!0);x("#vaporizationBoostTotal > span").textContent=f(y.clouds(!0)/y.clouds()*(h/p)*(y.S2Extra2(h)/y.S2Extra2(p)),{padding:!0})}else if(o===3){if(x("#dustSoftcap > span").textContent=f(r.accretionInfo.dustSoft),e.accretion.rank<r.accretionInfo.maxRank&&e.strangeness[3][4]>=2&&(n("reset0Button").textContent=`Next Rank is in ${f(new T(r.accretionInfo.nextRank).minus(i[0].total).max(0),{padding:!0})} Mass`),l&&(x("#massProduction > span").textContent=f(new T(R.S1Build1()).multiply(178266192e-41*c),{padding:!0}),x("#submersionBoost > span").textContent=f(y.submersion(),{padding:!0}),e.researchesExtra[3][5]<1)){let p=y.dustHardcap();n("dustCapRatio").textContent=f(R.S3Build1(!0).divide(p),{padding:!0}),x("#dustCap > span").textContent=f(p,{padding:!0})}}else if(o===4||o===5){let p=r.collapseInfo,h=g.producing[4],v=e.strangeness[4][4]>=3?1:y.mass(!0)/y.mass()*(y.S4Research4(!0)/y.S4Research4())*(1+(y.S5Upgrade2(!0)-y.S5Upgrade2())/E.galaxyBase)**(e.buildings[5][3].true*2);if(e.strangeness[4][4]<2){let S=new T(h[1]).allPlus(h[3],h[4],h[5]);v*=new T(h[2]).multiply(y.star[0](!0)/E.star[0]).plus(S).divide(S.plus(h[2])).replaceNaN(1).toNumber()*(y.star[1](!0)/E.star[1])*(y.star[2](!0)/E.star[2])}if(o===4){n("reset0Button").textContent=`Collapse is at ${f(p.newMass,{padding:!0})} Mass`,x("#solarMassEffect > span").textContent=f(y.mass(),{padding:!0});for(let S=0;S<3;S++){n(`special${S+1}Cur`).textContent=f(e.collapse.stars[S],{padding:"exponent"}),n(`special${S+1}Get`).textContent=f(p.starCheck[S],{padding:"exponent"}),x(`#star${S+1}Effect > span`).textContent=f(E.star[S],{padding:!0});let M=x(`#special${S+1} > p`),N=M.getBoundingClientRect().width;k.cache.innerHTML.get(M)!==N&&(k.cache.innerHTML.set(M,N),M.style.minWidth=`${N}px`)}e.strangeness[4][4]<3&&(x("#collapseBoostTotal > span").textContent=f(v,{padding:!0})),l&&(x("#mainCap > span").textContent=f(p.solarCap,{padding:!0}),n("mainCapTill").textContent=f(B.timeUntil(),{padding:!0}))}else if(o===5){let S=e.merge;if(l){let M=r.mergeInfo,N=[y.reward[0](),y.reward[1]()],A=y.mergeMaxResets()-S.resets;n("reset0Button").textContent=`Can reset ${A} more time${A!==1?"s":""}`;for(let z=0;z<2;z++)n(`special${z+1}Cur`).textContent=f(S.rewards[z],{padding:"exponent"}),n(`special${z+1}Get`).textContent=f(M.checkReward[z],{padding:"exponent"}),x(`#merge${z+1}Effect > span`).textContent=f(N[z],{padding:!0});x("#mainCapHardS5 > span").textContent=f(p.solarCap,{padding:!0}),e.strangeness[5][9]<2&&(x("#mergeBoostTotal > span").textContent=f((i[3].true/(M.galaxies+1)+1)*(y.reward[0](!0)/N[0])*(y.reward[1](!0)/N[1]),{padding:!0}));let D=y.groupsCost(),G=e.researchesExtra[5][1]>=2;x("#merge1Effect > span:last-of-type").textContent=`${D}`,x("#merge1Effect > span:nth-of-type(2)").textContent=`${(G?M.galaxies:i[3].true)-(M.checkReward[0]+S[G?"rewards":"claimed"][0])*D}`;let V=e.researchesExtra[5][5]>=2;x("#merge2Effect > span:nth-of-type(2)").textContent=`${(V?M.galaxies:i[3].true)-(M.checkReward[1]+S[V?"rewards":"claimed"][1])*100}`}e.strangeness[4][4]<2&&(x("#mainCapPostS5 > span").textContent=f(p[l?"solarCap":"newMass"]*(y.star[2](!0)/E.star[2]),{padding:!0})),x("#elementsProductionS5 > span").textContent=f(new T(h[1]).allPlus(h[2],h[3],h[4],h[5]).multiply(c),{padding:!0}),e.strangeness[4][4]<3&&(x("#collapseBoostTotalS5 > span").textContent=f(v,{padding:!0})),x("#mainCapS5 > span").textContent=f(p.newMass,{padding:!0}),x("#timeSinceGalaxy > span").textContent=f(S.since,{type:"time"})}}else if(o===6){let p=e.challenges.active;n("darkSoftcap").textContent=f(y.darkSoftcap(),{padding:!0});let h=y.mergeScore(),v=[R.verse0(),0],S=y.darkSoftcap(),M=i[0].current.toNumber();M>S?v[0]=((S*(S+24*v[0]*c)+8*M*(2*M+S))**.5-S)/4-M:v[0]*=c;for(let A=0;A<v.length;A++){n(`verse${A}True`).textContent=`[${f(A===0?r.inflationInfo.trueUniverses:e.verses[A].true,{padding:"exponent"})}]`,n(`verse${A}Cur`).textContent=f(e.verses[A].current,{padding:"exponent"}),n(`verse${A}Prod`).textContent=f(v[A],{padding:!0});let D;if(A===0?l?p!==null&&r.challengesInfo[p].time<e.time[r.challengesInfo[p].resetType]&&(D="Out of Challenge time"):D="Requires true Vacuum state":D="2 Universe types (WIP)",D!==void 0){n(`verse${A}`).classList.remove("availableB"),n(`verse${A}Btn`).textContent=D,n(`verse${A}BuyX`).textContent="Locked";continue}let G=Ze(A);n(`verse${A}`).classList[G<=h?"add":"remove"]("availableB"),n(`verse${A}Btn`).textContent=`Need: ${f(G,{padding:!0})} Merge score`,n(`verse${A}BuyX`).textContent="1"}let N=e.verses[0].other;if(n("verse0True").dataset.title=`Basic: ${f(e.verses[0].true,{padding:"exponent"})}${N[0]<1?"":` + Void: ${f(N[0],{padding:"exponent"})}`}`,l){let A=e.merge;n("reset0Button").textContent=`Reset for ${f(B.newFluid(),{padding:!0})} Dark fluid`,x("#darkEnergySpent > span").textContent=f(r.dischargeInfo.energyStage[6]-e.darkness.energy,{padding:"exponent"});let D=y.darkFluid(!0);x("#nucleationBoostTotal > span").textContent=f(D/E.fluid*(y.effectiveDarkEnergy(D)/y.effectiveDarkEnergy())**(e.researchesExtra[6][3]/40),{padding:!0}),n("mergeScore0Cur").textContent=f(r.mergeInfo.galaxies,{padding:"exponent"}),n("mergeScore1Cur").textContent=f(A.rewards[0]*2,{padding:"exponent"}),n("mergeScore2Cur").textContent=f(A.rewards[1]*4,{padding:"exponent"}),n("mergeScoreTotal").textContent=f(h,{padding:"exponent"});let G=y.mergeMaxResets()-A.resets,V=h;if(G>0){let z=e.buildings[5][3].true*(G-1),Z=e.buildings[5][3].true+z,le=r.mergeInfo.galaxies+(e.strangeness[5][9]>=2?Z:z);V+=Z+Math.floor(e.researchesExtra[5][1]>=2?le/y.groupsCost()-A.rewards[0]:(r.mergeInfo.checkReward[0]+A.claimed[0])*G)*2+Math.floor(e.researchesExtra[5][5]>=2?le/100-A.rewards[1]:(r.mergeInfo.checkReward[1]+A.claimed[1])*G)*4}n("mergeScoreAfter").textContent=f(V,{padding:"exponent"}),x("#mergeResetsS6 > span").textContent=f(A.resets,{padding:"exponent"}),x("#mergeResetsS6 > span:last-of-type").textContent=f(y.mergeMaxResets(),{padding:"exponent"})}x("#universeTime > span").textContent=f(e.inflation.age,{type:"time"}),x("#universeTimeReal > span").textContent=f(e.time.universe,{type:"time"})}let d=y.cosmonGain();n("reset2Button").textContent=r.inflationInfo.trueUniverses<1&&e.darkness.energy<1e3?"Requires a self-made Universe":`Big ${e.darkness.energy>=1e3?"Rip":"Crunch"} for ${f(d,{padding:!0})} Cosmons`,!l&&(o>=6?e.stage.current:o)<4?(n("stageReward").textContent=f(y.strangeGain(!1),{padding:!0}),o<4&&(n("reset1Button").textContent=ee(o)?"Requirements are met":`Requires ${o===3?`${f(245576045e23)} Mass`:o===2?`${f(119444e24)} Drops`:`${f(167133125e13)} Molecules`}`)):(e.elements[26]<.5&&B.quarksGain(),n("stageReward").textContent=f(r.strangeInfo.strange0Gain,{padding:!0})),x("#stageTime > span").textContent=f(e.stage.time,{type:"time"}),x("#stageTimeReal > span").textContent=f(e.time.stage,{type:"time"}),x("#globalSpeed > span").textContent=f(c,{padding:!0}),e.time.excess<0&&(x("#gameDisabled > span").textContent=f(-e.time.excess/1e3,{type:"time"}))}else if(a==="Advanced"){let g=r.lastChallenge;Ft(g[0]),g[0]===0?lt(g[1]):g[0]===1&&Ot()}}else if(s==="upgrade"||s==="Elements"){if(a==="Upgrades"){for(let g=0;g<r.upgradesInfo[o].maxActive;g++)ps(g,o,"upgrades");for(let g=0;g<r.researchesInfo[o].maxActive;g++)We(g,o,"researches");for(let g=0;g<r.researchesExtraInfo[o].maxActive;g++)We(g,o,"researchesExtra");for(let g=0;g<r.researchesAutoInfo.name.length;g++)We(g,0,"researchesAuto");We(0,o,"ASR"),rt(r.lastUpgrade[o][0],r.lastUpgrade[o][1])}else if(a==="Elements"){for(let g=0;g<r.elementsInfo.name.length;g++)ps(g,4,"elements");r.lastElement!==0&&rt(r.lastElement,"elements")}}else if(s==="strangeness"){if(a==="Matter"){let g=l||(o>=6?e.stage.current:o)>=4;g&&e.elements[26]<.5&&B.quarksGain();let m=g?r.strangeInfo.strange0Gain:y.strangeGain(!1),c=g?r.strangeInfo.strange1Gain:0;if(n("strange0Gain").textContent=f(m,{padding:!0}),n("strange1Gain").textContent=f(c,{padding:!0}),n("strangeRate").textContent=f(m/e.time.stage,{type:"income"}),n("strange0Cur").textContent=f(e.strange[0].current,{padding:!0}),n("strange1Cur").textContent=f(e.strange[1].current,{padding:!0}),n("stageTimeStrangeness").textContent=f(e.time.stage,{type:"time"}),g&&(x("#strangePeak > span").textContent=f(e.stage.peak[0],{type:"income"}),n("strangePeakAt").textContent=f(e.stage.peak[1],{type:"time"})),n("strange1EffectsMain").style.display!=="none"){let d=r.strangeInfo.strangeletsInfo;n("strange1Effect1Stat0").textContent=f(d[0]*100,{padding:!0}),g&&(n("strange1Effect1Stat1").textContent=f(ee(5)?d[0]*m/e.time.stage:0,{type:"income"})),n("strange1Effect2Stat").textContent=f(d[1],{padding:!0})}if(n("strange0EffectsMain").style.display!=="none"){let d=r.strangeInfo.stageBoost,p=e.strangeness;n("strange0Effect1Stat").textContent=f(p[1][6]>=1?d[1]:1,{padding:!0}),n("strange0Effect2Stat").textContent=f(p[2][6]>=1?d[2]:1,{padding:!0}),n("strange0Effect3Stat").textContent=f(p[3][7]>=1?d[3]:1,{padding:!0}),n("strange0Effect4Stat").textContent=f(p[4][7]>=1?d[4]:1,{padding:!0}),n("strange0Effect5Stat").textContent=f(p[5][7]>=1?d[5]:1,{padding:!0})}for(let d=1;d<r.strangenessInfo.length;d++)for(let p=0;p<r.strangenessInfo[d].maxActive;p++)We(p,d,"strangeness");at(r.lastStrangeness[0],r.lastStrangeness[1],"strangeness")}else if(a==="Milestones"){let g=e.time[e.challenges.active===0&&e.challenges.super?"vacuum":"stage"],m=l?g>r.challengesInfo[0].time:e.tree[0][4]<1;for(let c=1;c<r.milestonesInfo.length;c++){let d=r.milestonesInfo[c];for(let p=0;p<d.need.length;p++)n(`milestone${p+1}Stage${c}Current`).textContent=f(qt(p,c),{padding:!0}),n(`milestone${p+1}Stage${c}Required`).textContent=!l&&e.milestones[c][p]>=d.scaling[p].length?"Maxed":m&&(l||g>d.reward[p])?"No time":f(d.need[p],{padding:!0})}at(r.lastMilestone[0],r.lastMilestone[1],"milestones")}}else if(s==="inflation"){if(a==="Inflations"){n("cosmon0Span").textContent=f(e.cosmon[0].current,{padding:"exponent"}),n("cosmon1Span").textContent=f(e.cosmon[1].current,{padding:!0}),n("inflatonGainTrue").textContent=f(r.inflationInfo.trueUniverses+1,{padding:"exponent"}),n("endTime").textContent=f(e.time.end,{type:"time"});let g=y.cosmonGain();x("#cosmonGain > span").textContent=f(g,{padding:!0}),x("#cosmonRate > span").textContent=f(g/e.time.end,{type:"income"}),n("cosmonPeak").textContent=f(e.inflation.peak[0],{type:"income"}),n("cosmonPeakAt").textContent=f(e.inflation.peak[1],{type:"time"});for(let m=0;m<=1;m++)for(let c=0;c<r.treeInfo[m].name.length;c++)We(c,m,"inflations");at(r.lastInflation[0],r.lastInflation[1],"inflations")}}else if(s==="settings"){if(a==="Settings"){let g=e.time.export,m=e.inflation.ends[0]>=1?1:2.5,c=Math.min(g[0]/432e5,1);n("exportQuarks").textContent=f((g[1]/m+1)*c,{padding:!0}),x("#exportStrangelets > span").textContent=f(g[2]/m*c,{padding:!0}),x("#exportCosmon > span").textContent=f(g[3]*c,{padding:!0}),n("warpButton").textContent=`${Math.floor(e.time.offline/(6e4*(6-e.tree[0][5])))} Warps`,r.lastSave>=1e3&&(n("isSaved").textContent=`${f(r.lastSave/1e3,{type:"time"})} ago`)}else if(a==="Stats"){n("firstPlayAgo").textContent=f((e.time.updated-e.time.started)/1e3,{type:"time"}),n("onlineTotal").textContent=f(e.time.online/1e3,{type:"time"}),x("#offlineStorage > span").textContent=f(e.time.offline/1e3,{type:"time"}),x("#stageResets > span").textContent=f(e.stage.resets,{padding:"exponent"}),x("#endResets > span").textContent=f(e.inflation.ends[0],{padding:"exponent"}),n("endResetsType2").textContent=f(e.inflation.ends[1],{padding:"exponent"}),n("endResetsType3").textContent=f(e.inflation.ends[2],{padding:"exponent"}),x("#trueUniversesStats > span").textContent=f(r.inflationInfo.trueUniverses,{padding:"exponent"}),n("trueUniversesHigh").textContent=f(e.verses[0].highest,{padding:"exponent"}),n("trueUniversesLow").textContent=e.inflation.ends[2]>=1?`${e.verses[0].lowest}`:"Infinity";let g=e.time.export,m=e.inflation.ends[0]>=1?1:2.5,c=1;if(n("exportQuarksMax").textContent=f((g[1]/m+1)*c,{padding:!0}),x("#exportStrangeletsMax > span").textContent=f(g[2]/m*c,{padding:!0}),x("#exportCosmonMax > span").textContent=f(g[3]*c,{padding:!0}),n("exportTimeToMax").textContent=f(43200*c-g[0]/1e3,{type:"time"}),m!==1&&(x("#exportQuarksStorage > span").textContent=f(g[1],{padding:!0}),x("#exportStrangeletsStorage > span").textContent=f(g[2],{padding:!0})),o===1){let d=r.dischargeInfo;x("#dischargeStat > span").textContent=f(d.total),n("dischargeStatTrue").textContent=` [${e.discharge.current}]`,x("#dischargeScaleStat > span").textContent=f(d.scaling);for(let p=1;p<(l?6:2);p++){let h=d.energyType[p];n(`energyGainStage${p}Total`).textContent=f(d.energyStage[p],{padding:"exponent"});for(let v=1;v<r.buildingsInfo.maxActive[p];v++)n(`energyGainStage${p}Build${v+(l?0:2)}Cur`).textContent=f(h[v]*e.buildings[p][v].true,{padding:"exponent"}),n(`energyGainStage${p}Build${v+(l?0:2)}Per`).textContent=f(h[v])}x("#effectiveEnergyStat > span").textContent=f(y.effectiveEnergy(),{padding:!0}),x("#maxEnergyStat > span").textContent=f(e.discharge.energyMax,{padding:"exponent"})}else if(o===2){let d=y.clouds(!0)/y.clouds();x("#cloudStat > span").textContent=f(d,{padding:!0});let p=y.S2Extra1(e.researchesExtra[2][1]),h=y.S2Extra1(e.researchesExtra[2][1],!0),v=h/p,S=y.S2Extra2(h)/y.S2Extra2(p);x("#rainStat > span").textContent=f(v,{padding:!0}),x("#stormStat > span").textContent=f(S,{padding:!0}),n("cloudEffectTotal").textContent=f(d*v*S,{padding:!0}),l&&(i[0].total.setValue(e.buildings[1][5].total).divide(602214076e15),i[0].trueTotal.setValue(e.buildings[1][5].trueTotal).divide(602214076e15))}else if(o===3)n("currentRank").textContent=f(r.accretionInfo.effective),n("currentRankTrue").textContent=` [${f(e.accretion.rank,{padding:"exponent"})}]`,l&&i[0].trueTotal.setValue(e.buildings[1][0].trueTotal).multiply(178266192e-41);else if(o===4||o===5){if(x("#trueStarsStat > span").textContent=f(r.collapseInfo.trueStars,{padding:"exponent"}),o===4){if(e.strangeness[4][4]<3){let d=e.strangeness[4][4]>=2,p=y.mass(!0)/y.mass();x("#solarMassStat > span").textContent=f(p,{padding:!0});let h=1,v=d?1:y.star[1](!0)/E.star[1],S=d?1:y.star[2](!0)/E.star[2];if(!d){let A=r.buildingsInfo.producing[4],D=new T(A[1]).allPlus(A[3],A[4],A[5]);h=new T(A[2]).multiply(y.star[0](!0)/E.star[0]).plus(D).divide(D.plus(A[2])).replaceNaN(1).toNumber(),x("#star1Stat > span").textContent=f(h,{padding:!0}),x("#star2Stat > span").textContent=f(v,{padding:!0}),x("#star3Stat > span").textContent=f(S,{padding:!0})}let M=y.S4Research4(!0)/y.S4Research4();x("#gammaRayStat > span").textContent=f(M,{padding:!0});let N=(1+(y.S5Upgrade2(!0)-y.S5Upgrade2())/E.galaxyBase)**e.buildings[5][3].true;x("#quasarStat > span").textContent=f(N,{padding:!0}),n("starTotal").textContent=f(p*h*v*S*M*N**2,{padding:!0})}}else if(o===5){x("#maxSolarMassStat > span").textContent=f(e.collapse.massMax,{padding:!0}),x("#galaxyBase > span").textContent=f(E.galaxyBase,{padding:!0});let d=e.buildings[4];if(i[0].total.setValue(d[1].total).allPlus(d[2].total,d[3].total,d[4].total,d[5].total),i[0].trueTotal.setValue(d[1].trueTotal).allPlus(d[2].trueTotal,d[3].trueTotal,d[4].trueTotal,d[5].trueTotal),l){x("#mergeResets > span").textContent=f(e.merge.resets,{padding:"exponent"}),x("#mergeResets > span:last-of-type").textContent=f(y.mergeMaxResets(),{padding:"exponent"});let p=e.strangeness[5][9]>=2,h=i[3].true/(r.mergeInfo.galaxies+1)+1;x("#mergeBaseStat > span").textContent=f(h,{padding:!0});let v=p?1:y.reward[0](!0)/y.reward[0](),S=p?1:y.reward[1](!0)/y.reward[1]();p||(x("#merge1Stat > span").textContent=f(v,{padding:!0}),x("#merge2Stat > span").textContent=f(S,{padding:!0})),n("mergeTotal").textContent=f(h*v*S,{padding:!0})}}}else if(o===6&&l){B.newFluid();let d=y.darkFluid(!0),p=d/E.fluid;x("#darkFluidStat > span").textContent=f(p,{padding:!0});let h=(y.effectiveDarkEnergy(d)/y.effectiveDarkEnergy())**(e.researchesExtra[6][3]/40);x("#quintessenceStat > span").textContent=f(h,{padding:!0}),n("nucleationTotal").textContent=f(p*h,{padding:!0}),x("#effectiveDarkEnergyStat > span").textContent=f(y.effectiveDarkEnergy(),{padding:!0});let v=r.dischargeInfo.energyType[6];for(let S=1;S<v.length;S++)n(`energyGainStage6Build${S}Cur`).textContent=f(v[S]*i[S].true,{padding:"exponent"}),n(`energyGainStage6Build${S}Per`).textContent=f(v[S]);x("#maxDarkEnergyStat > span").textContent=f(e.darkness.energyMax,{padding:"exponent"})}for(let d=0;d<r.buildingsInfo.maxActive[o];d++)n(`building${d}StatTotal`).textContent=f(i[d].total,{padding:!0}),n(`building${d}StatTrueTotal`).textContent=f(i[d].trueTotal,{padding:!0});n("strange0StatTotal").textContent=f(e.strange[0].total,{padding:!0}),n("strange1StatTotal").textContent=f(e.strange[1].total,{padding:!0}),n("verse0StatTotal").textContent=f(e.verses[0].total,{padding:"exponent"}),n("cosmon0StatTotal").textContent=f(e.cosmon[0].total,{padding:"exponent"}),n("cosmon1StatTotal").textContent=f(e.cosmon[1].total,{padding:!0})}}let u=k.hoverText;u!==null&&u()},q=(t=!1)=>{if(r.offline.active&&!t)return;let s=r.tabs.current,a=r.tabs[s].current,{active:o,true:i}=e.stage,l=e.inflation.vacuum;e.event||(i>=9?e.verses[0].other[0]>=1&&te(13,!1):i===8?e.darkness.energy>=1e3&&te(12,!1):i===7?l&&te(10,!1):i===6?e.merge.resets>=1&&te(8,!1):i===5?o===5&&te(5,!1):i===4?e.collapse.stars[1]>=1&&te(4,!1):i===3?e.buildings[3][0].current.moreOrEqual(5e29)&&te(3,!1):i===2?B.newClouds()+e.vaporization.clouds>1e4&&te(2,!1):i===1&&e.upgrades[1][9]===1&&te(1,!1));{let u=s==="upgrade"||s==="Elements";b.toggles[1]&&(n("ElementsTabBtn").style.display=e.upgrades[4][1]===1?"":"none"),o===1?e.upgrades[1][5]!==1&&(u=!1):o===2?(n("footerStat3").style.display=e.upgrades[2][2]===1?"":"none",e.upgrades[2][2]!==1&&(u=!1)):o===4?(n("resetExtraFooter").style.display=e.researchesExtra[5][0]>=1?"":"none",e.upgrades[4][0]!==1&&(u=!1)):o===5?(n("resetExtraFooter").style.display=s==="stage"&&a==="Structures"?"":"none",e.upgrades[5][3]!==1&&(u=!1)):o===6&&(n("footerStat2").style.display=e.upgrades[6][0]===1?"":"none",n("footerStat3").style.display=e.upgrades[6][0]===1?"":"none",n("resetExtraFooter").style.display=s==="stage"&&a==="Structures"&&e.upgrades[5][3]===1?"":"none",e.upgrades[6][0]!==1&&(u=!1)),n("reset2Footer").style.display=s==="inflation"?"":"none",n("reset1Footer").style.display=s==="strangeness"?"":"none",n("reset0Footer").style.display=u?"":"none",n("exitFooter").style.display=e.challenges.active!==null&&(s!=="stage"||a!=="Advanced")?"":"none",n("createAllFooter").style.display=s!=="upgrade"||a!=="Upgrades"?"":"none",n("makeAllFooter").style.display=s!=="stage"||a!=="Structures"?"":"none",i<8&&(i<2&&(n("footerStat2").style.display=e.discharge.energyMax>=12?"":"none",n("upgradeTabBtn").style.display=e.discharge.energyMax>=12?"":"none",e.discharge.energyMax<12&&(n("createAllFooter").style.display="none")),i<7&&e.stage.resets<1&&(l?e.elements[26]<1:e.upgrades[1][9]!==1)&&(n("reset1Footer").style.display="none"),(i!==7||!e.event)&&(n("reset2Footer").style.display="none"))}if(k.bigWindow==="hotkeys"&&(n("warpHotkey").style.display=e.challenges.supervoid[3]>=4?"":"none",i<9)){if(i<2&&(n("createAllHotkey").style.display=e.discharge.energyMax>=12?"":"none",n("autoTogglesHeader").style.display=e.ASR[1]>=1?"":"none",n("toggleStructureHotkey").style.display=e.ASR[1]>=1?"":"none",n("toggleAllHotkey").style.display=e.ASR[1]>=1?"":"none"),i<7){let u=e.stage.resets>=(l?1:4);n("toggleUpgradesHotkey").style.display=e.researchesAuto[0]>=1||l&&e.stage.resets>=1?"":"none",n("dischargeHotkey").style.display=u||e.upgrades[1][5]===1?"":"none",n("toggleDischargeHotkey").style.display=e.strangeness[1][4]>=1?"":"none",n("vaporizationHotkey").style.display=u||e.upgrades[2][2]===1?"":"none",n("toggleVaporizationHotkey").style.display=e.strangeness[2][4]>=1?"":"none",n("rankHotkey").style.display=u||r.stageInfo.activeAll.includes(3)?"":"none",n("toggleRankHotkey").style.display=e.strangeness[3][4]>=1?"":"none",n("collapseHotkey").style.display=u||e.upgrades[4][0]===1?"":"none",n("toggleCollapseHotkey").style.display=e.strangeness[4][4]>=1?"":"none",n("galaxyHotkey").style.display=(l?e.strangeness[5][3]>=1:e.milestones[4][1]>=8)?"":"none",n("mergeHotkey").style.display=i===6&&(e.event||e.upgrades[5][3]===1)?"":"none",n("toggleMergeHotkey").style.display=e.strangeness[5][9]>=1?"":"none",n("versesHotkey").style.display=i===6&&e.event?"":"none",n("stageHotkey").style.display=e.stage.resets>=1||(l?e.elements[26]>=1:e.upgrades[1][9]===1)?"":"none",n("toggleStageHotkey").style.display=e.strangeness[5][6]>=1?"":"none",n("enterChallengeHotkey").style.display=i===6&&e.stage.resets>=1?"":"none",n("exitChallengeHotkey").style.display=i===6&&e.stage.resets>=1?"":"none"}n("nucleationHotkey").style.display=e.upgrades[6][0]===1?"":"none"}if(s==="stage"){if(a==="Structures"){let u=e.buildings[o],g=e.toggles.buildings[o],m=e.ASR[o];n("exportMaxed").style.display=!b.developerMode&&e.time.export[0]>=432e5&&(i>=7||e.strange[0].total>0)?"":"none",n("gameDisabled").style.display=e.time.excess<0?"":"none",i<7&&(n("reset1Main").style.display=e.stage.resets>=1||(l?e.elements[26]>=1:e.upgrades[1][9]===1)?"":"none");let c=!1,d=!1;for(let h=1;h<r.buildingsInfo.maxActive[o];h++)n(`building${h}True`).style.display=u[h].current.notEqual(u[h].true)?"":"none",n(`building${h}Btn`).tabIndex=m>=h&&g[h]?-1:0,n(`toggleBuilding${h}`).style.display=m>=h?"":"none",c||(c=Math.max(m,1)>=h&&g[h]),d||(d=m>=h&&!g[h]);let p=n("toggleAll");if(p.style.color=c?"var(--green-text)":"",p.style.borderColor=c?"forestgreen":"",p.textContent=c?d?"Few ON":"All ON":"All OFF",o===1)n("reset0Main").style.display=e.upgrades[1][5]===1?"":"none",n("building2").style.display=u[1].trueTotal.moreOrEqual(l?5:18)?"":"none",n("building3").style.display=u[2].trueTotal.moreOrEqual(2)?"":"none",l&&(n("building4").style.display=u[3].trueTotal.moreOrEqual(18)||e.upgrades[1][2]===1?"":"none",n("building5").style.display=u[4].trueTotal.moreOrEqual(2)?"":"none"),n("stageInfo").style.display=e.upgrades[1][5]===1?"":"none",n("tritiumEffect").style.display=e.upgrades[1][8]===1?"":"none",n("energySpent").style.display=e.challenges.supervoid[3]<5&&e.accretion.rank<6||e.strangeness[1][9]<1||e.discharge.energy!==r.dischargeInfo.energyTrue?"":"none",n("autoWaitMain").style.display=e.tree[1][8]<1&&i>=3?"":"none",i<7&&(i<2&&(n("toggleAll").style.display=m>=1?"":"none"),n("resets").style.display=e.stage.resets>=1||e.upgrades[1][5]===1?"":"none");else if(o===2){let h=u[1].trueTotal;n("reset0Main").style.display=e.upgrades[2][2]===1?"":"none",n("building2").style.display=h.moreOrEqual(400)||u[1].true>=100?"":"none",n("building3").style.display=h.moreOrEqual(8e6)?"":"none",n("building4").style.display=h.moreOrEqual(8e17)?"":"none",n("building5").style.display=h.moreOrEqual(8e22)?"":"none",n("cloudEffect").style.display=e.upgrades[2][2]===1?"":"none",n("vaporizationBoostTotal").style.display=e.upgrades[2][2]===1?"":"none",n("autoWaitMain").style.display=e.tree[1][8]<2&&i>=3?"":"none",l?(n("building6").style.display=h.moreOrEqual(2e25)?"":"none",i<7&&(n("resets").style.display=e.stage.resets>=1||e.upgrades[2][2]===1?"":"none")):n("stageInfo").style.display=e.upgrades[2][2]===1?"":"none"}else if(o===3){let h=e.upgrades[3];n("buildings").style.display=e.accretion.rank>=1?"":"none",n("building2").style.display=h[2]===1||u[2].trueTotal.moreThan(0)?"":"none",n("building3").style.display=h[4]===1||u[3].trueTotal.moreThan(0)?"":"none",n("building4").style.display=h[8]===1||u[4].trueTotal.moreThan(0)?"":"none",n("dustSoftcap").style.display=r.accretionInfo.dustSoft!==1?"":"none",n("autoWaitMain").style.display=e.tree[1][8]<3&&i>=3?"":"none",l?(n("building5").style.display=h[11]===1||u[5].trueTotal.moreThan(0)?"":"none",n("dustCap").style.display=e.researchesExtra[3][5]<1?"":"none",n("submersionBoost").style.display=e.researchesExtra[1][2]>=2?"":"none"):n("stageInfo").style.display=r.accretionInfo.dustSoft!==1?"":"none",Bs()}else if(o===4){let h=e.researchesExtra[4][0],v=u[2].trueTotal.moreThan(0),S=u[3].trueTotal.moreThan(0),M=u[4].trueTotal.moreThan(0);n("reset0Main").style.display=e.upgrades[4][0]===1?"":"none",n("specials").style.display=v?"":"none",n("special2").style.display=S?"":"none",n("special3").style.display=M?"":"none",n("building2").style.display=h>=1?"":"none",n("building3").style.display=h>=2?"":"none",n("building4").style.display=h>=3?"":"none",n("star1Effect").style.display=v?"":"none",n("star2Effect").style.display=S?"":"none",n("star3Effect").style.display=M?"":"none",n("collapseBoostTotal").style.display=e.strangeness[4][4]<3&&e.upgrades[4][0]===1?"":"none",n("autoWaitMain").style.display=e.tree[1][8]<4&&i>=3?"":"none",l&&(e.challenges.active!==0&&(n("building5").style.display=e.elements[26]>=1?"":"none"),n("mainCap").style.display=e.upgrades[4][0]===1?"":"none",i<7&&(n("resets").style.display=e.stage.resets>=1||e.upgrades[4][0]===1?"":"none")),ms()}else o===5?(n("reset0Main").style.display=e.upgrades[5][3]===1?"":"none",l?(n("specials").style.display=e.researchesExtra[5][1]>=1?"":"none",n("special2").style.display=e.researchesExtra[5][5]>=1?"":"none",n("mergeEffects").style.display=e.researchesExtra[5][1]>=1?"":"none",n("merge2Effect").style.display=e.researchesExtra[5][5]>=1?"":"none",n("mergeBoostTotal").style.display=e.strangeness[5][9]<2&&e.upgrades[5][3]===1?"":"none"):(n("buildings").style.display=e.milestones[2][0]>=7||e.milestones[3][0]>=7?"":"none",n("building1").style.display=e.milestones[2][0]>=7?"":"none",n("building2").style.display=e.milestones[3][0]>=7?"":"none",i<7&&(n("mergeResetText").innerHTML='Attempt to <span class="darkvioletText">Merge</span> <span class="grayText">Galaxies</span> together to create even bigger Structures. Might have severe consequences.')),n("building3").style.display=e.researchesExtra[5][0]>=1?"":"none",n("mainCapPostS5").style.display=e.strangeness[4][4]<2&&e.researchesExtra[5][0]>=1?"":"none",n("collapseBoostTotalS5").style.display=e.strangeness[4][4]<3?"":"none",n("timeSinceGalaxy").style.display=e.researchesExtra[5][0]>=1?"":"none",n("autoWaitMain").style.display=e.tree[1][8]<4&&i>=3?"":"none"):o===6&&(n("verse0Btn").tabIndex=0,n("verse1").style.display=e.verses[0].other[0]>=1?"":"none",n("mergeScore").style.display=e.researchesExtra[5][0]>=1?"":"none",l?(n("reset0Main").style.display=e.upgrades[6][0]===1?"":"none",n("building1").style.display=e.upgrades[6][0]===1||e.researches[6][0]>=6?"":"none",n("darkEnergySpent").style.display=e.upgrades[6][0]===1?"":"none",n("nucleationBoostTotal").style.display=e.upgrades[6][0]===1?"":"none",n("mergeScore1").style.display=e.researchesExtra[5][1]>=1?"":"none",n("mergeScore2").style.display=e.researchesExtra[5][5]>=1?"":"none",n("mergeResetsS6").style.display=e.upgrades[5][3]===1?"":"none",x("#mergeResetsS6 > span").style.color=`var(--${e.merge.resets>=y.mergeMaxResets()?"green":"red"}-text)`):(n("building1").style.display="none",e.challenges.active===null&&(n("mergeScore").style.display="none")),i<8&&(n("verse0True").style.display=e.inflation.ends[0]>=1?"":"none"))}else if(a==="Advanced"){if(r.lastChallenge[0]===0){let u=e.challenges.voidCheck;n("voidRewards").style.display="",n("voidReward2").style.display=u[1]>=3?"":"none",n("voidReward3").style.display=u[1]>=2?"":"none",n("voidReward4").style.display=u[3]>=5?"":"none",n("voidReward5").style.display=u[4]>=5?"":"none"}else n("voidRewards").style.display="none";n("stabilityRewards").style.display=r.lastChallenge[0]===1&&i>=8?"":"none",n("challengeName").disabled=!(r.lastChallenge[0]===0&&(i>=8||i===7&&e.event)),n("challengesToggles").style.display=e.strangeness[5][6]>=(l?1:2)?"":"none"}}else if(s==="upgrade"||s==="Elements"){if(a==="Upgrades"){if(l&&(n("researchAuto1").style.display=e.researchesExtra[1][2]>=2?"":"none",n("researchAuto2").style.display=e.accretion.rank>=6?"":"none"),o===1){let u=e.upgrades[1][5]===1;n("upgrade7").style.display=u?"":"none",n("upgrade8").style.display=u?"":"none",n("upgrade9").style.display=u?"":"none",n("upgrade10").style.display=u?"":"none",n("stageResearches").style.display=u?"":"none",l&&(n("upgrade11").style.display=u&&e.strangeness[5][10]>=1?"":"none",n("extraResearches").style.display=u?"":"none",n("researchExtra2").style.display=e.researchesExtra[1][2]>=2?"":"none",n("researchExtra4").style.display=e.researchesExtra[1][2]>=1?"":"none",n("researchExtra5").style.display=e.accretion.rank>=6?"":"none",n("researchExtra6").style.display=e.accretion.rank>=6&&e.strangeness[5][10]>=1?"":"none"),i<7&&(n("researches").style.display=u?"":"none")}else if(o===2){let u=e.buildings[2][2].trueTotal.moreThan(0),g=e.buildings[2][3].trueTotal.moreThan(0),m=e.buildings[2][4].trueTotal.moreThan(0),c=e.buildings[2][5].trueTotal.moreThan(0);n("upgrade2").style.display=u?"":"none",n("upgrade3").style.display=g?"":"none",n("upgrade4").style.display=u?"":"none",n("upgrade5").style.display=u?"":"none",n("upgrade6").style.display=g?"":"none",n("upgrade7").style.display=m?"":"none",n("upgrade8").style.display=c&&e.strangeness[2][2]>=3?"":"none",l&&(n("upgrade9").style.display=e.buildings[2][6].trueTotal.moreThan(0)&&e.strangeness[2][8]>=3?"":"none",n("research7").style.display=e.strangeness[5][10]>=2&&e.tree[1][5]>=3?"":"none",n("researchExtra4").style.display=e.accretion.rank>=6?"":"none",n("researchExtra5").style.display=e.accretion.rank>=7&&e.strangeness[5][10]>=2?"":"none"),n("research2").style.display=u?"":"none",n("research3").style.display=u?"":"none",n("research4").style.display=u?"":"none",n("research5").style.display=g?"":"none",n("research6").style.display=m?"":"none",n("extraResearches").style.display=e.upgrades[2][2]===1?"":"none",n("researchExtra3").style.display=c?"":"none"}else if(o===3){let u=e.accretion.rank,g=e.buildings[3][2].trueTotal.moreThan(0);n("upgrade3").style.display=u>=2?"":"none",n("upgrade4").style.display=g?"":"none",n("upgrade5").style.display=u>=3?"":"none",n("upgrade6").style.display=u>=4||e.upgrades[3][4]===1?"":"none",n("upgrade7").style.display=u>=4?"":"none",n("upgrade8").style.display=u>=4&&e.strangeness[3][2]>=3?"":"none",n("upgrade9").style.display=u>=4?"":"none",n("upgrade10").style.display=u>=4?"":"none",n("upgrade11").style.display=u>=5?"":"none",n("upgrade12").style.display=u>=5?"":"none",n("upgrade13").style.display=u>=5?"":"none",n("research3").style.display=g?"":"none",n("research4").style.display=g?"":"none",n("research5").style.display=u>=3?"":"none",n("research6").style.display=u>=3?"":"none",n("research7").style.display=u>=4||e.upgrades[3][4]===1?"":"none",n("research8").style.display=u>=4?"":"none",n("research9").style.display=u>=5?"":"none",n("extraResearches").style.display=u>=2?"":"none",n("researchExtra2").style.display=u>=3?"":"none",n("researchExtra3").style.display=u>=4?"":"none",n("researchExtra4").style.display=u>=5?"":"none",l?(n("upgrade14").style.display=u>=7&&e.strangeness[5][10]>=3?"":"none",n("researchExtra5").style.display=u>=3&&e.researchesExtra[1][2]>=2?"":"none",n("researchExtra6").style.display=u>=6&&e.strangeness[5][10]>=3?"":"none"):(n("upgrades").style.display=u>=1?"":"none",n("stageResearches").style.display=u>=1?"":"none")}else if(o===4){let u=e.strangeness,g=e.collapse.stars,m=e.researchesExtra[5][0]>=1;n("upgrade4").style.display=u[4][2]>=3?"":"none",n("upgrade5").style.display=u[4][9]>=1?"":"none",n("upgrade6").style.display=u[5][10]>=4?"":"none",n("research4").style.display=(m||g[0]>0)&&u[4][2]>=1?"":"none",n("research5").style.display=m||g[2]>0?"":"none",n("research6").style.display=(m||g[2]>0)&&u[4][9]>=3?"":"none",n("researchExtra2").style.display=m||g[0]>0?"":"none",n("researchExtra3").style.display=(m||g[0]>0)&&u[4][2]>=2?"":"none",n("researchExtra4").style.display=(m||g[1]>0)&&u[4][9]>=2?"":"none",n("researchExtra5").style.display=(m||g[2]>0)&&u[5][10]>=4?"":"none"}else if(o===5){let u=e.researchesExtra[5][0]>=1;if(l){let g=e.accretion.rank>=7&&i>=7;n("upgrade4").style.display=u&&e.accretion.rank>=7?"":"none",n("upgrade5").style.display=g?"":"none",n("upgrade6").style.display=g?"":"none",n("upgrade7").style.display=g?"":"none",n("research3").style.display=g?"":"none",n("research4").style.display=g?"":"none",n("research5").style.display=g?"":"none",n("researchExtra2").style.display=g?"":"none",n("researchExtra3").style.display=g?"":"none",n("researchExtra4").style.display=g?"":"none",n("researchExtra5").style.display=g?"":"none",n("researchExtra6").style.display=g?"":"none"}else{let g=e.milestones[2][0]>=7,m=e.milestones[3][0]>=7;n("upgrades").style.display=g||m?"":"none",n("upgrade1").style.display=g?"":"none",n("upgrade2").style.display=m?"":"none",n("upgrade4").style.display=u&&e.milestones[5][1]>=8?"":"none",n("stageResearches").style.display=g||m?"":"none",n("research1").style.display=g?"":"none",n("research2").style.display=m?"":"none",n("extraResearches").style.display=e.milestones[4][1]>=8?"":"none"}n("upgrade3").style.display=u?"":"none"}else if(o===6)if(l){let u=e.upgrades[6][0]===1;n("upgrades").style.display=u||e.researches[6][0]>=20?"":"none",n("upgrade2").style.display=u?"":"none",n("stageResearches").style.display=e.strangeness[6][3]>=1?"":"none",n("research2").style.display=u||e.researches[6][0]>=10?"":"none",n("research3").style.display=u||e.researches[6][0]>=12?"":"none",n("research4").style.display=u?"":"none",n("extraResearches").style.display=u?"":"none"}else n("upgrades").style.display="none",n("stageResearches").style.display="none"}else if(a==="Elements"){let u=e.upgrades[4],g=e.upgrades[4][2]===1&&(e.collapse.stars[1]>0||e.researchesExtra[5][0]>=1),m=u[4]===1?1+Y():0;u[5]===1&&(m+=1+e.verses[1].true);let c=18-(u[3]===1?0:2)-(m>1?0:m===1?1:2);n("elementsGrid").style.display=u[2]===1?"":"flex";for(let d=6;d<=10;d++)n(`element${d}`).style.display=u[2]===1?"":"none";for(let d=11;d<=26;d++)n(`element${d}`).style.display=g?"":"none";if(!g)c=8;else if(e.collapse.show<23){for(let d=26;d>Math.max(e.collapse.show+3,10);d--)n(`element${d}`).style.display="none";c=Math.max(e.collapse.show-9,8)}n("element27").style.display=u[3]===1?"":"none",n("element28").style.display=u[3]===1?"":"none";for(let d=29;d<r.elementsInfo.name.length;d++)n(`element${d}`).style.display=m>=d-28?"":"none";document.documentElement.style.setProperty("--elements-columns",`${c}`)}}else if(s==="strangeness"){if(a==="Matter"){let u=e.strangeness,g=e.verses[0].current,m=g<2||r.sessionToggles[1],c=g<3||r.sessionToggles[1],d=g<5||r.sessionToggles[1];if(n("strange1").style.display=u[5][8]>=1?"":"none",n("strange1Unlocked").style.display=u[5][8]>=1?"":"none",n("strange0EffectsMain").style.display!=="none"&&(n("strange0Effect1Level2").style.display=u[1][6]>=2?"":"none",n("strange0Effect2Level2").style.display=u[2][6]>=2?"":"none",n("strange0Effect3Level2").style.display=u[3][7]>=2?"":"none",n("strange0Effect4Level2").style.display=u[4][7]>=2?"":"none",n("strange0Effect5Level2").style.display=u[5][7]>=2?"":"none"),l){let p=u[5][3]>=1,h=e.challenges.void;n("strange5Stage1").style.display=h[4]>=1||d?"":"none",n("strange8Stage1").style.display=h[1]>=1?"":"none",n("strange9Stage1").style.display=(g>=1?r.sessionToggles[1]:h[1]>=2)?"":"none",n("strange10Stage1").style.display=h[4]>=2?"":"none",n("strange5Stage2").style.display=h[4]>=1||d?"":"none",n("strange8Stage2").style.display=h[1]>=3?"":"none",n("strange9Stage2").style.display=h[2]>=1?"":"none",n("strange10Stage2").style.display=h[2]>=2?"":"none",n("strange5Stage3").style.display=h[4]>=1||d?"":"none",n("strange9Stage3").style.display=h[4]>=4?"":"none",n("strange10Stage3").style.display=h[5]>=1?"":"none",n("strange5Stage4").style.display=h[4]>=1||d?"":"none",n("strange9Stage4").style.display=h[4]>=3?"":"none",n("strange10Stage4").style.display=h[4]>=5?"":"none",n("strange1Stage5").style.display=p?"":"none",n("strange2Stage5").style.display=p?"":"none",n("strange5Stage5").style.display=(g>=5?d:h[4]>=1)&&p?"":"none",n("strange6Stage5").style.display=m&&p?"":"none",n("strange8Stage5").style.display=p?"":"none",n("strange9Stage5").style.display=h[3]>=5?"":"none",n("strange10Stage5").style.display=(h[5]>=3||(g>=5?d:h[3]>=6))&&p?"":"none",n("strange11Stage5").style.display=h[2]>=3&&p?"":"none",n(`strangeness${b.MDSettings[0]?"Page":"Section"}6`).style.display=h[5]>=2?"":"none",b.MDSettings[0]&&r.debug.MDStrangePage===6&&h[5]<2&&ot(1)}else{let p=e.milestones,h=p[4][0]>=8,v=p[2][0]>=7||p[3][0]>=7;n("strange5Stage1").style.display=d?"":"none",n("strange7Stage1").style.display=h?"":"none",n("strange5Stage2").style.display=d?"":"none",n("strange7Stage2").style.display=h?"":"none",n("strange5Stage3").style.display=d?"":"none",n("strange8Stage3").style.display=h?"":"none",n("strange5Stage4").style.display=d?"":"none",n("strange8Stage4").style.display=h?"":"none",n("strange1Stage5").style.display=v?"":"none",n("strange2Stage5").style.display=v?"":"none",n("strange3Stage5").style.display=p[5][0]>=8?"":"none",n("strange4Stage5").style.display=v?"":"none",n("strange5Stage5").style.display=d&&p[4][1]>=8?"":"none",n("strange6Stage5").style.display=m&&v?"":"none",n(`strangeness${b.MDSettings[0]?"Page":"Section"}5`).style.display=h?"":"none",b.MDSettings[0]&&((r.debug.MDStrangePage===5?!h:i<6&&e.stage.resets<r.debug.MDStrangePage+3)||r.debug.MDStrangePage>5)&&ot(1),i<6&&(n("strange0").style.cursor=p[4][0]<8?"unset":"")}n("strange6Stage1").style.display=m?"":"none",n("strange6Stage2").style.display=m?"":"none",n("strange6Stage3").style.display=m?"":"none",n("strange7Stage3").style.display=c?"":"none",n("strange6Stage4").style.display=m?"":"none",n("strange7Stage4").style.display=c?"":"none",n("strange7Stage5").style.display=g<8||r.sessionToggles[1]?"":"none"}else if(a==="Milestones"&&!l){let u=e.milestones[4];n("milestone1Stage5Div").style.display=u[0]>=8?"":"none",n("milestone2Stage5Div").style.display=u[1]>=8?"":"none",r.stageInfo.activeAll.includes(4)&&(n("milestonesStage5Main").style.display=u[0]>=8?"":"none"),r.stageInfo.activeAll.includes(5)&&(n("milestone2Stage5Main").style.display=u[1]>=8?"":"none")}}else if(s==="inflation"){if(a==="Inflations"){let u=e.challenges.supervoid;n("inflation6Tree1").style.display=u[3]>=4?"":"none",n("inflation7Tree1").style.display=u[2]>=2?"":"none",n("inflation3Tree2").style.display=u[3]>=3?"":"none",n("inflation4Tree2").style.display=u[4]>=2?"":"none",n("inflation5Tree2").style.display=u[1]>=1?"":"none",n("inflation6Tree2").style.display=u[2]>=1?"":"none",n("inflation7Tree2").style.display=u[3]>=1?"":"none",n("inflation8Tree2").style.display=u[4]>=1?"":"none",n("inflation9Tree2").style.display=u[1]>=3?"":"none"}else if(a==="Milestones"){let u=e.challenges.supervoid;n("inflationSupervoid1").style.display=u[1]>=2?"":"none",n("inflationSupervoid2").style.display=u[3]>=2?"":"none",n("inflationSupervoid3").style.display=u[3]>=5?"":"none",n("inflationSupervoid4").style.display=u[4]>=3?"":"none",n("inflationSupervoid5").style.display=u[4]>=4?"":"none",x("#inflationMilestone1 > span > span").textContent=f(1.5),n("endMilestone1").classList[e.inflation.ends[0]>=1?"remove":"add"]("uncompleted"),n("endMilestone2").classList[e.inflation.ends[1]>=1?"remove":"add"]("uncompleted"),n("endMilestone3").classList[e.inflation.ends[2]>=1?"remove":"add"]("uncompleted");let g=e.verses[0].current;n("inflationMilestone2").classList[g>=2?"remove":"add"]("uncompleted"),n("inflationMilestone3").classList[g>=3?"remove":"add"]("uncompleted"),n("inflationMilestone4").classList[g>=5?"remove":"add"]("uncompleted"),n("inflationMilestone5").classList[g>=8?"remove":"add"]("uncompleted"),n("inflationMilestone6").classList[g>=12?"remove":"add"]("uncompleted")}}else if(s==="settings"){if(a==="Settings"){let{researchesAuto:u,strangeness:g}=e,m=e.time.export,c=e.inflation.ends[0]>=1?1:2.5;if(n("exportReward").dataset.title=`${f((m[1]/c+1)/43200,{type:"income"}).replace(" "," Strange quarks ")}${g[5][8]>=1?`
${f(m[2]/c/43200,{type:"income"}).replace(" "," Strangelets ")}`:""}`,x("#exportReward > span:last-of-type").style.display=e.challenges.active!==null&&r.challengesInfo[e.challenges.active].resetType!=="stage"?"":"none",n("collapsePointsMax").textContent=g[5][4]>=1?"There is no maximum value":"Maximum value is 40",n("exportStrangelets").style.display=g[5][8]>=1?"":"none",n("warpButton").style.display=e.challenges.supervoid[3]>=4?"":"none",n("autoTogglesUpgrades").style.display=u[0]>=1||u[1]>=2?"":"none",n("autoElMain").style.display=u[0]>=1?"":"none",n("autoUMain").style.display=u[0]>=2?"":"none",n("autoRMain").style.display=u[0]>=3?"":"none",n("autoEMain").style.display=u[1]>=2?"":"none",n("autoSMain").style.display=e.verses[0].current>=12?"":"none",n("toggleAuto0").style.display=g[5][6]>=1?"":"none",n("toggleAuto0Info").style.display=g[5][6]>=1?"":"none",n("toggleAuto0Menu").style.display!=="none"){let v=n("stageInput"),S=n("stageInputType");if(![v,S].includes(document.activeElement)){let M=wt();v.value=f(e.stage.input[M],{type:"input"}),n("stageAutoType").textContent=["Strange quarks","seconds this Stage","seconds since peak"][M-1],v.dataset.type=`${M}`,S.value=`${M}`}l||(n("stageAutoInterstellar1").style.display=g[5][6]>=2?"":"none",n("stageAutoInterstellar2").style.display=g[5][6]>=2?"":"none")}n("toggleAuto1").style.display=g[1][4]>=1||u[2]>=1&&(l||e.stage.current===1)?"":"none";let d=g[2][4]>=1||(l?u[2]>=3:u[2]>=1&&e.stage.current===2);n("toggleAuto2").style.display=d?"":"none",n("toggleAuto2Info").style.display=d?"":"none",n("toggleAuto3").style.display=g[3][4]>=1||(l?u[2]>=2:u[2]>=1&&e.stage.current===3)?"":"none";let p=g[4][4]>=1||(l?u[2]>=4:u[2]>=1&&e.stage.current>=4);n("toggleAuto4").style.display=p?"":"none",n("toggleAuto4Info").style.display=p?"":"none",n("toggleAuto9").style.display=g[5][9]>=1?"":"none",l&&(n("toggleAuto9Info").style.display=g[5][9]>=1?"":"none");let h=g[6][3]>=4;if(n("toggleAuto10").style.display=h?"":"none",n("toggleAuto10Info").style.display=h?"":"none",i<9){if(i<5&&(n("elementsAsTab").style.display=e.upgrades[4][1]===1?"":"none"),i<6&&(n("saveFileNameGalaxy").style.display=e.milestones[4][1]>=8?"":"none"),i<7){let v=e.stage.resets>=(l?1:4);n("resetToggles").style.display=v||e.upgrades[1][5]===1?"":"none",n("vaporizationToggleReset").style.display=v||e.upgrades[2][2]===1?"":"none",n("rankToggleReset").style.display=v||r.stageInfo.activeAll.includes(3)?"":"none",n("collapseToggleReset").style.display=v||e.upgrades[4][0]===1?"":"none",n("mergeToggleReset").style.display=i===6&&(e.event||e.upgrades[5][3]===1)?"":"none",n("stageToggleReset").style.display=e.stage.resets>=1||(l?e.elements[26]>=1:e.upgrades[1][9]===1)?"":"none",n("stageAutoElse").style.display=!l||e.upgrades[5][3]===1?"":"none",n("vaporizationExtra").style.display=e.challenges.void[4]>=1?"":"none"}n("nucleationToggleReset").style.display=e.upgrades[6][0]===1?"":"none"}}else if(a==="History")Ds(),Ps();else if(a==="Stats"){n("firstPlay").textContent=new Date(e.time.started).toLocaleString(),n("offlineStorage").style.display=e.challenges.supervoid[3]>=4?"":"none",n("exportQuarksStorage").style.display=e.inflation.ends[0]<1?"":"none",n("exportStrangeletsStorage").style.display=e.inflation.ends[0]<1?"":"none",n("exportStrangeletsMax").style.display=e.strangeness[5][8]>=1?"":"none";for(let u=1;u<r.buildingsInfo.maxActive[o];u++)n(`building${u}Stats`).style.display=e.buildings[o][u].trueTotal.moreThan(0)?"":"none";if(n("strangeAllStats").style.display=e.strange[0].total>0?"":"none",n("strange1Stats").style.display=e.strange[1].total>0?"":"none",n("trueStarsStat").style.display=o===4||o===5?"":"none",o===1){n("dischargeStat").style.display=e.upgrades[1][5]===1?"":"none",n("dischargeStatTrue").style.display=e.discharge.current!==r.dischargeInfo.total?"":"none",n("dischargeScaleStat").style.display=e.upgrades[1][5]===1?"":"none";for(let u=1;u<=(l?5:1);u++){let g=!1;for(let m=1;m<r.buildingsInfo.maxActive[u];m++){let c=e.buildings[u][m].trueTotal.moreThan(0);g||(g=c),n(`energyGainStage${u}Build${m+(l?0:2)}`).style.display=c?"":"none"}n(u===1?"energyGainStats":`energyGainStage${u}`).style.display=g?"":"none"}i<2&&(n("effectiveEnergyStat").style.display=e.discharge.energyMax>=12?"":"none",n("maxEnergyStat").style.display=e.discharge.energyMax>=12?"":"none",n("energyGainStats").style.display=e.discharge.energyMax>=12?"":"none")}else if(o===2)n("vaporizationBoost").style.display=e.upgrades[2][2]===1?"":"none",n("rainStat").style.display=e.researchesExtra[2][1]>=1?"":"none",n("stormStat").style.display=e.researchesExtra[2][2]>=1?"":"none";else if(o===3){n("currentRankTrue").style.display=r.accretionInfo.effective!==e.accretion.rank?"":"none",l&&(n("rankStat0").style.display=e.strangeness[2][9]>=1?"":"none");for(let u=1;u<r.accretionInfo.rankImage.length;u++)n(`rankStat${u}`).style.display=e.accretion.rank>=u?"":"none"}else if(o===4){if(n("collapseBoost").style.display=e.strangeness[4][4]<3&&e.upgrades[4][0]===1?"":"none",e.strangeness[4][4]<3){let u=e.strangeness[4][4]>=2;n("star1Stat").style.display=!u&&e.buildings[o][2].trueTotal.moreThan(0)?"":"none",n("star2Stat").style.display=!u&&e.buildings[o][3].trueTotal.moreThan(0)?"":"none",n("star3Stat").style.display=!u&&e.buildings[o][4].trueTotal.moreThan(0)?"":"none",n("gammaRayStat").style.display=e.researchesExtra[5][0]>=1||e.collapse.stars[2]>=1?"":"none",n("quasarStat").style.display=e.researchesExtra[5][0]>=1?"":"none"}}else if(o===5){if(n("maxSolarMassStat").style.display=e.researchesExtra[5][0]>=1?"":"none",n("galaxyBase").style.display=e.researchesExtra[5][0]>=1?"":"none",l){n("mergeResets").style.display=e.upgrades[5][3]===1?"":"none",x("#mergeResets > span").style.color=`var(--${e.merge.resets>=y.mergeMaxResets()?"green":"red"}-text)`;let u=e.strangeness[5][9]>=2;n("mergeBoost").style.display=e.upgrades[5][3]===1?"":"none",n("merge1Stat").style.display=!u&&e.researchesExtra[5][1]>=1?"":"none",n("merge2Stat").style.display=!u&&e.researchesExtra[5][5]>=1?"":"none"}}else o===6&&l&&(n("nucleationBoost").style.display=e.upgrades[6][0]===1?"":"none",n("quintessenceStat").style.display=e.researchesExtra[6][3]>=1?"":"none",n("energyGainStage6").style.display=e.upgrades[6][0]===1?"":"none",n("effectiveDarkEnergyStat").style.display=e.upgrades[6][0]===1?"":"none",n("maxDarkEnergyStat").style.display=e.upgrades[6][0]===1?"":"none")}}if(b.toggles[3]||(n("fakeFooter").style.height=`${n("footer").offsetHeight+b.fontSize*2}px`),b.SRSettings[0])for(let u of it("hasTitle"))u.ariaDescription=u.dataset.title},fe=()=>{let t=e.stage.true,s=t>=8||t===7&&e.event;if(n("reset2Main").style.display=s?"":"none",n("stageRewardOld").style.display=t<5?"":"none",n("stageRewardNew").style.display=t>=5?"":"none",n("stageTimeReal").style.display=t>=7?"":"none",n("universeTimeReal").style.display=t>=7?"":"none",n("globalSpeed").style.display=t>=7?"":"none",n("challenge2").style.cursor=t>=8?"":"help",n("voidRewardsType").disabled=!s,n("researchAuto3").style.display=t>=7?"":"none",n("toggleHover0").style.display=t>=2?"":"none",n("toggleMax0").style.display=t>=4?"":"none",n("strange1GlobalSpeedInfo").style.display=t>=7?"":"none",n("strangenessVisibility").style.display=t>=7?"":"none",b.MDSettings[0]?(n("toggleHover1").style.display=t>=7?"":"none",n("toggleMax1").style.display=t>=7?"":"none",n("createAllStrangeness").style.display=t>=7?"":"none"):n("strangenessToggles").style.display=t>=7?"":"none",n("cosmon1").style.display=s?"":"none",n("cosmonGain").style.display=s?"":"none",n("cosmonRate").style.display=s?"":"none",n("inflation4Tree1").style.display=s?"":"none",n("inflation5Tree1").style.display=s?"":"none",n("inflationsTree2").style.display=s?"":"none",n("inflationSupervoid").style.display=s?"":"none",n("endMilestone1").style.display=s?"":"none",n("endMilestone2").style.display=s?"":"none",n("endMilestone3").style.display=s?"":"none",x("#resetToggles > h2 > span").style.display=t>=5?"":"none",n("endToggleReset").style.display=s?"":"none",n("themeArea").style.display=t>=2||b.theme!==null?"":"none",n("switchTheme2").style.display=t>=2?"":"none",n("switchTheme3").style.display=t>=3?"":"none",n("switchTheme4").style.display=t>=4?"":"none",n("switchTheme5").style.display=t>=5?"":"none",n("switchTheme6").style.display=t>=7?"":"none",n("saveFileNameStrange").style.display=t>=5?"":"none",n("saveFileNameVacuum").style.display=t>=6?"":"none",n("saveFileNameUniverse").style.display=t>=7?"":"none",n("saveFileNameInflaton").style.display=t>=7?"":"none",n("saveFileNameCosmon").style.display=s?"":"none",n("autoStageSwitch").style.display=t>=5?"":"none",n("endHistory").style.display=s?"":"none",n("endResets").style.display=s?"":"none",n("trueUniversesStats").style.display=s?"":"none",n("verse0Stat").style.display=t>=7?"":"none",n("inflatonStat").style.display=t>=7?"":"none",n("cosmon1Stat").style.display=s?"":"none",t>=2&&(n("toggleAll").style.display="",n("effectiveEnergyStat").style.display="",n("maxEnergyStat").style.display="",n("upgradeTabBtn").style.display=""),t>=5&&(n("elementsAsTab").style.display=""),t>=6){n("strange0").style.cursor="",n("saveFileNameGalaxy").style.display="";for(let a=2;a<=4;a++)n(`strangeness${b.MDSettings[0]?"Page":"Section"}${a}`).style.display="",n(`milestone1Stage${a}Div`).style.display="",n(`milestone2Stage${a}Div`).style.display=""}t>=7&&(n("stageSelect").style.display="",n("resets").style.display="",n("reset1Main").style.display="",n("challenge1").style.display="",n("researches").style.display="",n("stageAutoElse").style.display="",n("vaporizationExtra").style.display="",n("resetToggles").style.display="",n("vaporizationToggleReset").style.display="",n("rankToggleReset").style.display="",n("collapseToggleReset").style.display="",n("mergeToggleReset").style.display="",n("stageToggleReset").style.display="",n("strangenessTabBtn").style.display="",n("stageResets").style.display="",n("exportReward").style.display="",n("exportStats").style.display="",n("hideGlobalStats").style.display="",b.toggles[4]||(n("globalStats").style.display="")),t>=8&&(n("verse0True").style.display=""),t>=9&&(n("nucleationToggleReset").style.display=""),k.bigWindow==="hotkeys"&&(n("stageRightHotkey").style.display=t>=5?"":"none",n("stageLeftHotkey").style.display=t>=5?"":"none",n("supervoidHotkey").style.display=s?"":"none",n("endHotkey").style.display=s?"":"none",n("toggleNucleationHotkey").style.display=t>=9?"":"none",b.MDSettings[0]&&(n("stageSwipe").style.display=t>=5?"":"none"),t>=2&&(n("createAllHotkey").style.display="",n("autoTogglesHeader").style.display="",n("toggleStructureHotkey").style.display="",n("toggleAllHotkey").style.display=""),t>=7&&(n("toggleUpgradesHotkey").style.display="",n("stageHotkey").style.display="",n("toggleStageHotkey").style.display="",n("dischargeHotkey").style.display="",n("toggleDischargeHotkey").style.display="",n("vaporizationHotkey").style.display="",n("toggleVaporizationHotkey").style.display="",n("rankHotkey").style.display="",n("toggleRankHotkey").style.display="",n("collapseHotkey").style.display="",n("toggleCollapseHotkey").style.display="",n("galaxyHotkey").style.display="",n("mergeHotkey").style.display="",n("toggleMergeHotkey").style.display="",n("versesHotkey").style.display="",n("enterChallengeHotkey").style.display="",n("exitChallengeHotkey").style.display=""),t>=9&&(n("nucleationHotkey").style.display=""))},rt=(t,s)=>{if(s==="elements"){if(t===null){n("elementText").textContent="Hover to see.",n("elementEffect").textContent="Hover to see.",n("elementCost").textContent="Stardust.";return}let o=r.elementsInfo;n("elementText").textContent=`${o.name[t]}.`,n("elementEffect").textContent=e.elements[t]>0||e.collapse.show>=t&&t!==0?o.effectText[t]():"Effect is not yet known.",n("elementCost").textContent=e.elements[t]>=1?"Obtained.":e.elements[t]>0?"Awaiting Collapse.":t===0?"Unknown.":`${f(o.cost[t])} Stardust.${b.MDSettings[0]?" (Hold to create)":""}`;return}let a=e.stage.active;if(t===null){n("upgradeText").textContent="Hover to see.",n("upgradeEffect").textContent="Hover to see.",n("upgradeCost").textContent=`${r.stageInfo.costName[a]}.`;return}if(s==="upgrades"){let o=r[`${s}Info`][a],i=a===5&&r.mergeInfo.unlockU[t]>Y();n("upgradeText").textContent=`${o.name[t]}.`,n("upgradeEffect").textContent=i?"Effect will be revealed once requirements are met.":o.effectText[t](),n("upgradeCost").textContent=e.upgrades[a][t]===1?"Created.":a===1&&e.upgrades[1][5]!==1&&(t===3||t===4)&&e.buildings[1][(e.inflation.vacuum?4:2)+(t===3?0:1)].total.equal(0)?`Requires any amount of ${t===3?"Atoms":"Molecules"} to create.`:a===2&&t===0&&e.buildings[2][1].true<1&&e.buildings[2][2].true<1?"Requires any amount of self-made Drops to create.":a===4&&r.collapseInfo.unlockU[t]>e.collapse.mass&&e.researchesExtra[5][0]<1?`Unlocked at ${f(r.collapseInfo.unlockU[t])} Mass.`:a===6&&t===0&&e.buildings[6][1].true<80?"Requires at least 80 Dark planets.":i?`Unlocked at ${r.mergeInfo.unlockU[t]} ${e.challenges.active===0?"Void":"self-made"} Universes.`:`${f(o.cost[t])} ${r.stageInfo.costName[a]}.`}else if(s==="researches"||s==="researchesExtra"){let o=r[`${s}Info`][a],i=e[s][a][t];s==="researchesExtra"&&a===4&&t===0&&(o.name[0]=["Nova","Supernova","Hypernova"][Math.min(i,2)]);let l=a===5&&r.mergeInfo[`unlock${s==="researches"?"R":"E"}`][t]>Y();if(n("upgradeText").textContent=`${o.name[t]}. (Level ${f(i,{padding:"exponent"})} out of ${f(o.max[t],{padding:"exponent"})})`,n("upgradeEffect").textContent=l?"Effect will be revealed once requirements are met.":o.effectText[t](),i>=o.max[t])n("upgradeCost").textContent="Maxed.";else if(a===4&&s==="researches"&&r.collapseInfo.unlockR[t]>e.collapse.mass&&e.researchesExtra[5][0]<1)n("upgradeCost").textContent=`Unlocked at ${f(r.collapseInfo.unlockR[t])} Mass.`;else if(a===5&&s==="researchesExtra"&&e.strangeness[5][3]<1)n("upgradeCost").textContent="Requires 'Gravitational bound' Strangeness.";else if(l)n("upgradeCost").textContent=`Unlocked at ${r.mergeInfo[`unlock${s==="researches"?"R":"E"}`][t]} ${e.challenges.active===0?"Void":"self-made"} Universes.`;else{let u=1,g=o.cost[t],m=o.max[t]-i;if(m>1&&e.toggles.max[0]!==r.hotkeys.shift){let c=o.scaling[t];if(typeof g=="number"){let d=e[a===1?"discharge":"darkness"].energy;if(a===1&&(e.challenges.supervoid[3]>=5||e.accretion.rank>=6)&&e.strangeness[1][9]>=1)u=Math.min(Math.max(Math.floor((d-g)/c+1),1),m),u>1&&(g+=(u-1)*c);else{let p=g-c/2;u=Math.min(Math.max(Math.floor(((p**2+2*c*d)**.5-p)/c),1),m),u>1&&(g=u*(u*c/2+p))}}else{let d=e.buildings[a===5?4:a][a===2?1:0].current;u=Math.min(Math.max(Math.floor(new T(d).multiply(c-1).divide(g).plus(1).log(c).toNumber()),1),m),u>1&&(g=new T(c).power(u).minus(1).divide(c-1).multiply(g))}}n("upgradeCost").textContent=`${f(g)} ${a===6&&s==="researchesExtra"?"Dark energy":r.stageInfo.costName[a]}.${u>1?` [x${u}]`:""}`}}else if(s==="researchesAuto"){let o=r.researchesAutoInfo,i=e.researchesAuto[t];if(n("upgradeText").textContent=`${o.name[t]}. (Level ${i} out of ${f(o.max[t],{padding:"exponent"})})`,n("upgradeEffect").textContent=o.effectText[t](),i>=o.max[t])n("upgradeCost").textContent="Maxed.";else{let l=o.autoStage[t][i];t===1?e.strangeness[4][6]>=1&&i--:t===2&&(e.strangeness[1][4]>=1&&i--,e.strangeness[2][4]>=1&&i--,e.strangeness[3][4]>=1&&i--,e.strangeness[4][4]>=1&&i--,e.inflation.vacuum&&i++),t===1&&e.strangeness[4][6]>=1&&(i=Math.max(i-1,0)),n("upgradeCost").textContent=`${f(o.costRange[t][Math.max(i,0)])} ${r.stageInfo.costName[l]}. ${l===a||a===5&&l===4?"":`(Requires to be in the '${r.stageInfo.word[l]}')`}`}}else if(s==="ASR"){let o=r.ASRInfo,i=e.ASR[a];n("upgradeText").textContent=`${o.name}. (Level ${i} out of ${o.max[a]})`,n("upgradeEffect").textContent=o.effectText(),n("upgradeCost").textContent=i>=o.max[a]?"Maxed.":a===1&&e.upgrades[1][5]!==1?"Cannot be created without 'Superposition' Upgrade.":a===3&&e.accretion.rank<1?"Cannot be created at 'Ocean world' Rank.":`${f(o.costRange[a][i])} ${r.stageInfo.costName[a]}.`}},at=(t,s,a)=>{if(a==="inflations"){if(t===null){n("inflationText").textContent="Hover to see.",n("inflationEffect").textContent="Hover to see.",n("inflationCost").textContent="Inflatons.";return}let i=r.treeInfo[s],l=e.tree[s][t];if(n("inflationText").textContent=`${i.name[t]}. (Level ${f(l,{padding:"exponent"})}${i.max[t]<1e6?` out of ${f(i.max[t],{padding:"exponent"})}`:""})`,n("inflationEffect").textContent=i.effectText[t](),l>=i.max[t])n("inflationCost").textContent="Fully activated.";else{let u=1+l,g=i.cost[t];if(e.toggles.max[2]!==r.hotkeys.shift)for(;i.max[t]>u;){let m=g+et(t,s,u);if(e.cosmon[s].current<m)break;g=m,u++}n("inflationCost").textContent=`${g===0?"None":`${f(g)} ${s===0?"Inflatons":"Cosmons"}`}${s!==0?", non-refundable":""}.${u-l>1?` [x${u-l}]`:""}`}return}let o=n(`${a}Stage`);if(t!==null?(o.style.color=`var(--${r.stageInfo.textColor[s]}-text)`,o.textContent=`${r.stageInfo.word[s]}. `):o.textContent="",a==="strangeness"){if(t===null){n("strangenessText").textContent="Hover to see.",n("strangenessEffect").textContent="Hover to see.",n("strangenessCost").textContent="Strange quarks.";return}let i=r.strangenessInfo[s],l=e.strangeness[s][t];if(n("strangenessText").textContent=`${i.name[t]}. (Level ${f(l,{padding:"exponent"})} out of ${f(i.max[t],{padding:"exponent"})})`,n("strangenessEffect").textContent=i.effectText[t](),l>=i.max[t])n("strangenessCost").textContent="Maxed.";else if(e.challenges.active===1&&s<4&&e.milestones[s][1]>=(s===1?6:7))n("strangenessCost").textContent=`${r.stageInfo.word[s]} is removed from the reset cycle.`;else{let u=1+l,g=i.cost[t];if(e.toggles.max[1]!==r.hotkeys.shift)for(;i.max[t]>u;){let m=g+(e.inflation.vacuum?Math.floor(Math.round(i.firstCost[t]*i.scaling[t]**u*100)/100):Math.floor(Math.round((i.firstCost[t]+i.scaling[t]*u)*100)/100));if(e.strange[0].current<m)break;g=m,u++}n("strangenessCost").textContent=`${f(g)} Strange quarks.${u-l>1?` [x${u-l}]`:""}`}}else{let i;if(t===null)n("milestonesText").textContent="Hover to see.",i=`<p class="orchidText">Requirement: <span class="greenText">Hover to see.</span></p>
            <p class="blueText">Time limit: <span class="greenText">Hover to see.</span></p>
            <p class="darkvioletText">${e.inflation.vacuum?"Effect":"Unlock"}: <span class="greenText">Hover to see.</span></p>`;else{let m=r.milestonesInfo[s],c=e.milestones[s][t];if(n("milestonesText").textContent=`${m.name[t]}. (Tier ${f(c,{padding:"exponent"})}${e.inflation.vacuum?"":` out of ${m.scaling[t].length}`}${m.recent[t]!==0?`, +${f(m.recent[t],{padding:"exponent"})} recently`:""})`,e.inflation.vacuum){let d=e.challenges.active===0&&e.tree[0][4]>=1;i=`<p class="orchidText">Requirement: <span class="greenText">${m.needText[t]()}</span></p>
                <p class="blueText">Time limit: <span class="greenText">${f(r.challengesInfo[0].time-(d?e.time[e.challenges.super?"vacuum":"stage"]:0),{type:"time"})} ${d?"remains ":""}to increase this tier within Void.</span></p>
                <p class="darkvioletText">Effect: <span class="greenText">${m.rewardText[t]()}</span>${e.tree[0][4]<1?' <span class="redText">(Disabled)</span>':""}</p>`}else if(c<m.scaling[t].length){let d=r.stageInfo.activeAll.includes(Math.min(s,4)),p=d&&(e.tree[0][4]<1||e.challenges.active===1);i=`<p class="orchidText">Requirement: <span class="greenText">${m.needText[t]()}</span></p>
                <p class="blueText">Time limit: <span class="greenText">${f(m.reward[t]-(p?e.time.stage:0),{type:"time"})} ${p?"remains ":""}to complete this tier within ${d?"current":r.stageInfo.word[t===0&&s===5?4:s]} Stage.</span></p>
                <p class="darkvioletText">Unlock: <span class="greenText">Main reward unlocked after ${m.scaling[t].length-c} more completions.</span></p>`}else i=`<p class="darkvioletText">Reward: <span class="greenText">${m.rewardText[t]()}</span></p>`}let l=n("milestonesMultiline");k.cache.innerHTML.get(l)!==i&&(k.cache.innerHTML.set(l,i),l.innerHTML=i);let u=l.parentElement,g=u.getBoundingClientRect().height;k.cache.innerHTML.get(u)!==g&&(k.cache.innerHTML.set(u,g),u.style.minHeight=`${g}px`)}},Ft=t=>{let s=r.challengesInfo[t],a=e.challenges.active===t,o=n("challengeName");o.textContent=s.name,o.style.color=`var(--${s.color}-text)`,n("challengeActive").style.display=a?"":"none";let i=t!==1||e.stage.true>=8,l=e.time[s.resetType];o.parentElement.style.display=i?"":"none";let u=i?`<p class="whiteText">${s.description()}</p>
    <article><h4 class="${s.color}Text bigWord">Effects:</h4>
    <div>${s.effectText()}</article>
    <p class="blueText">${a?"Remaining time":"Time limit"} is <span class="cyanText">${f(s.time-(a?l:0),{type:"time"})}</span></p></div>`:"";if(t===1){let g=e.inflation.vacuum,m=g?r.inflationInfo.trueUniverses+1:1;u+=`${i?"<article>":""}<h3 class="darkorchidText bigWord">Vacuum information</h3>
        <p class="orchidText">Vacuum state: <span class="${g?'greenText">true':'redText">false'}</span> | Resets: <span class="darkorchidText">${e.inflation.resets}</span></p>
        ${e.stage.true>=7?`<p class="darkvioletText">Current Inflatons gain: <span class="${g?"green":"red"}Text">${f(m,{padding:"exponent"})}</span> | Rate: <span class="${g?"green":"red"}Text">${f(m/l,{type:"income"})}</span></p>`:""}
        <p class="orchidText">Time since last reset: <span class="darkorchidText">${f(e.inflation.time,{type:"time"})}</span>${e.stage.true>=7?` (Real: <span class="darkorchidText">${f(l,{type:"time"})}</span>)`:""}</p>${i?"</article>":""}`}k.cache.innerHTML.get("challengeMultiline")!==u&&(k.cache.innerHTML.set("challengeMultiline",u),n("challengeMultiline").innerHTML=u)},lt=t=>{let s=r.sessionToggles[0],a=r.challengesInfo[0],o=a.rewardText[s?1:0][t],i=e.challenges[s?"supervoidMax":"void"][t],l=e.challenges[s?"supervoid":"voidCheck"][t],u=e.challenges[s?"supervoid":"void"],g=1+u[1]+u[2]+u[3]+u[4]+u[5],m=`<p class="greenText center">All rewards are located in the '${s?"Inflation":"Strangeness"}' Tab
Also gain ${s?`a single Inflaton after unlocking ${g-r.inflationInfo.totalSuper} more`:`${g} Strange quarks, which is equal to total`} rewards</p>`;for(let c=0;c<o.length;c++){let d=a.needText[t][c]();if(d===null)continue;let p=i>c,h;!p&&e.challenges.active===0&&(s&&!e.challenges.super?h="Supervoid only":e.time[s?"vacuum":"stage"]>a.time?h="Out of time":t===2&&c===2&&e.tree[1][5]<4&&e.accretion.rank>1&&(h="Failed")),m+=`<div><p><span class="${p?"greenText":"redText"}">\u2192 </span>${d}${h!==void 0?` <span class="redText">(${h})</span>`:""}</p>
        <p><span class="${p?"greenText":"redText"}">Reward: </span>${l>c?`${o[c]}${!p&&b.SRSettings[0]?" (not unlocked)":""}`:"Not yet unlocked"}</p></div>`}k.cache.innerHTML.get("voidRewardsMultiline")!==m&&(k.cache.innerHTML.set("voidRewardsMultiline",m),n("voidRewardsMultiline").innerHTML=m)},Ot=()=>{let t=r.challengesInfo[1],s=e.challenges.stability,a=`<p class="greenText center">${s} Completions, can be increased by Merging Galaxies while active
Also gain a single Inflaton after 1 more completion</p>`;for(let o=0;o<t.rewardText.length;o++){let i=s>o,l;!i&&e.challenges.active===1&&e.time.vacuum>t.time&&(l="Out of time"),a+=`<div><p><span class="${i?"greenText":"redText"}">\u2192 </span>${t.needText[o]}${l!==void 0?` <span class="redText">(${l})</span>`:""}</p>
        <p><span class="${i?"greenText":"redText"}">Reward: </span>${i?t.rewardText[o]:"Not yet unlocked"}</p></div>`}k.cache.innerHTML.get("stabilityRewardsMultiline")!==a&&(k.cache.innerHTML.set("stabilityRewardsMultiline",a),n("stabilityRewardsMultiline").innerHTML=a)},ps=(t,s,a)=>{if(a==="upgrades"){if(s!==e.stage.active)return;let o="",i=n(`upgrade${t+1}`);e.upgrades[s][t]===1?(s===1?o="green":s===2?o="darkgreen":s===3?o="#0000b1":s===4?o="#1f1f8f":s===5?o="#990000":s===6&&(o="#660000"),i.tabIndex=b.SRSettings[0]&&b.SRSettings[1]?0:-1):i.tabIndex=0,i.style.backgroundColor=o}else if(a==="elements"){let o=n(`element${t}`);e.elements[t]>=1?(o.classList.remove("awaiting"),o.classList.add("created"),t>0&&(o.tabIndex=b.SRSettings[0]&&b.SRSettings[1]?0:-1)):(o.classList[e.elements[t]>0?"add":"remove"]("awaiting"),o.classList.remove("created"),t>0&&(o.tabIndex=0))}},We=(t,s,a)=>{let o,i,l,u=!1;if(a==="researches"||a==="researchesExtra"){if(s!==e.stage.active)return;o=r[`${a}Info`][s].max[t],i=e[a][s][t],l=`#research${a==="researches"?"":"Extra"}${t+1}`,u=!0}else if(a==="researchesAuto")o=r.researchesAutoInfo.max[t],i=e.researchesAuto[t],l=`#researchAuto${t+1}`;else if(a==="ASR"){if(s!==e.stage.active)return;o=r.ASRInfo.max[s],i=e.ASR[s],l="#ASR"}else a==="strangeness"?(o=r.strangenessInfo[s].max[t],i=e.strangeness[s][t],l=`#strange${t+1}Stage${s}`):(o=r.treeInfo[s].max[t],i=e.tree[s][t],l=`#inflation${t+1}Tree${s+1}`);let g='<span style="color: ';i>=o?(g+="var(--green-text)",x(`${l} > input`).tabIndex=b.SRSettings[0]&&b.SRSettings[1]?0:-1):i===0?(g+="var(--red-text)",x(`${l} > input`).tabIndex=0):(g+="var(--orchid-text)",x(`${l} > input`).tabIndex=0),g+=`;">${f(i,{padding:"exponent"})}</span>`,o<1e3&&(g+=`/<span style="color: var(--green-text);">${o}</span>`);let m=x(`${l} > span`);if(k.cache.innerHTML.get(l)!==g){if(k.cache.innerHTML.set(l,g),m.innerHTML=g,m.classList[o<1e3?"remove":"add"]("noMaxLevel"),!u)return;let c=m.getBoundingClientRect().width;k.cache.innerHTML.get(m)!==c&&(k.cache.innerHTML.set(m,c),m.style.minWidth=`${c}px`)}},Bs=()=>{let t=e.accretion.rank;if(r.debug.rankUpdated===t)return;let s=r.accretionInfo,a=n("rankName"),o=n("rankExtra");n("reset0Button").textContent=t>=s.maxRank?"Max Rank achieved":`Next Rank is ${f(s.nextRank)} Mass`;let i=Math.min(t,7);n("rankImage").src=`Used_art/${s.rankImage[i]}`,a.textContent=t>7?"PG":s.rankName[t],a.style.color=`var(--${s.rankColor[i]}-text)`,o.style.display=t>7?"":"none",t>7&&(o.textContent=`+${f(t-7,{padding:"exponent"})}`),r.debug.rankUpdated=t},kt=()=>{let t=e.collapse.points,s=new Array(t.length);for(let a=0;a<t.length;a++)s[a]=f(t[a],{type:"input"});n("collapsePoints").textContent=s.length!==0?`${s.join(", ")} or `:""},ms=()=>{if(e.stage.active===4){let t=e.researchesExtra[4][2]>=1,s=t?"White%20dwarf":"Red%20giant",a=x("#special1 > img");k.cache.innerHTML.get(a)!==s&&(k.cache.innerHTML.set(a,s),a.src=`Used_art/${s}.png`,a.alt=t?"White dwarfs (Red giants)":"Red giants",n("special1").dataset.title=a.alt,n("special1Cur").style.color=`var(--${t?"cyan":"red"}-text)`),n("star1Effect").dataset.title=`Boost to ${e.elements[27]>=1?"Brown dwarfs, ":""}Main-sequence${e.elements[33]>=1?", Red supergiants":""}`;let o=e.researchesExtra[4][3]>=1,i=o?"Quark%20star":"Neutron%20star",l=x("#special2 > img");k.cache.innerHTML.get(l)!==i&&(k.cache.innerHTML.set(l,i),l.src=`Used_art/${i}.png`,l.alt=o?"Quark stars (Neutron stars)":"Neutron stars",n("special2").dataset.title=l.alt,n("special2Cur").style.color="var(--darkviolet-text)",n("star2Effect").dataset.title=`Boost${o?" and cost decrease":""} to Interstellar Stars`),e.inflation.vacuum&&(n("star3Effect").dataset.title=`Boost to the Solar mass gain${e.researchesExtra[4][4]>=1?", global speed":""} and delay to the Preons hardcap`),b.SRSettings[0]&&(n("specials").ariaLabel="Stars remnants")}else if(e.stage.active===5){let t=x("#special1 > img");k.cache.innerHTML.set(t,"Group"),t.src="Used_art/Galaxy%20group.png",t.alt="Galaxy groups",n("special1").dataset.title="Galaxy groups",n("special1Cur").style.color="var(--gray-text)";let s=x("#special2 > img");k.cache.innerHTML.set(s,"Cluster"),s.src="Used_art/Missing.png",s.alt="Galaxy clusters",n("special2").dataset.title="Galaxy clusters",n("special2Cur").style.color="var(--gray-text)",b.SRSettings[0]&&(n("specials").ariaLabel="Merge results")}},Ds=()=>{if(r.debug.historyStage===e.stage.resets)return;let t=r.historyStorage.stage,s="";for(let o=0;o<Math.min(t.length,e.history.stage.input[1]);o++)s+=`<li>${f(t[o][1],{padding:!0})} Strange quarks, <span class="darkorchidText">${f(t[o][1]/t[o][0],{type:"income"})}</span> | Peak: <span class="darkorchidText">${f(t[o][3],{type:"income"})}</span>
${t[o][2]>0?`${f(t[o][2],{padding:!0})} Strangelets, <span class="darkorchidText">${f(t[o][2]/t[o][0],{type:"income"})}</span>, `:""}<span class="blueText">${f(t[o][0],{type:"time"})}</span> | At: <span class="blueText">${f(t[o][4],{type:"time"})}</span></li>`;n("stageHistoryList").innerHTML=s!==""?s:'<li class="redText">Reference list is empty</li>';let a=e.history.stage.best;n("stageHistoryBest").innerHTML=`${f(a[1],{padding:!0})} Strange quarks, <span class="darkorchidText">${f(a[1]/a[0],{type:"income"})}</span> | Peak: <span class="darkorchidText">${f(a[3],{type:"income"})}</span>
${a[2]>0?`${f(a[2],{padding:!0})} Strangelets, <span class="darkorchidText">${f(a[2]/a[0],{type:"income"})}</span>, `:""}<span class="blueText">${f(a[0],{type:"time"})}</span> | At: <span class="blueText">${f(a[4],{type:"time"})}</span>`,r.debug.historyStage=e.stage.resets},Ps=()=>{let t=e.inflation.ends[0]+e.inflation.ends[1]+e.inflation.ends[2];if(r.debug.historyEnd===t)return;let s=r.historyStorage.end,a="";for(let i=0;i<Math.min(s.length,e.history.end.input[1]);i++)a+=`<li><span class="darkvioletText">${f(s[i][1],{padding:"exponent"})} Cosmons</span>, <span class="darkorchidText">${f(s[i][1]/s[i][0],{type:"income"})}</span> | Peak: <span class="darkorchidText">${f(s[i][3],{type:"income"})}</span>
<span class="darkvioletText">Type:</span> <span class="brownText">Big ${s[i][2]===2?"Freeze":s[i][2]===1?"Rip":"Crunch"}</span>, <span class="blueText">${f(s[i][0],{type:"time"})}</span> | At: <span class="blueText">${f(s[i][4],{type:"time"})}</span></li>`;n("endHistoryList").innerHTML=a!==""?a:'<li class="redText">Reference list is empty</li>';let o=e.history.end.best;n("endHistoryBest").innerHTML=`<span class="darkvioletText">${f(o[1],{padding:"exponent"})} Cosmons</span>, <span class="darkorchidText">${f(o[1]/o[0],{type:"income"})}</span> | Peak: <span class="darkorchidText">${f(o[3],{type:"income"})}</span>
<span class="darkvioletText">Type:</span> <span class="brownText">Big ${o[2]===2?"Freeze":o[2]===1?"Rip":"Crunch"}</span>, <span class="blueText">${f(o[0],{type:"time"})}</span> | At: <span class="blueText">${f(o[4],{type:"time"})}</span>`,r.debug.historyEnd=t},f=(t,s={})=>{if(typeof t=="object")return t?.format(s);let a=s.type??"number",o=s.padding,i;if(a==="income"){let u=Math.abs(t);u>=1?i="per second":u>=1/60?(t*=60,i="per minute"):u>=1/3600?(t*=3600,i="per hour"):u>=1/86400?(t*=86400,i="per day"):u>=1/31556952?(t*=31556952,i="per year"):u>=1/31556952e3?(t*=31556952e3,i="per millennium"):u>=1/31556952e6?(t*=31556952e6,i="per megaannum"):(t*=31556952e9,i="per eon"),o??=!0}else if(a==="time"){let u=Math.abs(t);if(u<60)i="seconds";else if(u<3600){let g=Math.trunc(t/60),m=Math.trunc(t-g*60);return o===!1&&m===0?`${g} minutes`:`${g} minutes ${m} seconds`}else if(u<86400){let g=Math.trunc(t/3600),m=Math.trunc(t/60-g*60);return o===!1&&m===0?`${g} hours`:`${g} hours ${m} minutes`}else if(u<31556952){let g=Math.trunc(t/86400),m=Math.trunc(t/3600-g*24);return o===!1&&m===0?`${g} days`:`${g} days ${m} hours`}else if(u<31556952e3){let g=Math.trunc(t/31556952),m=Math.trunc(t/86400-g*365.2425);return o===!1&&m===0?`${g} years`:`${g} years ${m} days`}else u<31556952e6?(t/=31556952e3,i="millenniums"):u<31556952e9?(t/=31556952e6,i="megaannums"):(t/=31556952e9,i="eons");o??=!0}if(!isFinite(t))return i!==void 0?`${t} ${i}`:`${t}`;let l=Math.abs(t);if(l>=1e6||l<1e-4&&l>0){o==="exponent"&&(o=!0);let u=Math.floor(Math.log10(l)),g=3-Math.floor(Math.log10(Math.abs(u))),m=Math.round(t/10**(u-g))/10**g;if(Math.abs(m)===10){if(m/=10,u++,u===-4)return f(1e-4*m,s);o&&(g=3-Math.floor(Math.log10(Math.abs(u))))}let c=o?m.toFixed(g):`${m}`;return a==="input"?`${c}e${u}`:(c=`${c.replace(".",b.format[0])}e${u}`,i!==void 0?`${c} ${i}`:c)}{let u=l<10?5:5-Math.floor(Math.log10(l)),g=Math.round(t*10**u)/10**u,m=Math.abs(g);if(m===1e6)return f(g,s);o==="exponent"?o=!1:o&&(u=m<10?5:5-Math.floor(Math.log10(m)));let c=o?g.toFixed(u):`${g}`;if(a==="input")return c;let d=c.indexOf(".");return d!==-1?c=`${c.slice(0,d)}${b.format[0]}${c.slice(d+1)}`:d=c.length,d>3&&(d-=3,c=`${c.slice(0,d)}${b.format[1]}${c.slice(d)}`),i!==void 0?`${c} ${i}`:c}},J=(t=!0,s=!1)=>{let{stageInfo:a,buildingsInfo:o}=r,{active:i,current:l,true:u}=e.stage,g=a.activeAll,m=e.inflation.vacuum,c=e.challenges.active;if(g.length=0,m?(g.push(1),e.researchesExtra[1][2]>=2&&g.push(2),l>=2&&g.push(3),l>=4&&g.push(4),l>=5&&e.strangeness[5][3]>=1&&g.push(5)):((l===1||c!==1&&e.milestones[1][1]>=6)&&a.activeAll.push(1),(l===2||c!==1&&e.milestones[2][1]>=7)&&a.activeAll.push(2),(l===3||c!==1&&e.milestones[3][1]>=7)&&a.activeAll.push(3),l>=4&&g.push(4),l>=5&&g.push(5)),(u>=7||u===6&&e.event)&&g.push(6),r.offline.active&&!s){r.offline.stage[1]||(r.offline.stage[1]=t);return}for(let $=1;$<=6;$++){for(let K of it(`stage${$}Only`))K.style.display=i===$?"":"none";for(let K of it(`stage${$}Include`))K.style.display=g.includes($)?"":"none"}let d=n("stageWord");if(d.textContent=a.word[l],d.style.color=`var(--${a.textColor[l]}-text)`,!m&&i>=6?n("reset1Button").textContent="No Stage resets available":(m||i>=4)&&(n("reset1Button").textContent=u>=6||u===5&&e.event?l>=5?"Requirements are met":"Requires '[26] Iron' Element":"Requirements are unknown"),c!==null){n("currentChallenge").style.display="";let $=x("#currentChallenge > span");$.textContent=r.challengesInfo[c].name,$.style.color=`var(--${r.challengesInfo[c].color}-text)`}else n("currentChallenge").style.display="none";if(u<7){if(!m&&u<6)for(let K=2;K<=4;K++){let he=e.stage.resets>=K+3;n(`strangeness${b.MDSettings[0]?"Page":"Section"}${K}`).style.display=he?"":"none",n(`milestone1Stage${K}Div`).style.display=he?"":"none",n(`milestone2Stage${K}Div`).style.display=he?"":"none"}n("stageSelect").style.display=g.length>1?"":"none",n("strangenessTabBtn").style.display=e.strange[0].total>0||m&&l>=5?"":"none",n("inflationTabBtn").style.display="none",t&&(n("resets").style.display="",n("researches").style.display=""),n("challenge1").style.display=e.stage.resets>=1?"":"none",n("exportReward").style.display=e.strange[0].total>0?"":"none";let $=m&&(l>=2||e.stage.resets>=1);n("hideGlobalStats").style.display=$?"":"none",b.toggles[4]||(n("globalStats").style.display=$?"":"none"),n("exportStats").style.display=e.strange[0].total>0?"":"none",n("stageResets").style.display=e.stage.resets>=1?"":"none"}if(m)n("milestonesProgressArea").style.display=c===0&&e.tree[0][4]>=1?"":"none";else{let $=(i>=6?l:i)>=4;n("strangePeak").style.display=$?"":"none",n("strange1Effect1Allowed").style.display=$?"":"none",n("strange1Effect1Disabled").style.display=$?"none":""}if(!t){q(s),P(s);return}let p=k.researchExtraDivHTML[i];b.SRSettings[0]&&(n("extraResearches").ariaLabel=`${p[2]} Researches (Special)`,n("SRStage").textContent=`Current active Stage is '${a.word[i]}'${i!==r.trueActive?`, will be changed to '${a.word[r.trueActive]}' after changing tab`:""}`);let h=r.upgradesInfo[i],v=r.researchesInfo[i],S=r.researchesExtraInfo[i],M=k.footerStatsHTML[i];for(let $=Math.max(o.maxActive[i],1);$<k.longestBuilding;$++)n(`building${$}Stats`).style.display="none",n(`building${$}`).style.display="none";for(let $=h.maxActive;$<k.longestUpgrade;$++)n(`upgrade${$+1}`).style.display="none";for(let $=v.maxActive;$<k.longestResearch;$++)n(`research${$+1}`).style.display="none";for(let $=S.maxActive;$<k.longestResearchExtra;$++)n(`researchExtra${$+1}`).style.display="none";for(let $=M.length;$<k.longestFooterStats;$++)n(`footerStat${$+1}`).style.display="none";let N=[],A=[],D=[],G=[];i===1?(N.push(2,3,4,5),A.push(0,1,2,3,4,5),G.push(0,1,2),n("specials").style.display="none",n("resetExtraFooter").style.display="none",m?(N.push(0,1),D.push(0,2)):(n("upgrade1").style.display="none",n("upgrade2").style.display="none",n("extraResearches").style.display="none")):i===2?(N.push(0),A.push(0,1),D.push(0,1),G.push(0,1),n("specials").style.display="none",n("resetExtraFooter").style.display="none",m&&(n("stageInfo").style.display="")):i===3?(N.push(0,1),A.push(0,1),D.push(0),G.push(0),r.debug.rankUpdated=null,n("specials").style.display="none",n("resetExtraFooter").style.display="none",n("reset0Main").style.display="",m&&(n("stageInfo").style.display="")):i===4?(N.push(0,1,2),A.push(0,1,2),D.push(0),G.push(0,1),n("stageInfo").style.display="",n("extraResearches").style.display="",n("resetExtraFooter").textContent="Galaxy"):i===5?(D.push(0),G.push(0,1,2),n("stageInfo").style.display="",m?(n("building2").style.display="",N.push(0,1),A.push(0,1),n("extraResearches").style.display="",n("special3").style.display="none"):(n("reset0Button").textContent="Requires 22 Galaxies",n("specials").style.display="none"),ms(),n("resetExtraFooter").textContent="Collapse"):i===6&&(G.push(0),n("stageInfo").style.display="",n("autoWaitMain").style.display="",n("specials").style.display="none",m?(N.push(0),A.push(0),D.push(0,1,2,3,4)):(n("reset0Main").style.display="none",n("extraResearches").style.display="none"),n("resetExtraFooter").textContent="Merge"),n("buildings").style.display="",n("building1").style.display="",n("upgrades").style.display="",n("stageResearches").style.display="",n("autoWaitInput").value=f(e.toggles.shop.wait[i],{type:"input"}),zt(!1);let V=k.buildingHTML[i],z=o.name[i],Z=o.type[i],le=o.hoverText[i];for(let $=1;$<o.maxActive[i];$++)x(`#building${$} > img`).src=`Used_art/${V[$-1]}`,x(`#building${$}Stats > h4`).textContent=z[$],n(`building${$}Name`).textContent=z[$],x(`#building${$}ProdDiv > span`).textContent=Z[$-1],n(`building${$}ProdDiv`).dataset.title=le[$-1],_($,"buildings");x("#building0Stats > h4").textContent=z[0];let dt=k.upgradeHTML[i];for(let $=0;$<h.maxActive;$++){let K=n(`upgrade${$+1}`);N.includes($)&&(K.style.display=""),K.src=`Used_art/${dt[$]}`,K.alt=h.name[$]}let Zt=k.researchHTML[i];for(let $=0;$<v.maxActive;$++){let K=n(`research${$+1}`);A.includes($)&&(K.style.display=""),K.className=Zt[$][1];let he=x(`#research${$+1} > input`);he.src=`Used_art/${Zt[$][0]}`,he.alt=v.name[$]}let es=k.researchExtraHTML[i];for(let $=0;$<S.maxActive;$++){let K=n(`researchExtra${$+1}`);D.includes($)&&(K.style.display=""),K.className=es[$][1];let he=x(`#researchExtra${$+1} > input`);he.src=`Used_art/${es[$][0]}`,he.alt=S.name[$]}x("#extraResearches > div").className=`researchesDiv ${p[1]}`;let ts=x("#extraResearches > img");ts.src=`Used_art/${p[0]}`,ts.dataset.title=`${p[2]} Researches (Special)`;for(let $=0;$<M.length;$++)G.includes($)&&(n(`footerStat${$+1}`).style.display=""),x(`#footerStat${$+1} > img`).src=`Used_art/${M[$][0]}`,x(`#footerStat${$+1} > p`).className=M[$][1],x(`#footerStat${$+1} span`).textContent=M[$][2];n("reset0Footer").textContent=k.resetHTML[i];let je=document.documentElement.style;je.setProperty("--stage-text",`var(--${a.textColor[i]}-text)`),je.setProperty("--stage-subtext",`var(--${a.textColor[i===6?3:i]}-text)`),je.setProperty("--stage-button-border",a.buttonBorder[i]),je.setProperty("--stage-image-borderColor",a.imageBorderColor[i]),je.setProperty("--image-border",`url("Used_art/Stage${i} border.png")`),q(s),P(s),b.theme===null&&Qe()};var ke={},Gs={makeAll:()=>Me(),toggleAll:()=>{r.hotkeys.last!=="toggleAll"&&(r.hotkeys.last="toggleAll",Et())},createAll:()=>Re(),toggleUpgrades:()=>{if(r.hotkeys.last==="toggleU")return;r.hotkeys.last="toggleU";let t=!1;for(let s=5;s<=8;s++)if(e.toggles.auto[s]){t=!0;break}for(let s=5;s<=8;s++)e.toggles.auto[s]=!t,_(s,"auto")},discharge:()=>void vt(),toggleDischarge:()=>{r.hotkeys.last!=="toggle1"&&(r.hotkeys.last="toggle1",_(1,"auto",!0))},vaporization:()=>{r.hotkeys.last!=="reset2"&&(r.hotkeys.last="reset2",bt())},toggleVaporization:()=>{r.hotkeys.last!=="toggle2"&&(r.hotkeys.last="toggle2",_(2,"auto",!0))},rank:()=>void St(),toggleRank:()=>{r.hotkeys.last!=="toggle3"&&(r.hotkeys.last="toggle3",_(3,"auto",!0))},collapse:()=>{r.hotkeys.last!=="reset4"&&(r.hotkeys.last="reset4",st())},toggleCollapse:()=>{r.hotkeys.last!=="toggle4"&&(r.hotkeys.last="toggle4",_(4,"auto",!0))},galaxy:()=>oe(3,5),merge:()=>{r.hotkeys.last!=="reset5"&&(r.hotkeys.last="reset5",nt())},toggleMerge:()=>{r.hotkeys.last!=="toggle9"&&(r.hotkeys.last="toggle9",_(9,"auto",!0))},nucleation:()=>{r.hotkeys.last!=="reset6"&&(r.hotkeys.last="reset6",xt())},toggleNucleation:()=>{r.hotkeys.last!=="toggle10"&&(r.hotkeys.last="toggle10",_(10,"auto",!0))},stage:()=>{if(e.inflation.vacuum||e.stage.active>=4){if(r.hotkeys.last==="reset0")return;r.hotkeys.last="reset0"}ze()},toggleStage:()=>{r.hotkeys.last!=="toggle0"&&(r.hotkeys.last="toggle0",_(0,"auto",!0))},verses:()=>{for(let t=0;t<w.verses.length;t++)ht(t)},end:()=>void Oe(),exitChallenge:()=>{r.hotkeys.last!=="exit"&&(r.hotkeys.last="exit",Be(null))},supervoid:()=>{if(r.hotkeys.last==="super"||e.stage.true<8&&!e.event)return;r.hotkeys.last="super";let t=e.challenges.super;qe(!0),t!==e.challenges.super&&U(`Toggled into the ${e.challenges.super?"Supervoid":"Void"}`)},warp:()=>gt(),pause:()=>{r.hotkeys.last!=="pause"&&(r.hotkeys.last="pause",Qt())},tabRight:()=>{r.hotkeys.last!=="tabRight"&&(r.hotkeys.last="tabRight",_t("right"))},tabLeft:()=>{r.hotkeys.last!=="tabLeft"&&(r.hotkeys.last="tabLeft",_t("left"))},subtabUp:()=>{r.hotkeys.last!=="subtabUp"&&(r.hotkeys.last="subtabUp",ct("up"))},subtabDown:()=>{r.hotkeys.last!=="subtabDown"&&(r.hotkeys.last="subtabDown",ct("down"))},stageRight:()=>{r.hotkeys.last!=="stageRight"&&(r.hotkeys.last="stageRight",Wt("right"))},stageLeft:()=>{r.hotkeys.last!=="stageLeft"&&(r.hotkeys.last="stageLeft",Wt("left"))}},Vs={makeStructure:t=>{t!==0?oe(t,e.stage.active):Me()},toggleStructure:t=>{let s=`build${t}`;r.hotkeys.last!==s&&(r.hotkeys.last=s,t===0?Et():t<w.buildings[e.stage.active].length&&_(t,"buildings",!0))},enterChallenge:t=>{let s=`chal${t}`;r.hotkeys.last!==s&&(r.hotkeys.last=s,t!==0?Be(t-1):Be(null))}},Ee=()=>{for(let s in ke)delete ke[s];let t=b.toggles[0]?0:1;for(let s in b.hotkeys){let a=b.hotkeys[s][t];a!=="None"&&(ke[a]!==void 0?b.hotkeys[s]=["None","None"]:ke[a]=s)}for(let s in b.numbers){let a=b.numbers[s];a!=="None"&&(ke[a]!==void 0?b.numbers[s]="None":ke[a]=s)}},ut=(t,s=!1)=>{let a=ke[t];return a===void 0?null:(s?b.numbers[a]="None":b.hotkeys[a]=["None","None"],a)},de=t=>t.metaKey||t.ctrlKey||t.altKey?null:t.shiftKey,hs=t=>{let{key:s,code:a}=t,o=r.hotkeys;if(t.shiftKey&&!o.shift&&(o.shift=!0,P()),t.ctrlKey&&!o.ctrl&&(o.ctrl=!0,P()),a==="Tab"||a==="Enter"||a==="Space"){if(de(t)===null)return;a==="Tab"&&(o.tab=!0),document.documentElement.classList.remove("noFocusOutline");return}else{let g=document.activeElement?.type;if(g==="text"||g==="number")return;document.documentElement.classList.add("noFocusOutline")}if(o.disabled)return;if(a==="Escape"){if(de(t)===null||k.alert[0]!==null||k.bigWindow!==null)return;let g=k.notifications;if(t.shiftKey){if(b.developerMode||g[0]===void 0)return;g[0][1](!0)}else for(let m=g.length-1;m>=0;m--)g[m][1](!0);t.preventDefault();return}else if(t.metaKey)return;let i=a.includes("Digit")||a.includes("Numpad"),l=t.ctrlKey?"Ctrl ":"";t.shiftKey&&(l+="Shift "),t.altKey&&(l+="Alt ");let u=Gs[ke[l+(i?a.replace("Digit","").replace("Numpad","Num "):b.toggles[0]?s.length===1?s.toUpperCase():s.replaceAll(/([A-Z]+)/g," $1").trimStart():s.length===1?a.replace("Key",""):a.replaceAll(/([A-Z]+)/g," $1").trimStart())]];if(u!==void 0)u(),t.preventDefault();else if(i){let g=Vs[ke[l+(a.includes("Numpad")?"Numpad":"Numbers")]];g!==void 0&&(g(Number(a.replace("Digit","").replace("Numpad",""))),t.preventDefault())}},Me=()=>{let t=e.stage.active,s=r.buildingsInfo.maxActive[t],a=r.hotkeys.shift?r.hotkeys.ctrl?100:1:r.hotkeys.ctrl?10:0;if(t===3)for(let o=1;o<s;o++)oe(o,t,a);else for(let o=s-1;o>=1;o--)oe(o,t,a)},Re=()=>{let t=e.stage.active;for(let s=0;s<r.upgradesInfo[t].maxActive;s++)W(s,t,"upgrades");for(let s=0;s<r.researchesInfo[t].maxActive;s++)W(s,t,"researches");for(let s=0;s<r.researchesExtraInfo[t].maxActive;s++)W(s,t,"researchesExtra");if(t===4||t===5)for(let s=1;s<r.elementsInfo.maxActive;s++)W(s,4,"elements")},Et=()=>{let t=e.stage.active,s=e.toggles.buildings[t],a=!1;for(let o=1;o<=Math.min(Math.max(e.ASR[t],1),r.buildingsInfo.maxActive[t]-1);o++)if(s[o]){a=!0;break}for(let o=1;o<r.buildingsInfo.maxActive[t];o++)s[o]=!a,_(o,"buildings");q()},gt=()=>{let t=6e4*(6-e.tree[0][5]);if(!(r.offline.active||e.time.offline<t)){if(e.tree[0][5]<1)return U("'Improved Offline' has to be at least level 1");e.time.offline-=t,De(6e4,!0)}},_t=t=>{let s=r.tabs.list,a=s.indexOf(r.tabs.current);if(t==="left")do a<=0?a=s.length-1:a--;while(!we(s[a]));else do a>=s.length-1?a=0:a++;while(!we(s[a]));j(s[a])},ct=t=>{let s=r.tabs.current,a=r.tabs[s].list;if(a.length<2)return;let o=a.indexOf(r.tabs[s].current);if(t==="down")do o<=0?o=a.length-1:o--;while(!we(s,a[o]));else do o>=a.length-1?o=0:o++;while(!we(s,a[o]));j(s,a[o])},Wt=t=>{let s=r.stageInfo.activeAll;if(s.length===1)return;let a=s.indexOf(e.stage.active);t==="left"?a<=0?a=s.length-1:a--:a>=s.length-1?a=0:a++,tt(s[a])},ys=t=>{if(r.hotkeys.disabled)return;let s=t.changedTouches[0].clientX-k.mobileDevice.start[0],a=t.changedTouches[0].clientY-k.mobileDevice.start[1],o=Math.abs(s);o<100||(Math.abs(a)>=100?ct(a>0?"up":"down"):o>=250?Wt(s>0?"left":"right"):_t(s>0?"left":"right"))};var b={intervals:{numbers:80,visual:800,autoSave:2e4},hotkeys:{makeAll:["M","M"],toggleAll:["Shift A","Shift A"],createAll:["U","U"],toggleUpgrades:["None","None"],discharge:["D","D"],toggleDischarge:["None","None"],vaporization:["V","V"],toggleVaporization:["None","None"],rank:["R","R"],toggleRank:["None","None"],collapse:["C","C"],toggleCollapse:["None","None"],galaxy:["G","G"],merge:["Shift M","Shift M"],toggleMerge:["None","None"],nucleation:["N","N"],toggleNucleation:["None","None"],stage:["S","S"],toggleStage:["None","None"],verses:["Shift V","Shift V"],end:["Shift B","Shift B"],exitChallenge:["Shift E","Shift E"],supervoid:["Shift S","Shift S"],warp:["Shift W","Shift W"],pause:["P","P"],tabRight:["Arrow Right","Arrow Right"],tabLeft:["Arrow Left","Arrow Left"],subtabUp:["Arrow Up","Arrow Up"],subtabDown:["Arrow Down","Arrow Down"],stageRight:["Shift Arrow Right","Shift Arrow Right"],stageLeft:["Shift Arrow Left","Shift Arrow Left"]},numbers:{makeStructure:"Numbers",toggleStructure:"Numpad",enterChallenge:"Shift Numbers"},toggles:[!1,!1,!1,!1,!1,!1,!0,!0,!1],format:[".",""],theme:null,fontSize:16,MDSettings:[!1,!1,!1],SRSettings:[!1,!1],developerMode:!1},se=(t=!1)=>{let s=F(b.hotkeys),a=new TextEncoder;for(let l in s){let u=s[l];for(let g=0;g<u.length;g++)u[g]=String.fromCharCode(...a.encode(u[g]))}let o={...b};o.hotkeys=s;let i=btoa(JSON.stringify(o));return t||localStorage.setItem(k.localStorage.settings,i),i},me=(t,s,a=!1,o=!1)=>{let i;if(s==="mobile"?i=b.MDSettings:s==="reader"?i=b.SRSettings:i=b.toggles,a){if(o)return void(async()=>{await X(`Changing this setting will reload the page, confirm?
(Game will not autosave)`)&&($e(),i[t]=!i[t],se(),window.location.reload(),ae("Awaiting game reload"))})();i[t]=!i[t],se()}let l;s==="mobile"?l=n(`MDToggle${t}`):s==="reader"?l=n(`SRToggle${t}`):l=n(`globalToggle${t}`),i[t]?(l.style.color="",l.style.borderColor="",l.textContent="ON"):(l.style.color="var(--green-text)",l.style.borderColor="forestgreen",l.textContent="OFF")},k={resetHTML:["","Discharge","Vaporization","Rank","Collapse","Merge","Nucleation"],longestBuilding:7,buildingHTML:[[],["Preon.png","Quarks.png","Particle.png","Atom.png","Molecule.png"],["Drop.png","Puddle.png","Pond.png","Lake.png","Sea.png","Ocean.png"],["Cosmic%20dust.png","Planetesimal.png","Protoplanet.png","Natural%20satellite.png","Subsatellite.png"],["Brown%20dwarf.png","Orange%20dwarf.png","Red%20supergiant.png","Blue%20hypergiant.png","Quasi%20star.png"],["Nebula.png","Star%20cluster.png","Galaxy.png"],["Dark%20planet.png"]],longestUpgrade:14,upgradeHTML:[[],["UpgradeQ1.png","UpgradeQ2.png","UpgradeQ3.png","UpgradeQ4.png","UpgradeQ5.png","UpgradeQ6.png","UpgradeQ7.png","UpgradeQ8.png","UpgradeQ9.png","UpgradeQ10.png","UpgradeQ11.png"],["UpgradeW1.png","UpgradeW2.png","UpgradeW3.png","UpgradeW4.png","UpgradeW5.png","UpgradeW6.png","UpgradeW7.png","UpgradeW8.png","UpgradeW9.png"],["UpgradeA1.png","UpgradeA2.png","UpgradeA3.png","UpgradeA4.png","UpgradeA5.png","UpgradeA6.png","UpgradeA7.png","UpgradeA8.png","UpgradeA9.png","UpgradeA10.png","UpgradeA11.png","UpgradeA12.png","UpgradeA13.png","UpgradeA14.png"],["UpgradeS1.png","UpgradeS2.png","UpgradeS3.png","UpgradeS4.png","UpgradeS5.png","Missing.png"],["UpgradeG1.png","UpgradeG2.png","UpgradeG3.png","UpgradeG4.png","UpgradeG5.png","UpgradeG6.png","UpgradeG7.png"],["UpgradeD1.png","Missing.png"]],longestResearch:9,researchHTML:[[],[["ResearchQ1.png","stage1borderImage"],["ResearchQ2.png","stage1borderImage"],["ResearchQ3.png","stage1borderImage"],["ResearchQ4.png","stage4borderImage"],["ResearchQ5.png","stage4borderImage"],["ResearchQ6.png","stage4borderImage"]],[["ResearchW1.png","stage2borderImage"],["ResearchW2.png","stage2borderImage"],["ResearchW3.png","stage2borderImage"],["ResearchW4.png","stage2borderImage"],["ResearchW5.png","stage2borderImage"],["ResearchW6.png","stage2borderImage"],["Missing.png","stage2borderImage"]],[["ResearchA1.png","stage3borderImage"],["ResearchA2.png","stage2borderImage"],["ResearchA3.png","stage3borderImage"],["ResearchA4.png","stage3borderImage"],["ResearchA5.png","stage3borderImage"],["ResearchA6.png","stage3borderImage"],["ResearchA7.png","stage1borderImage"],["ResearchA8.png","redBorderImage"],["ResearchA9.png","stage1borderImage"]],[["ResearchS1.png","stage5borderImage"],["ResearchS2.png","stage5borderImage"],["ResearchS3.png","redBorderImage"],["ResearchS4.png","stage5borderImage"],["ResearchS5.png","stage6borderImage"],["ResearchS6.png","stage4borderImage"]],[["ResearchG1.png","stage1borderImage"],["ResearchG2.png","stage6borderImage"],["ResearchG3.png","stage6borderImage"],["ResearchG4.png","stage4borderImage"],["Missing.png","redBorderImage"]],[["ResearchD1.png","stage3borderImage"],["ResearchD2.png","stage2borderImage"],["ResearchD3.png","stage3borderImage"],["ResearchD4.png","stage3borderImage"]]],longestResearchExtra:6,researchExtraDivHTML:[[],["Energy%20Researches.png","stage4borderImage","Energy"],["Cloud%20Researches.png","stage2borderImage","Clouds"],["Rank%20Researches.png","stage6borderImage","Rank"],["Collapse%20Researches.png","stage6borderImage","Collapse"],["Galaxy%20Researches.png","stage3borderImage","Galaxy"],["Missing.png","stage3borderImage","Dark energy"]],researchExtraHTML:[[],[["ResearchEnergy1.png","stage1borderImage"],["ResearchEnergy2.png","stage5borderImage"],["ResearchEnergy3.png","stage3borderImage"],["ResearchEnergy4.png","stage1borderImage"],["ResearchEnergy5.png","stage6borderImage"],["ResearchEnergy6.png","stage1borderImage"]],[["ResearchClouds1.png","stage3borderImage"],["ResearchClouds2.png","stage2borderImage"],["ResearchClouds3.png","stage4borderImage"],["ResearchClouds4.png","stage2borderImage"],["ResearchClouds5.png","stage2borderImage"]],[["ResearchRank1.png","stage3borderImage"],["ResearchRank2.png","stage3borderImage"],["ResearchRank3.png","stage3borderImage"],["ResearchRank4.png","stage2borderImage"],["ResearchRank5.png","stage2borderImage"],["ResearchRank6.png","stage6borderImage"]],[["ResearchCollapse1.png","stage6borderImage"],["ResearchCollapse2.png","redBorderImage"],["ResearchCollapse3.png","stage1borderImage"],["ResearchCollapse4.png","stage6borderImage"],["Missing.png","redBorderImage"]],[["ResearchGalaxy1.png","stage3borderImage"],["ResearchGalaxy2.png","brownBorderImage"],["ResearchGalaxy3.png","stage3borderImage"],["ResearchGalaxy4.png","brownBorderImage"],["Missing.png","redBorderImage"],["Missing.png","redBorderImage"]],[["ResearchDark1.png","stage3borderImage"],["ResearchDark2.png","stage6borderImage"],["ResearchDark3.png","stage3borderImage"],["ResearchDark4.png","stage3borderImage"],["ResearchDark5.png","stage6borderImage"]]],longestFooterStats:3,footerStatsHTML:[[],[["Energy%20mass.png","stage1borderImage cyanText","Mass"],["Energy.png","stage4borderImage orangeText","Energy"]],[["Water.png","stage2borderImage blueText","Moles"],["Drop.png","stage2borderImage blueText","Drops"],["Clouds.png","stage3borderImage grayText","Clouds"]],[["Mass.png","stage3borderImage grayText","Mass"]],[["Elements.png","stage4borderImage orangeText","Stardust"],["Main_sequence%20mass.png","stage1borderImage cyanText","Mass"]],[["Elements.png","stage4borderImage orangeText","Stardust"],["Main_sequence%20mass.png","stage1borderImage cyanText","Mass"],["Stars.png","redBorderImage redText","Stars"]],[["Dark%20matter.png","stage3borderImage grayText","Matter"],["Dark%20energy.png","stage3borderImage grayText","Energy"],["Dark%20fluid.png","stage6borderImage darkvioletText","Fluid"]]],mobileDevice:{start:[0,0]},localStorage:{main:"testing_save",settings:"fundamentalSettings"},cache:{imagesDiv:document.createElement("div"),innerHTML:new Map,idMap:new Map,classMap:new Map,queryMap:new Map},errorCooldowns:[],notifications:[],alert:[null,null],hoverText:null,bigWindow:null,styleSheet:document.createElement("style")},Kt=()=>{if(r.offline.active||r.paused){r.offline.cacheUpdate=!0;return}let{footerStatsHTML:t,buildingHTML:s,upgradeHTML:a,researchHTML:o,researchExtraHTML:i,researchExtraDivHTML:l}=k,u="";for(let g=1;g<=6;g++){for(let m=0;m<t[g].length;m++){if(g===2){if(m===1)continue}else if(g===5&&m<2)continue;u+=`<img src="Used_art/${t[g][m][0]}" loading="lazy">`}for(let m=0;m<s[g].length;m++)u+=`<img src="Used_art/${s[g][m]}" loading="lazy">`;for(let m=0;m<a[g].length;m++)u+=`<img src="Used_art/${a[g][m]}" loading="lazy">`;for(let m=0;m<o[g].length;m++)u+=`<img src="Used_art/${o[g][m][0]}" loading="lazy">`;for(let m=0;m<i[g].length;m++)u+=`<img src="Used_art/${i[g][m][0]}" loading="lazy">`;u+=`<img src="Used_art/${l[g][0]}" loading="lazy">`,u+=`<img src="Used_art/Stage${g}%20border.png" loading="lazy">`}for(let g of r.accretionInfo.rankImage)u+=`<img src="Used_art/${g}" loading="lazy">`;for(let g of["Red%20giant","White%20dwarf","Neutron%20star","Quark%20star","Galaxy%20group"])u+=`<img src="Used_art/${g}.png" loading="lazy">`;k.cache.imagesDiv.innerHTML=u,setTimeout(Kt,36e5)},Qe=(t="current")=>{t!=="current"?(t!==null&&(e.stage.true<t&&(t=null),t===6&&e.stage.true<7&&(t=null)),n(`switchTheme${b.theme??0}`).style.textDecoration="",b.theme=t,se(),n("currentTheme").textContent=t===null?"Default":r.stageInfo.word[t],n(`switchTheme${t??0}`).style.textDecoration="underline"):t=b.theme;let s=["upgrade","element"],a={"--background-color":"#030012","--window-color":"#12121c","--window-border":"cornflowerblue","--footer-color":"darkblue","--button-color":"mediumblue","--button-border":"darkcyan","--button-hover":"#2626ff","--building-afford":"#a90000","--tab-active":"#8b00c5","--tab-elements":"#9f6700","--tab-strangeness":"#00b100","--tab-inflation":"#6c1ad1","--hollow-hover":"#170089","--footerButton-hover":"#181818","--input-border":"#831aa5","--input-text":"#cf71ff","--button-text":"#e3e3e3","--main-text":"var(--cyan-text)","--white-text":"white","--blue-text":"dodgerblue","--orange-text":"darkorange","--gray-text":"#8f8f8f","--orchid-text":"#e14bdb","--darkorchid-text":"#bd24ef","--darkviolet-text":"#8b3cec","--red-text":"#eb0000","--green-text":"#00e900","--yellow-text":"#fafa00"};switch(t??e.stage.active){case 1:for(let i of s)n(`${i}Text`).style.color="var(--darkorchid-text)",n(`${i}Effect`).style.color="var(--blue-text)",n(`${i}Cost`).style.color="var(--orange-text)";a["--tab-inflation"]="var(--tab-active)";break;case 2:for(let i of s)n(`${i}Text`).style.color="var(--white-text)",n(`${i}Effect`).style.color="var(--green-text)",n(`${i}Cost`).style.color="var(--cyan-text)";a["--background-color"]="#070026",a["--window-color"]="#000052",a["--window-border"]="blue",a["--footer-color"]="#0000db",a["--button-color"]="#0000eb",a["--button-border"]="#386cc7",a["--button-hover"]="#2929ff",a["--building-afford"]="#b30000",a["--tab-active"]="#990000",a["--hollow-hover"]="#2400d7",a["--input-border"]="#4747ff",a["--input-text"]="dodgerblue",a["--main-text"]="var(--blue-text)",a["--gray-text"]="#9b9b9b",a["--darkorchid-text"]="#c71bff",a["--darkviolet-text"]="#8766ff",a["--green-text"]="#82cb3b",a["--red-text"]="#f70000";break;case 3:for(let i of s)n(`${i}Text`).style.color="var(--orange-text)",n(`${i}Effect`).style.color="var(--blue-text)",n(`${i}Cost`).style.color="var(--green-text)";a["--background-color"]="#000804",a["--window-color"]="#2e1200",a["--window-border"]="#31373e",a["--footer-color"]="#221a00",a["--button-color"]="#291344",a["--button-border"]="#424242",a["--button-hover"]="#382055",a["--building-afford"]="#9e0000",a["--tab-active"]="#8d4c00",a["--tab-elements"]="var(--tab-active)",a["--hollow-hover"]="#5a2100",a["--footerButton-hover"]="#1a1a1a",a["--input-border"]="#8b4a00",a["--input-text"]="#e77e00",a["--main-text"]="var(--gray-text)",a["--white-text"]="#dfdfdf",a["--orange-text"]="#f58600",a["--green-text"]="#00db00";break;case 4:for(let i of s)n(`${i}Text`).style.color="var(--blue-text)",n(`${i}Effect`).style.color="var(--green-text)",n(`${i}Cost`).style.color="var(--cyan-text)";a["--background-color"]="#140e04",a["--window-color"]="#4e0000",a["--window-border"]="#894800",a["--footer-color"]="#4e0505",a["--button-color"]="#6a3700",a["--button-border"]="#a35700",a["--button-hover"]="#8a4700",a["--building-afford"]="#007f95",a["--tab-active"]="#008297",a["--tab-elements"]="var(--tab-active)",a["--tab-strangeness"]="#00a500",a["--hollow-hover"]="#605100",a["--footerButton-hover"]="#212121",a["--input-border"]="#008399",a["--input-text"]="#05c3c3",a["--button-text"]="#d9d900",a["--main-text"]="var(--orange-text)",a["--white-text"]="#e5e500",a["--blue-text"]="#2e96ff",a["--gray-text"]="#8b8b8b",a["--darkorchid-text"]="#c71bff",a["--darkviolet-text"]="#9457ff",a["--red-text"]="red",a["--green-text"]="#00e600",a["--yellow-text"]="var(--green-text)";break;case 5:for(let i of s)n(`${i}Text`).style.color="var(--orange-text)",n(`${i}Effect`).style.color="var(--green-text)",n(`${i}Cost`).style.color="var(--red-text)";a["--background-color"]="#060010",a["--window-color"]="#001d42",a["--window-border"]="#35466e",a["--footer-color"]="#2f005c",a["--button-color"]="#4a008f",a["--button-border"]="#8f004c",a["--button-hover"]="#6800d6",a["--building-afford"]="#8603ff",a["--tab-active"]="#8500ff",a["--tab-inflation"]="var(--tab-active)",a["--hollow-hover"]="#3b0080",a["--footerButton-hover"]="#1a1a1a",a["--input-border"]="#3656a1",a["--input-text"]="#6a88cd",a["--button-text"]="#fc9cfc",a["--main-text"]="var(--darkorchid-text)",a["--white-text"]="#ff79ff",a["--orchid-text"]="#ff00f4",a["--darkorchid-text"]="#c000ff",a["--darkviolet-text"]="#8861ff",a["--yellow-text"]="var(--darkviolet-text)";break;case 6:for(let i of s)n(`${i}Text`).style.color="var(--orchid-text)",n(`${i}Effect`).style.color="var(--orange-text)",n(`${i}Cost`).style.color="var(--red-text)";a["--background-color"]="black",a["--window-color"]="#01003c",a["--window-border"]="#6500e0",a["--footer-color"]="#00007a",a["--button-color"]="#2b0095",a["--button-border"]="#6c1ad1",a["--button-hover"]="#3d00d6",a["--building-afford"]="#b30000",a["--tab-active"]="#8d0000",a["--tab-inflation"]="var(--tab-active)",a["--hollow-hover"]="#490070",a["--input-border"]="#a50000",a["--input-text"]="red",a["--button-text"]="#bfbdff",a["--main-text"]="var(--darkviolet-text)",a["--white-text"]="#aba8ff",a["--gray-text"]="#95979d",a["--darkviolet-text"]="#8157ff",a["--red-text"]="red",a["--yellow-text"]="var(--green-text)"}let o=document.documentElement.style;o.setProperty("--transition-all","500ms");for(let i in a)o.setProperty(i,a[i]);setTimeout(()=>{o.setProperty("--transition-all","0ms")},500)},ae=async(t,s=0)=>await new Promise(a=>{if(k.alert[0]!==null)if(k.alert[0]<s)k.alert[1](),U(`Alert has been replaced with higher priority one
Old text: ${n("alertText").textContent}`);else{a(),U(`Another Alert is already active
Missed text: ${t}`);return}n("alertText").textContent=t;let o=document.documentElement,i=n("alertMain"),l=n("alertConfirm");i.style.display="",o.classList.remove("noTextSelection");let u=document.activeElement;l.focus();let g=async c=>{let d=de(c);if(d===null)return;let p=c.code;if(p==="Escape"||p==="Enter"||p==="Space"){if(d)return;m()}else if(p==="Tab")l.focus();else return;c.preventDefault()},m=()=>{b.toggles[2]||o.classList.add("noTextSelection"),i.style.display="none",o.removeEventListener("keydown",g),l.removeEventListener("click",m),k.alert=[null,null],u?.focus(),a()};k.alert=[s,m],o.addEventListener("keydown",g),l.addEventListener("click",m)}),X=async(t,s=0)=>await new Promise(a=>{if(k.alert[0]!==null)if(k.alert[0]<s)k.alert[1](),U(`Alert has been replaced with higher priority one
Old text: ${n("alertText").textContent}`);else{a(!1),U(`Another Alert is already active
Missed text: ${t}`);return}n("alertText").textContent=t;let o=document.documentElement,i=n("alertMain"),l=n("alertCancel"),u=n("alertConfirm");i.style.display="",l.style.display="",o.classList.remove("noTextSelection");let g=document.activeElement;(b.toggles[8]?l:u).focus();let m=!1,c=()=>{m=!0,p()},d=h=>{let v=de(h);if(v===null)return;let S=h.code;if(S==="Escape"){if(v)return;p()}else if(S==="Enter"||S==="Space"){if(v||document.activeElement===l)return;c()}else if(S==="Tab")(document.activeElement===l?u:l).focus();else return;h.preventDefault()},p=()=>{b.toggles[2]||o.classList.add("noTextSelection"),i.style.display="none",l.style.display="none",o.removeEventListener("keydown",d),u.removeEventListener("click",c),l.removeEventListener("click",p),k.alert=[null,null],g?.focus(),a(m)};k.alert=[s,p],o.addEventListener("keydown",d),u.addEventListener("click",c),l.addEventListener("click",p)}),Mt=async(t,s="",a=0)=>await new Promise(o=>{if(k.alert[0]!==null)if(k.alert[0]<a)k.alert[1](),U(`Alert has been replaced with higher priority one
Old text: ${n("alertText").textContent}`);else{o(null),U(`Another Alert is already active
Missed text: ${t}`);return}n("alertText").textContent=t;let i=document.documentElement,l=n("alertMain"),u=n("alertInput"),g=n("alertCancel"),m=n("alertConfirm");l.style.display="",g.style.display="",u.style.display="",i.classList.remove("noTextSelection"),u.placeholder=s,u.value="";let c=document.activeElement;u.focus();let d=null,p=()=>{d=u.value===""?u.placeholder:u.value,v()},h=S=>{let M=de(S);if(M===null)return;let N=S.code;if(N==="Escape"){if(M)return;v()}else if(N==="Enter"||N==="Space"){let A=document.activeElement;if(M||N==="Space"&&A===u||A===g)return;p()}else if(N==="Tab"){let A=b.toggles[8]?m:g;if(M&&document.activeElement===u)A.focus();else if(!M&&document.activeElement===A)u.focus();else return}else return;S.preventDefault()},v=()=>{b.toggles[2]||i.classList.add("noTextSelection"),l.style.display="none",g.style.display="none",u.style.display="none",i.removeEventListener("keydown",h),m.removeEventListener("click",p),g.removeEventListener("click",v),k.alert=[null,null],c?.focus(),o(d)};k.alert=[a,v],i.addEventListener("keydown",h),m.addEventListener("click",p),g.addEventListener("click",v)}),U=t=>{let s=k.notifications,a;for(let o=0;o<s.length;o++)if(s[o][0]===t){a=o;break}if(a===void 0){let o=1,i,l=document.createElement("p");l.textContent=`${t}${o>1?` | x${o}`:""}`,l.style.animation="hideX 800ms ease-in-out reverse",l.style.pointerEvents="none",b.SRSettings[0]&&(l.role="alert"),n("notifications").append(l);let u=s[s.push([t,(c=!1)=>{if(c){l.style.animation===""&&g();return}l.textContent=`${t} | x${++o}`,i!==void 0&&(clearTimeout(i),i=setTimeout(g,7200))}])-1],g=()=>{let c=s.indexOf(u);c!==-1&&s.splice(c,1),l.removeEventListener("click",m),l.style.animation="hideX 800ms ease-in-out forwards",l.style.pointerEvents="none",setTimeout(()=>l.remove(),800),clearTimeout(i)},m=()=>{if(r.hotkeys.shift)return g();for(let c=s.length-1;c>=0;c--)s[c][1](!0)};setTimeout(()=>{l.style.animation="",l.style.pointerEvents="",i=setTimeout(g,7200),l.addEventListener("click",m)},800)}else s[a][1]()},Ie=t=>{let s=k.errorCooldowns;s.includes(t)||(U(t),s.push(t),setTimeout(()=>{let a=s.indexOf(t);a!==-1&&s.splice(a,1)},2e4))},zt=(t=!0)=>{for(let a=1;a<=3;a++){let o=x(`#special${a} > p`);k.cache.innerHTML.set(o,""),o.style.minWidth=""}for(let a=0;a<r.researchesInfo[e.stage.active].maxActive;a++){let o=x(`#research${a+1} span`);k.cache.innerHTML.set(o,""),o.style.minWidth=""}for(let a=0;a<r.researchesExtraInfo[e.stage.active].maxActive;a++){let o=x(`#researchExtra${a+1} span`);k.cache.innerHTML.set(o,""),o.style.minWidth=""}if(!t)return;let s=n("milestonesMultiline").parentElement;k.cache.innerHTML.set(s,""),s.style.minHeight=""},jt=(t=!1)=>{let s=n("customFontSize"),a=Math.min(Math.max(t?b.fontSize:s.value===""?16:Math.floor(Number(s.value)*100)/100,12),24);t||(b.fontSize=a,se(),zt()),document.documentElement.style.fontSize=a===16?"":`${a}px`,s.value=`${a}`,n("phoneStyle").media=`screen and (max-width: ${893*a/16+32}px)`,n("miniPhoneStyle").media=`screen and (max-width: ${362*a/16+32}px)`},Jt=t=>{let s=t?n("decimalPoint"):n("thousandSeparator"),a=s.value.replace(" ","\xA0");(![".","\xB7",",","\xA0","_","'",'"',"`","|"].includes(a)||b.format[t?1:0]===a)&&(t&&b.format[1]==="."&&(n("thousandSeparator").value="",b.format[1]=""),a=t?".":"",s.value=a),b.format[t?0:1]=a,se()},ot=t=>{n(`strangenessSection${r.debug.MDStrangePage}`).style.display="none",n(`strangenessSection${t}`).style.display="",r.debug.MDStrangePage=t},vs=async()=>{let t=e.stage.true>=9?e.event?13:12:e.stage.true===8?e.event?12:11:e.stage.true===7?e.event?10:9:e.stage.true===6?e.event?8:e.stage.resets>=1?7:6:e.stage.true-(e.event?0:1);if(t<1)return void ae("There are no unlocked events");let s=`Which event do you want to see again?
Event 1: Stage reset`;t>=2&&(s+=`
Event 2: Clouds softcap`),t>=3&&(s+=`
Event 3: New Rank`),t>=4&&(s+=`
Event 4: New Elements`),t>=5&&(s+=`
Event 5: Intergalactic`),t>=6&&(s+=`
Event 6: True Vacuum`),t>=7&&(s+=`
Event 7: Void unlocked`),t>=8&&(s+=`
Event 8: First Merge`),t>=9&&(s+=`
Event 9: Inflation`),t>=10&&(s+=`
Event 10: Universal End`),t>=11&&(s+=`
Event 11: Stability unlocked`),t>=12&&(s+=`
Event 12: Better End`),t>=13&&(s+=`
Event 13: More Universes`);let a=Number(await Mt(s,`${t}`));if(!(a<=0||!isFinite(a))){if(a>t)return void ae("That event is not unlocked");te(a)}},te=(t,s=!0)=>{if(r.offline.active||k.alert[0]!==null)return;s||(e.event=!0);let a="No such event.";return t===1?a="A new reset tier has been unlocked. It will allow the creation of higher tier Structures, but for the price of everything else.":t===2?a=`Cloud density is too high... Any new Clouds past ${f(1e4)} will be weaker due to the softcap.`:t===3?(s||(B.rankInformation(),r.debug.rankUpdated=null),a="Cannot gain any more Mass with the current Rank. A new one has been unlocked, but reaching it will softcap the Mass production."):t===4?a="That last explosion not only created the first Neutron stars, but also unlocked new Elements through Supernova nucleosynthesis.":t===5?(s||J(!1),a=`There are no Structures in Intergalactic yet, but knowledge for their creation can be found within the previous Stages. Stage resets and exports will now award Strange quarks, and '[26] Iron' will improve Stage reset reward based on total produced Stardust.
(Intergalactic Stars are combined Interstellar Stars. Export rewards are based on highest reset value, that stored value will decrease by claimed amount)`):t===6?a="As Galaxies began to Merge, their combined Gravity pushed Vacuum out of its local minimum into a more stable global minimum. New forces and Structures are expected within this new and true Vacuum state.":t===7?a="With Vacuum decaying, the remaining matter had rearranged itself, which had lead to the formation of the 'Void'. Check it out in the 'Advanced' subtab.":t===8?(s||setTimeout(()=>{Q(6,e.stage.active),J(!0)}),a=`As Galaxies began to Merge, their combined Gravity started forming an even bigger Structure \u2012 the 'Universe'. Will need to maximize Galaxies before every Merge to get enough Score to create it.
(Merge reset can only be done a limited amount of times per Stage reset)`):t===9?a=`Now that current Universe is finished, it's time to Inflate a new one and so to unlock the 'Inflation' tab.
(Universes only use specialized hotkeys. Also 'Nucleosynthesis' now unlocks more Elements based on self-made Universes)`:t===10?(s||fe(),a=`Unlocked ability to End current Universes through basic End reset \u2012 'Big Crunch', also unlocked harder version of Void \u2012 'Supervoid' which is immune to End resets.
(Will need to click the 'Void' button to toggle into Supervoid. End reset reward is higher if done from true Vacuum)`):t===11?a="After so many Universe resets, false Vacuum had became at the same time more and less stable, this had unlocked a new Challenge \u2012 'Vacuum stability'.":t===12?a="Big Rip unlocked placeholder text.":t===13&&(a="Void Universe placeholder text."),s||(a+=`

(Can be viewed again with 'Events' button in Settings tab)`),void ae(a)},bs=t=>{if(n("closeBigWindow",!0)===null&&(n("bigWindow").innerHTML='<article role="dialog" aria-modal="false"><button type="button" id="closeBigWindow">Close</button></article>',k.styleSheet.textContent+=`#bigWindow > article { display: flex; flex-direction: column; align-items: center; width: 38rem; max-width: 80vw; height: 42rem; max-height: 90vh; background-color: var(--window-color); border: 3px solid var(--window-border); border-radius: 12px; padding: 1em 1em 0.8em; row-gap: 1em; }
            #bigWindow > article > button { flex-shrink: 0; border-radius: 4px; width: 6em; font-size: 0.92em; }
            #bigWindow > article > div { width: 100%; height: 100%; overflow-y: auto; overscroll-behavior-y: none; } `),n(t,!0)!==null)return null;let s=document.createElement("div");return x("#bigWindow > article").prepend(s),s.id=t,s},Ss=(t,s=null)=>{let a=document.documentElement,o=n("closeBigWindow"),i=n("bigWindow");s===null&&(s=o);let l=g=>{if(k.alert[0]!==null||de(g)!==!1)return;let m=g.code;(s===o?m==="Escape"||m==="Enter"||m==="Space":!r.hotkeys.disabled&&m==="Escape"||(m==="Enter"||m==="Space")&&document.activeElement===o)&&(g.preventDefault(),u())},u=()=>{k.bigWindow=null,i.style.display="none",t.style.display="none",a.removeEventListener("keydown",l),o.removeEventListener("click",u)};a.addEventListener("keydown",l),o.addEventListener("click",u),t.style.display="",i.style.display="",s.focus()},xs=()=>{if(k.bigWindow!==null)return;let t=bs("versionHTML");t!==null&&(t.innerHTML=`${r.lastUpdate!==null?`<h5><span class="bigWord">Last update:</span> <span class="whiteText">${new Date(r.lastUpdate).toLocaleString()}</span></h5><br>`:""}
        <h6>v0.2.8</h6><p>- Abyss full rebalance and End reset rework
- Auto Stage now has different modes
- Max export rewars is now 12 hours
- Removed log
<a href="https://docs.google.com/document/d/1HsAhoa31UsRFGK3BULeXMKHN9exUIIQ_UveKwj2EuMY/edit?usp=sharing" target="_blank" rel="noopener noreferrer">Full changelog</a></p>
        <h6>v0.2.7</h6><p>- Small speed up to Universes
- Stage resets now save peak Strange quarks</p>
        <h6>v0.2.6</h6><p>- New content (Big Rip)
- Mobile shorcuts are now available outside of related support
- Ability to change number hotkeys and use numbers for other hotkeys
- Create all Upgrades button
- Improved hover text

- Added hotkeys for toggling autos</p>
        <h6>v0.2.5</h6><p>- Abyss rework
- New (second) Challenge
- Global footer stats
- Small visual improvements
- Improved swiping hotkeys for Phones</p>
        <h6>v0.2.4</h6><p>- Offline ticks are now as effective as Online
- Inflation loadouts

- Added the log
- Minor Strangeness rebalance</p>
        <h6>v0.2.3</h6><p>- Supervoid rework
- Abyss small rebalance</p>
        <h6>v0.2.2</h6><p>- New content (Supervoid)
- Entering Void now saves the game to load it after exiting</p>
        <h6>v0.2.1</h6><p>- New content (Abyss)
- Full game rebalance
- Custom hotkeys
- Updated supports
- Many small changes and additions</p>
        <h6>v0.2.0</h6><p>- Reworked balance for all Stages past first reset cycle
- Many quality of life additions
- Most of settings are now saved separate from save file
- Some more work on Mobile device support</p>
        <h6>v0.1.9</h6><p>- More true Vacuum balance
- Reworked time related formats
- Offline time reworked</p>
        <h6>v0.1.8</h6><p>- True Vacuum small balance changes
- Upgrades and Researches merged
- Copy to the clipboard, load from string save file options</p>
        <h6>v0.1.7</h6><p>- New content (Void)
- Further balance changes</p>
        <h6>v0.1.6</h6><p>- Massive rebalance and reworks for all Stages</p>
        <h6>v0.1.5</h6><p>- True Vacuum minor balance
- Images no longer unload
- Screen reader support reworked</p>
        <h6>v0.1.4</h6><p>- Custom scrolls
- Notifications</p>
        <h6>v0.1.3</h6><p>- True Vacuum balance changes
- Submerged Stage minor balance
- Replay event button

- History for Stage resets</p>
        <h6>v0.1.2</h6><p>- New content (Vacuum)
- Version window
- Permanently removed text movement</p>
        <h6>v0.1.1</h6><p>- More balance changes for late game</p>
        <h6>v0.1.0</h6><p>- New content (Intergalactic)
- Balance changes for late game</p>
        <h6>v0.0.9</h6><p>- New content (Milestones)
- More Interstellar and late game balance</p>
        <h6>v0.0.8</h6><p>- Minor speed up to all Stages past Microworld</p>
        <h6>v0.0.7</h6><p>- New content (Strangeness)
- Microworld Stage rework

- Stats for the Save file name</p>
        <h6>v0.0.6</h6><p>- Added hotkeys list

- Option to remove text movement
- Ability to rename the save file</p>
        <h6>v0.0.5</h6><p>- New content (Interstellar)
- Basic loading screen

- Added hotkeys</p>
        <h6>v0.0.4</h6><p>- Speed up to all Stages
- Basic events

- Added numbers format</p>
        <h6>v0.0.3</h6><p>- New content (Accretion)
- Submerged Stage extended</p>
        <h6>v0.0.2</h6><p>- Stats subtab</p>
        <h6>v0.0.1</h6><p>- Submerged Stage rework

- Mobile device support</p>
        <h6>v0.0.0</h6><p>- First published version

- Submerged Stage placeholder</p>`,k.styleSheet.textContent+=`#versionHTML h6 { font-size: 1.18em; }
            #versionHTML p { line-height: 1.3em; white-space: pre-line; color: var(--white-text); margin-top: 0.2em; margin-bottom: 1.4em; }
            #versionHTML p:last-of-type { margin-bottom: 0; } `),k.bigWindow="version",Ss(n("versionHTML")),x("#bigWindow > article").ariaLabel="Versions menu"},ws=()=>{if(k.bigWindow!==null)return;let t=bs("hotkeysHTML");if(t!==null){t.innerHTML=`<h3 id="hotkeysMessage" class="bigWord" aria-live="assertive">Highlighted hotkeys can be modified</h3>
        ${b.MDSettings[0]?`<p>Left or Right swipe \u2012 <span class="whiteText">change current tab</span></p>
        <p>Diagonal Down or Up swipe \u2012 <span class="whiteText">change current subtab</span></p>
        <p id="stageSwipe">Long Left or Right swipe \u2012 <span class="whiteText">change current active Stage</span></p>`:""}
        <label id="tabRightHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">change tab to the next one</span></label>
        <label id="tabLeftHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">change tab to the previous one</span></label>
        <label id="subtabUpHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">change subtab to the next one</span></label>
        <label id="subtabDownHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">change subtab to the previous one</span></label>
        <label id="stageRightHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">change active Stage to the next one</span></label>
        <label id="stageLeftHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">change active Stage to the previous one</span></label>
        <label id="makeStructureHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">make a Structure</span></label>
        <p id="makeAllHotkey"><span></span> <span class="whiteText">or</span> <label><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">make all Structures</span></label></p>
        <label id="enterChallengeHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">enter the Challenge</span></label>
        <p id="exitChallengeHotkey"><span></span> <span class="whiteText">or</span> <label><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">exit out of the current Challenge</span></label></p>
        <div>
            <label id="createAllHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Upgrades</span></label>
            <label id="dischargeHotkey" class="orangeText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Discharge</span></label>
            <label id="vaporizationHotkey" class="blueText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Vaporization</span></label>
            <label id="rankHotkey" class="darkorchidText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Rank</span></label>
            <label id="collapseHotkey" class="orchidText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Collapse</span></label>
            <label id="galaxyHotkey" class="grayText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Galaxy</span></label>
            <label id="mergeHotkey" class="darkvioletText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Merge</span></label>
            <label id="nucleationHotkey" class="orangeText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Nucleation</span></label>
            <label id="stageHotkey" class="stageText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Stage</span></label>
            <label id="versesHotkey" class="darkvioletText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Verses</span></label>
            <label id="endHotkey" class="redText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">End</span></label>
            <label id="supervoidHotkey" class="darkvioletText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Supervoid</span></label>
            <label id="warpHotkey" class="blueText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Warp</span></label>
            <label id="pauseHotkey" class="grayText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">pause</span></label>
        </div>
        <p>Enter <span class="whiteText">or</span> Space \u2012 <span class="whiteText">click selected HTML Element or confirm Alert</span></p>
        <p>Escape \u2012 <span class="whiteText">cancel changing the hotkey, close Alert or Notification</span></p>
        <p>Tab <span class="whiteText">and</span> Shift Tab \u2012 <span class="whiteText">select another HTML Element</span></p>
        <p id="autoTogglesHeader" class="bigWord">Auto toggles</p>
        <label id="toggleStructureHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">toggle auto Structure</span></label>
        <p id="toggleAllHotkey"><span></span> <span class="whiteText">or</span> <label><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">toggle all auto Structures</span></label></p>
        <div>
            <label id="toggleUpgradesHotkey"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Upgrades</span></label>
            <label id="toggleDischargeHotkey" class="orangeText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Discharge</span></label>
            <label id="toggleVaporizationHotkey" class="blueText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Vaporization</span></label>
            <label id="toggleRankHotkey" class="darkorchidText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Rank</span></label>
            <label id="toggleCollapseHotkey" class="orchidText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Collapse</span></label>
            <label id="toggleMergeHotkey" class="darkvioletText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Merge</span></label>
            <label id="toggleNucleationHotkey" class="orangeText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Nucleation</span></label>
            <label id="toggleStageHotkey" class="stageText"><button type="button" class="selectBtn"></button> \u2012 <span class="whiteText">Stage</span></label>
        </div>
        <p>Holding Enter on last selected button will repeatedly press it, also works with Mouse and Touch events on some buttons</p>
        <p>Numlock being ON can break Numpad hotkeys</p>
        <p>Shift clicking the hotkey will remove it</p>
        <label id="hotkeysToggleLabel" title="Turn ON, if using non-QWERTY layout keyboard">Language dependant hotkeys </label>
        <button type="button" id="restoreHotkeys" class="selectBtn">Restore default hotkeys values</button>`;let s=n("globalToggle0");n("hotkeysToggleLabel").append(s),s.style.display="",k.styleSheet.textContent+=`#hotkeysHTML { display: flex; flex-direction: column; align-items: center; row-gap: 0.2em; }
            #hotkeysHTML > div { display: grid; grid-template-columns: 1fr 1fr 1fr; width: 100%; gap: 0.3em; }
            #hotkeysHTML > div label { justify-self: center; width: max-content; } `;let a=async l=>await new Promise(u=>{n("hotkeysMessage").textContent="Awaiting new value for the hotkey";let g=document.documentElement,m=null,c=async h=>{let{key:v,code:S}=h;if(S==="Tab"||S==="Enter"||S==="Space")return;if(h.preventDefault(),S==="Escape")return p();if(v==="Control"||v==="Shift"||v==="Alt")return;if(v==="Meta"||h.metaKey){n("hotkeysMessage").textContent="Meta isn't allowed";return}let M=h.ctrlKey?"Ctrl ":"";if(h.shiftKey&&(M+="Shift "),h.altKey&&(M+="Alt "),l)if(S.includes("Digit")||S.includes("Numpad"))m=M+(S.includes("Numpad")?"Numpad":"Numbers");else{n("hotkeysMessage").textContent="Only numbers can be used here";return}else if(S.includes("Digit")||S.includes("Numpad")){let N=M+S.replace("Digit","").replace("Numpad","Num ");m=[N,N]}else m=[v.length===1?v.toUpperCase():v.replaceAll(/([A-Z]+)/g," $1").trimStart(),v.length===1?S.replace("Key",""):S.replaceAll(/([A-Z]+)/g," $1").trimStart()],m[0]!==""?m[0]=M+m[0]:m[0]="None",m[1]!==""?m[1]=M+m[1]:m[1]="None";p()},d=()=>{r.hotkeys.disabled=!1,p(!1)},p=(h=!0)=>{g.removeEventListener("keydown",c),g.removeEventListener("click",d,{capture:!0}),h&&g.addEventListener("keyup",()=>{r.hotkeys.disabled=!1},{once:!0}),u(m)};r.hotkeys.disabled=!0,g.addEventListener("keydown",c),g.addEventListener("click",d,{capture:!0})}),o=b.toggles[0]?0:1;for(let l in ie.hotkeys){let u=x(`#${l}Hotkey button`);u.textContent=b.hotkeys[l][o],u.addEventListener("click",async g=>{if(g.shiftKey){ut(b.hotkeys[l][b.toggles[0]?0:1])!==null&&(u.textContent="None",Ee(),se());return}u.style.borderBottomStyle="dashed";let m=await a(!1);if(m!==null){let c=b.toggles[0]?0:1,d=ut(m[c]);d!==null&&(x(`#${d}Hotkey button`).textContent="None"),u.textContent=m[c],b.hotkeys[l]=m,Ee(),se()}u.style.borderBottomStyle="",n("hotkeysMessage").textContent="Highlighted hotkeys can be modified"})}let i={makeStructure:"makeAll",toggleStructure:"toggleAll",enterChallenge:"exitChallenge"};for(let l in ie.numbers){let u=x(`#${l}Hotkey button`);u.textContent=b.numbers[l],x(`#${i[l]}Hotkey span`).textContent=b.numbers[l].replace("Numbers","0").replace("Numpad","Num 0"),u.addEventListener("click",async g=>{if(g.shiftKey){ut(b.numbers[l],!0)!==null&&(u.textContent="None",Ee(),se());return}u.style.borderBottomStyle="dashed";let m=await a(!0);if(m!==null){let c=ut(m,!0);c!==null&&(x(`#${c}Hotkey button`).textContent="None",x(`#${i[c]}Hotkey span`).textContent="None"),u.textContent=m,x(`#${i[l]}Hotkey span`).textContent=m.replace("Numbers","0").replace("Numpad","Num 0"),b.numbers[l]=m,Ee(),se()}u.style.borderBottomStyle="",n("hotkeysMessage").textContent="Highlighted hotkeys can be modified"})}n("restoreHotkeys").addEventListener("click",()=>{b.hotkeys=F(ie.hotkeys),b.numbers=F(ie.numbers);let l=b.toggles[0]?0:1;for(let u in b.hotkeys)x(`#${u}Hotkey button`).textContent=b.hotkeys[u][l];for(let u in b.numbers){let g=b.numbers[u];x(`#${u}Hotkey button`).textContent=g,x(`#${i[u]}Hotkey span`).textContent=g.replace("Numbers","0").replace("Numpad","Num 0")}Ee(),se()})}k.bigWindow="hotkeys",Ss(n("hotkeysHTML"),x("#tabRightHotkey button")),x("#bigWindow > article").ariaLabel="Hotkeys menu",fe(),q()};var T=class t extends Array{constructor(s){let a=L.convert(s);super(a[0],a[1])}get mantissa(){return this[0]}get exponent(){return this[1]}static compareFunc(s,a){return s.moreThan(a)?1:s.notEqual(a)?-1:0}clone(){return new t(this)}setValue(s){let a=L.convert(s);return this[0]=a[0],this[1]=a[1],this}floorExponent(){return L.fixExpo(this)}plus(s){return L.add(this,L.convert(s))}minus(s){let a=L.convert(s);return L.add(this,[-a[0],a[1]])}multiply(s){return L.mult(this,L.convert(s))}divide(s){return L.div(this,L.convert(s))}power(s){return L.pow(this,s)}root(s=2){return L.pow(this,1/s)}log(s){return L.log(this,s===void 0?[Math.E,0]:L.convert(s))}logExp(s){return L.log2(this,s===void 0?[Math.E,0]:L.convert(s))}abs(){return this[0]=Math.abs(this[0]),this}trunc(){return L.trunc(this)}floor(){return L.floor(this)}ceil(){return L.ceil(this)}round(){return L.round(this)}isNaN(){return isNaN(this[0])}replaceNaN(s){if(isNaN(this[0])){let a=L.convert(s);this[0]=a[0],this[1]=a[1]}return this}isFinite(){return isFinite(this[0])}lessThan(s){return L.less(this,L.convert(s))}lessOrEqual(s){return L.lessOrEqual(this,L.convert(s))}moreThan(s){return L.more(this,L.convert(s))}moreOrEqual(s){return L.moreOrEqual(this,L.convert(s))}notEqual(s){return L.notEqual(this,L.convert(s))}equal(s){return L.equal(this,L.convert(s))}max(s){let a=L.convert(s);return isNaN(a[0])?(this[0]=NaN,this[1]=NaN):L.less(this,a)&&(this[0]=a[0],this[1]=a[1]),this}min(s){let a=L.convert(s);return isNaN(a[0])?(this[0]=NaN,this[1]=NaN):L.more(this,a)&&(this[0]=a[0],this[1]=a[1]),this}format(s={}){return L.format(this,s)}toNumber(){return Number(L.turnString(this))}toSafeNumber(){let s=Number(L.turnString(this));return isFinite(s)?s:Number.MAX_VALUE*(s<0?-1:1)}toString(){return L.turnString(this)}toArray(){return[this[0],this[1]]}toJSON(){return L.turnString(this)}allPlus(...s){for(let a=0;a<s.length;a++)L.add(this,L.convert(s[a]));return this}allMinus(...s){for(let a=0;a<s.length;a++){let o=L.convert(s[a]);L.add(this,[-o[0],o[1]])}return this}allMultiply(...s){for(let a=0;a<s.length;a++)L.mult(this,L.convert(s[a]));return this}allDivide(...s){for(let a=0;a<s.length;a++)L.div(this,L.convert(s[a]));return this}allEqual(...s){for(let a=0;a<s.length;a++)if(L.notEqual(this,L.convert(s[a])))return!1;return!0}allMax(...s){let a=this;for(let o=0;o<s.length;o++){let i=L.convert(s[o]);if(isNaN(i[0]))return this[0]=NaN,this[1]=NaN,this;L.less(a,i)&&(a=i)}return a!==this&&(this[0]=a[0],this[1]=a[1]),this}allMin(...s){let a=this;for(let o=0;o<s.length;o++){let i=L.convert(s[o]);if(isNaN(i[0]))return this[0]=NaN,this[1]=NaN,this;L.more(a,i)&&(a=i)}return a!==this&&(this[0]=a[0],this[1]=a[1]),this}},L={convert:t=>{if(typeof t=="object"&&t!==null)return t;let s=typeof t=="string"?t.indexOf("e"):-1,a=s===-1?[Number(t),0]:[Number(t.slice(0,s)),Number(t.slice(s+1))];if(!isFinite(a[0])||!isFinite(a[1]))return a[0]===0||a[1]===-1/0?[0,0]:isNaN(a[0])||isNaN(a[1])?[NaN,NaN]:[a[0]<0?-1/0:1/0,1/0];let o=Math.abs(a[0]);if(o===0)return[0,0];if(o<1||o>=10){let i=Math.floor(Math.log10(o));a[0]/=10**i,a[1]+=i,Math.abs(a[0])<1&&(a[0]*=10,a[1]--)}return a[0]=Math.round(a[0]*1e14)/1e14,Math.abs(a[0])===10&&(a[0]/=10,a[1]++),a},fixExpo:t=>{let s=Math.floor(t[1]);if(s!==t[1]){let a=t[0]<0;t[0]=Math.round((10**(t[1]-s)-1+Math.abs(t[0]))*1e14)/1e14,t[1]=s,t[0]>=10&&(t[0]/=10,t[1]++),a&&(t[0]*=-1)}return t},turnString:t=>t[1]===0||!isFinite(t[0])?`${t[0]}`:`${t[0]}e${t[1]}`,add:(t,s)=>{if(s[0]===0)return t;if(t[0]===0)return t[0]=s[0],t[1]=s[1],t;if(!isFinite(t[0])||!isFinite(s[0]))return t[0]+=s[0],t[1]=isNaN(t[0])?NaN:1/0,t;let a=t[1]-s[1];if(Math.abs(a)>=16)return a<0&&(t[0]=s[0],t[1]=s[1]),t;a>=0?t[0]+=s[0]/10**a:(t[0]=s[0]+t[0]*10**a,t[1]=s[1]);let o=Math.abs(t[0]);if(o===0)return t[1]=0,t;if(o>=10)t[0]/=10,t[1]++;else if(o<1){let i=-Math.floor(Math.log10(o));t[0]*=10**i,t[1]-=i}return t[0]=Math.round(t[0]*1e14)/1e14,Math.abs(t[0])===10&&(t[0]/=10,t[1]++),t},mult:(t,s)=>t[0]===0?t:s[0]===0?(t[0]=0,t[1]=0,t):(t[1]+=s[1],t[0]*=s[0],isFinite(t[1])?(Math.abs(t[0])>=10&&(t[0]/=10,t[1]++),t[0]=Math.round(t[0]*1e14)/1e14,Math.abs(t[0])===10&&(t[0]/=10,t[1]++),t):(t[1]===-1/0?(t[0]=0,t[1]=0):t[0]=t[1]===1/0?1/0:NaN,t)),div:(t,s)=>s[0]===0?(t[0]=NaN,t[1]=NaN,t):t[0]===0?t:(t[1]-=s[1],t[0]/=s[0],isFinite(t[1])?(Math.abs(t[0])<1&&(t[0]*=10,t[1]--),t[0]=Math.round(t[0]*1e14)/1e14,Math.abs(t[0])===10&&(t[0]/=10,t[1]++),t):(t[1]===-1/0?(t[0]=0,t[1]=0):t[0]=t[1]===1/0?1/0:NaN,t)),pow:(t,s)=>{if(s===0)return t[0]===0||isNaN(t[0])?(t[0]=NaN,t[1]=NaN):(t[0]=1,t[1]=0),t;if(t[0]===0)return s<0&&(t[0]=NaN,t[1]=NaN),t;if(!isFinite(s))return t[1]===0&&t[0]===1||(t[0]<0||isNaN(s)||isNaN(t[0])?(t[0]=NaN,t[1]=NaN):s===-1/0&&t[1]>=0||s===1/0&&t[1]<0?(t[0]=0,t[1]=0):(t[0]=1/0,t[1]=1/0)),t;let a=t[0]<0?Math.abs(s)%2:null;if(a!==null){if(Math.floor(s)!==s)return t[0]=NaN,t[1]=NaN,t;t[0]*=-1}let o=s*(Math.log10(t[0])+t[1]);if(!isFinite(o))return o===-1/0?(t[0]=0,t[1]=0):isNaN(t[0])?t[1]=NaN:(t[0]=a===1?-1/0:1/0,t[1]=1/0),t;let i=Math.floor(o);return t[0]=Math.round(10**(o-i)*1e14)/1e14,t[1]=i,t[0]===10&&(t[0]=1,t[1]++),a===1&&(t[0]*=-1),t},log:(t,s)=>{if(s[0]<=0||s[1]===0&&s[0]===1)return t[0]=NaN,t[1]=NaN,t;if(t[1]===0&&t[0]===1)return t[0]===1?t[0]=0:(t[0]=NaN,t[1]=NaN),t;if(t[0]<=0)return isNaN(s[0])||t[0]<0?(t[0]=NaN,t[1]=NaN):(t[0]=s[1]<0?1/0:-1/0,t[1]=1/0),t;if(isFinite(s[0])){if(!isFinite(t[0]))return isNaN(t[0])||t[0]===-1/0?(t[0]=NaN,t[1]=NaN):(t[0]=s[0]<1?-1/0:1/0,t[1]=1/0),t}else return t[0]=NaN,t[1]=NaN,t;let a=t[1]<0,o=Math.log10(Math.abs(Math.log10(t[0])+t[1])),i=Math.floor(o);if(t[0]=10**(o-i),t[1]=i,a&&(t[0]*=-1),s[1]!==1||s[0]!==1){t[0]/=Math.log10(s[0])+s[1];let l=Math.abs(t[0]);if(l<1||l>=10){let u=Math.floor(Math.log10(l));t[0]/=10**u,t[1]+=u}}return t[0]=Math.round(t[0]*1e14)/1e14,Math.abs(t[0])===10&&(t[0]/=10,t[1]++),t},log2:(t,s)=>{if(s[0]===0||s[1]===0&&Math.abs(s[0])===1)return t[0]=NaN,t[1]=NaN,t;if(t[1]===0&&Math.abs(t[0])===1)return t[0]===1?t[0]=0:(t[0]=NaN,t[1]=NaN),t;if(t[0]===0)return isNaN(s[0])?(t[0]=NaN,t[1]=NaN):(t[0]=s[1]<0?1/0:-1/0,t[1]=1/0),t;if(isFinite(s[0])){if(!isFinite(t[0]))return isNaN(t[0])||t[0]===-1/0?(t[0]=NaN,t[1]=NaN):(t[0]=Math.abs(s[0])<1?-1/0:1/0,t[1]=1/0),t}else return t[0]=NaN,t[1]=NaN,t;let a=t[0]<0;if(a){if(s[0]>0)return t[0]=NaN,t[1]=NaN,t;t[0]*=-1}let o=t[1]<0,i=Math.log10(Math.abs(Math.log10(t[0])+t[1])),l=Math.floor(i);if(t[0]=10**(i-l),t[1]=l,o&&(t[0]*=-1),s[1]!==1||s[0]!==1){t[0]/=Math.log10(Math.abs(s[0]))+s[1];let u=Math.abs(t[0]);if(u<1||u>=10){let g=Math.floor(Math.log10(u));t[0]/=10**g,t[1]+=g}}if(t[0]=Math.round(t[0]*1e14)/1e14,Math.abs(t[0])===10&&(t[0]/=10,t[1]++),s[0]<0||a){if(t[1]<0)return t[0]=NaN,t[1]=NaN,t;let u=t[1]<16?Math.abs(Math.round(t[0]*1e14)/10**(14-t[1]))%2:0;s[0]<0&&(a?u!==1:u!==0)&&(t[0]=NaN,t[1]=NaN)}return t},less:(t,s)=>t[0]===0||s[0]===0||t[1]===s[1]?t[0]<s[0]:s[0]>0?t[0]<0?!0:s[1]>t[1]:t[0]<0&&s[1]<t[1],lessOrEqual:(t,s)=>t[0]===0||s[0]===0||t[1]===s[1]?t[0]<=s[0]:s[0]>0?t[0]<0?!0:s[1]>t[1]:t[0]<0&&s[1]<t[1],more:(t,s)=>t[0]===0||s[0]===0||t[1]===s[1]?t[0]>s[0]:t[0]>0?s[0]<0?!0:t[1]>s[1]:s[0]<0&&t[1]<s[1],moreOrEqual:(t,s)=>t[0]===0||s[0]===0||t[1]===s[1]?t[0]>=s[0]:t[0]>0?s[0]<0?!0:t[1]>s[1]:s[0]<0&&t[1]<s[1],equal:(t,s)=>t[1]===s[1]&&t[0]===s[0],notEqual:(t,s)=>t[1]!==s[1]||t[0]!==s[0],trunc:t=>(t[1]<14&&(t[1]<0?(t[0]=0,t[1]=0):t[0]=Math.trunc(t[0]*10**t[1])/10**t[1]),t),floor:t=>(t[1]<14&&(t[1]<0?(t[0]=t[0]<0?-1:0,t[1]=0):(t[0]=Math.floor(t[0]*10**t[1])/10**t[1],t[0]===-10&&(t[0]=-1,t[1]++))),t),ceil:t=>(t[1]<14&&(t[1]<0?(t[0]=t[0]<0?0:1,t[1]=0):(t[0]=Math.ceil(t[0]*10**t[1])/10**t[1],t[0]===10&&(t[0]=1,t[1]++))),t),round:t=>(t[1]<14&&(t[1]<0?(t[0]=t[1]===-1?Math.round(t[0]/10):0,t[1]=0):(t[0]=Math.round(t[0]*10**t[1])/10**t[1],Math.abs(t[0])===10&&(t[0]/=10,t[1]++))),t),format:(t,s)=>{let[a,o]=t;if(!isFinite(a))return`${a}`;let i=s.type??"number",l=s.padding;if(o>=1e4||o<=-1e4){l==="exponent"&&(l=!0);let d=o,p=a;if(Math.abs(Math.round(p))===10&&(p/=10,d++,d<0&&d>-1e4))return L.format([p,d],s);d=Math.floor(Math.log10(Math.abs(d)));let h=2-Math.floor(Math.log10(d)),v=Math.round(o/10**(d-h))/10**h;Math.abs(v)===10&&(v/=10,d++,l&&(h=2-Math.floor(Math.log10(d)))),i!=="input"&&(v=Math.abs(v));let S=l?v.toFixed(h):`${v}`;return i==="input"?`${p}e${S}e${d}`:`${a<0?"-":""}${S.replace(".",b.format[0])}e${o<0?"-":""}e${d}`}if(o>=6||o<-4){l==="exponent"&&(l=!0);let d=3-Math.floor(Math.log10(Math.abs(o))),p=Math.round(a*10**d)/10**d,h=o;if(Math.abs(p)===10){if(p/=10,h++,h===-4||h===1e4)return L.format([p,h],s);l&&(d=3-Math.floor(Math.log10(Math.abs(h))))}let v=l?p.toFixed(d):`${p}`;return i==="input"?`${v}e${h}`:`${v.replace(".",b.format[0])}e${h}`}let u=o<1?5:5-o,g=Math.round(a*10**(u+o))/10**u,m=Math.floor(Math.log10(Math.abs(g)));if(m===6)return L.format([a<0?-1:1,m],s);l==="exponent"?l=!1:l&&m!==o&&(u=m<1?5:5-m);let c=l?g.toFixed(u):`${g}`;if(i!=="input"){let d=c.indexOf(".");d!==-1?c=`${c.slice(0,d)}${b.format[0]}${c.slice(d+1)}`:d=c.length,d>3&&(d-=3,c=`${c.slice(0,d)}${b.format[1]}${c.slice(d)}`)}return c}},{compareFunc:Vt}=T;var we=(t,s=null)=>{switch(t){case"stage":return s==="Advanced"?e.stage.true>=6:s==="Structures"||s===null;case"Elements":case"upgrade":return e.stage.true<2&&e.discharge.energyMax<12?!1:s==="Elements"||t==="Elements"?r.stageInfo.activeAll.includes(4)&&e.upgrades[4][1]===1:s==="Upgrades"||s===null;case"strangeness":return e.stage.true<7&&e.strange[0].total<=0&&(!e.inflation.vacuum||e.stage.current<5)?!1:s==="Milestones"?e.stage.true>=7||!e.inflation.vacuum:s==="Matter"||s===null;case"inflation":return e.stage.true<7?!1:s==="Inflations"||s==="Milestones"||s===null;case"settings":return s==="History"?e.stage.true>=7||e.strange[0].total>0:s==="Settings"||s==="Stats"||s===null;default:return!1}},us=(t,s)=>{if(t<1||r.buildingsInfo.maxActive[s]<t+1)return!1;if(s===1)return!0;if(s===2)return!0;if(s===3){if(t===1)return(e.inflation.vacuum?e.buildings[1][1].true:e.accretion.rank)!==0;if(t===2)return e.upgrades[3][2]===1;if(t===3)return e.upgrades[3][4]===1;if(t===4)return e.upgrades[3][8]===1;if(t===5)return e.upgrades[3][11]===1}else if(s===4){if(e.collapse.mass<r.collapseInfo.unlockB[t]&&e.researchesExtra[5][0]<1)return!1;if(t===1)return!0;if(t===2)return e.researchesExtra[4][0]>=1;if(t===3)return e.researchesExtra[4][0]>=2;if(t===4)return e.researchesExtra[4][0]>=3;if(t===5)return e.elements[26]>=1}else if(s===5){if(t===1)return e.inflation.vacuum||e.milestones[2][0]>=7;if(t===2)return e.inflation.vacuum||e.milestones[3][0]>=7;if(t===3)return e.researchesExtra[5][0]>=1}else if(s===6&&t===1)return e.upgrades[6][0]===1||e.researches[6][0]>=6;return!1},gs=t=>{if(t===0){let s=e.challenges.active;return s===null?e.inflation.vacuum:r.challengesInfo[s].time>=e.time[r.challengesInfo[s].resetType]}return!1},Y=()=>{let t=e.challenges.active;return t===null?e.verses[0].true:e.verses[0].other[t===0&&!e.challenges.super?0:t+1]},pe=(t,s,a)=>{switch(a){case"upgrades":if(r.upgradesInfo[s].maxActive<t+1)return!1;if(s===1){if(t===0||t===1)return e.inflation.vacuum;if(t===3)return e.upgrades[1][5]===1||e.buildings[1][e.inflation.vacuum?4:2].total.moreThan(0);if(t===4)return e.upgrades[1][5]===1||e.buildings[1][e.inflation.vacuum?5:3].total.moreThan(0);if(t>5){if(e.upgrades[1][5]!==1)return!1;if(t===10)return e.strangeness[5][10]>=1}return!0}else{if(s===2)return t===0?e.buildings[2][1].true>=1||e.buildings[2][2].true>=1:t===7?e.strangeness[2][2]>=3:t===8?e.strangeness[2][8]>=3:!0;if(s===3)return e.accretion.rank<r.accretionInfo.rankU[t]?!1:t===7?e.strangeness[3][2]>=3:t===13?e.strangeness[5][10]>=3:!0;if(s===4){let o=e.researchesExtra[5][0]>=1;return!o&&e.collapse.mass<r.collapseInfo.unlockU[t]?!1:t===2?e.upgrades[4][1]===1:t===3?e.strangeness[4][2]>=3&&e.upgrades[4][2]===1&&(o||e.collapse.stars[1]>0):t===4?e.strangeness[4][9]>=1&&e.upgrades[4][3]===1:t===5?e.strangeness[5][10]>=4&&e.upgrades[4][4]===1:!0}else{if(s===5)return Y()<r.mergeInfo.unlockU[t]?!1:t===0?e.inflation.vacuum||e.milestones[2][0]>=7:t===1?e.inflation.vacuum||e.milestones[3][0]>=7:t===2?e.buildings[5][3].true>=1:t===3?e.inflation.vacuum?e.accretion.rank>=7:e.milestones[5][1]>=8:e.accretion.rank>=7;if(s===6)return t===0?e.buildings[6][1].true>=80:!1}}break;case"researches":if(r.researchesInfo[s].maxActive<t+1)return!1;if(s===1)return e.upgrades[1][5]===1;if(s===2)return t===6?e.strangeness[5][10]>=2&&e.tree[1][5]>=3:!0;if(s===3)return e.accretion.rank>=r.accretionInfo.rankR[t];if(s===4){let o=e.researchesExtra[5][0]>=1;return!o&&e.collapse.mass<r.collapseInfo.unlockR[t]?!1:t===3?(o||e.collapse.stars[0]>0)&&e.strangeness[4][2]>=1:t===4?o||e.collapse.stars[2]>0:t===5?(o||e.collapse.stars[2]>0)&&e.strangeness[4][9]>=3:!0}else{if(s===5)return Y()<r.mergeInfo.unlockR[t]?!1:t===0?e.inflation.vacuum||e.milestones[2][0]>=7:t===1?e.inflation.vacuum||e.milestones[3][0]>=7:e.accretion.rank>=7;if(s===6)return e.strangeness[6][3]>=1}break;case"researchesExtra":if(r.researchesExtraInfo[s].maxActive<t+1)return!1;if(s===1)return t===1?e.researchesExtra[1][2]>=2:t===3?e.researchesExtra[1][2]>=1:t===4?e.accretion.rank>=6:t===5?e.accretion.rank>=6&&e.strangeness[5][10]>=1:e.upgrades[1][5]===1;if(s===2)return t===3?e.accretion.rank>=6:t===4?e.accretion.rank>=7&&e.strangeness[5][10]>=2:e.upgrades[2][2]===1;if(s===3)return e.accretion.rank<r.accretionInfo.rankE[t]?!1:t===4?e.researchesExtra[1][2]>=2:t===5?e.strangeness[5][10]>=3:!0;if(s===4)return t===1?e.collapse.stars[0]>0||e.researchesExtra[5][0]>=1:t===2?(e.collapse.stars[0]>0||e.researchesExtra[5][0]>=1)&&e.strangeness[4][2]>=2:t===3?(e.collapse.stars[1]>0||e.researchesExtra[5][0]>=1)&&e.strangeness[4][9]>=2:t===4?(e.collapse.stars[2]>0||e.researchesExtra[5][0]>=1)&&e.strangeness[5][10]>=4:!0;if(s===5)return Y()<r.mergeInfo.unlockE[t]?!1:t===0?(e.inflation.vacuum||e.milestones[4][1]>=8)&&e.strangeness[5][3]>=1:e.accretion.rank>=7;if(s===6)return e.upgrades[6][0]===1;break;case"researchesAuto":{let o=r.researchesAutoInfo.autoStage[t][e.researchesAuto[t]];return o===s||o===4&&s===5?t===0?e.inflation.vacuum:t===1?e.inflation.vacuum&&e.accretion.rank>=6:!0:!1}case"ASR":return s===1?e.upgrades[1][5]>=1:s===3?e.accretion.rank!==0:!0;case"elements":if(t>=29){let o=e.upgrades[4][4]===1?1+Y():0;return e.upgrades[4][5]===1&&(o+=1+e.verses[1].true),o>=t-28}return t>=27?e.upgrades[4][3]===1:t>=11?e.upgrades[4][2]===1&&(e.collapse.stars[1]>0||e.researchesExtra[5][0]>=1):t>=6?e.upgrades[4][2]===1:e.upgrades[4][1]===1&&t>0;case"strangeness":if(e.inflation.vacuum){if(s===1){if(t===7)return e.challenges.void[1]>=1;if(t===8)return e.challenges.void[1]>=2;if(t===9)return e.challenges.void[4]>=2}else if(s===2){if(t===7)return e.challenges.void[1]>=3;if(t===8)return e.challenges.void[2]>=1;if(t===9)return e.challenges.void[2]>=2}else if(s===3){if(t===8)return e.challenges.void[4]>=4;if(t===9)return e.challenges.void[5]>=1}else if(s===4){if(t===8)return e.challenges.void[4]>=3;if(t===9)return e.challenges.void[4]>=5}else if(s===5){if(t===4)return e.challenges.void[4]>=1;if(t===8)return e.challenges.void[3]>=5;if(t===9)return e.challenges.void[3]>=6;if(t===10)return e.challenges.void[2]>=3;if([0,1,5,7].includes(t))return e.strangeness[5][3]>=1}else if(s===6)return e.challenges.void[5]>=2}else{if(r.strangenessInfo[s].maxActive<t+1)return!1;if(e.challenges.active===1){if(s===1){if(e.milestones[1][1]>=6)return!1}else if(s===2){if(e.milestones[2][1]>=7)return!1}else if(s===3&&e.milestones[3][1]>=7)return!1}if((s===1||s===2)&&t<6||(s===3||s===4)&&t<7)return!0;if(e.milestones[4][0]<8)return!1;if(s===5){if(t===2)return e.milestones[5][0]>=8;if(t===4)return e.milestones[4][1]>=8;if([0,1,3,5].includes(t))return e.milestones[2][0]>=7||e.milestones[3][0]>=7}}return!0;case"inflations":return s===0?e.stage.true<7?!1:t===5?e.challenges.supervoid[3]>=4:t===6?e.challenges.supervoid[2]>=2:t>=0||t<=4:t===2?e.challenges.supervoid[3]>=3:t===3?e.challenges.supervoid[4]>=2:t===4?e.challenges.supervoid[1]>=1:t===5?e.challenges.supervoid[2]>=1:t===6?e.challenges.supervoid[3]>=1:t===7?e.challenges.supervoid[4]>=1:t===8?e.challenges.supervoid[1]>=3:!0}return!1},Ne=(t,s,a)=>{switch(a){case"structures":if(s===1)return t!==1||!e.inflation.vacuum||e.challenges.supervoid[1]<2;if(s===5)return t!==3;break;case"upgrades":if(s===1)return t!==5;if(s===2)return t!==2;if(s===4)return!1;if(s===5)return t!==3;if(s===6)return t!==0;break;case"researches":if(s===1||s===6)return t!==3;break;case"researchesExtra":if(s===1)return t!==2;if(s===2)return t>2;if(s===4)return t!==0;if(s===5||s===6)return!1;break;case"elements":return![26,29,30].includes(t)}return!0},wt=()=>{let t=e.stage.input[0];return t===3&&e.verses[0].current<8?2:t},fs=t=>t===0?(e.inflation.vacuum||e.challenges.super)&&(e.stage.true>=7||e.stage.resets>=1):t===1?e.stage.true>=8:!1,qt=(t,s)=>{if(s===1){if(t===0)return e.buildings[1][e.inflation.vacuum?1:0].total;if(t===1)return e.discharge.energy}else if(s===2){if(t===0)return e.buildings[2][1].total;if(t===1)return e.inflation.vacuum?e.vaporization.clouds:e.buildings[2][2].current}else if(s===3){if(t===0)return e.buildings[3][0].total;if(t===1)return e.buildings[3][4].true+e.buildings[3][5].true}else if(s===4){if(t===0)return e.buildings[4][0].total;if(t===1)return e.inflation.vacuum?e.collapse.stars[2]:r.collapseInfo.newMass}else if(s===5){if(t===0){if(!e.inflation.vacuum)return r.collapseInfo.trueStars;let a=e.buildings[4];return new T(a[1].total).allPlus(a[2].total,a[3].total,a[4].total,a[5].total)}if(t===1)return e.buildings[5][3].true}return 0},ds=(t,s)=>{let a=r.milestonesInfo[s];if(e.inflation.vacuum){if(e.challenges.active!==0||e.tree[0][4]<1||r.challengesInfo[0].time<e.time[e.challenges.super?"vacuum":"stage"])return!1}else if(a.scaling[t].length<=e.milestones[s][t]||e.stage.true<7&&e.stage.resets<4||s===5&&e.milestones[4][t]<8||e.tree[0][4]<1&&a.reward[t]<e.time.stage)return!1;return a.need[t].lessOrEqual(qt(t,s))};var e={version:"v0.2.8_will_be_deleted",fileName:"Fundamental, [dateD.M.Y] [timeH-M-S], [stage]",stage:{true:1,current:1,active:1,resets:0,time:0,peak:[0,0],input:[1,0,0,0]},discharge:{energy:0,energyMax:0,current:0},vaporization:{clouds:0,input:[3,0]},accretion:{rank:0},collapse:{mass:.01235,massMax:.01235,stars:[0,0,0],show:0,maxElement:0,input:[2,1e6],points:[]},merge:{rewards:[0,0,0,0],claimed:[0,0],resets:0,input:[0,0],since:0},darkness:{energy:0,energyMax:0,fluid:0,input:1.5},inflation:{loadouts:[],vacuum:!1,resets:0,age:0,ends:[0,0,0],time:0,peak:[0,0]},time:{updated:Date.now(),started:Date.now(),excess:0,export:[0,0,0,0],offline:0,online:0,end:0,universe:0,vacuum:0,stage:0},buildings:[[]],verses:[{true:0,other:[0,0,0],current:0,highest:0,lowest:255,total:0},{true:0,current:0,total:0}],strange:[{current:0,total:0},{current:0,total:0}],cosmon:[{current:0,total:0},{current:0,total:0}],upgrades:[[]],researches:[[]],researchesExtra:[[]],researchesAuto:[],ASR:[],elements:[],strangeness:[[]],milestones:[[]],tree:[],challenges:{active:null,super:!1,void:[0,0,0,0,0,0],voidCheck:[0,0,0,0,0,0],supervoid:[0,0,0,0,0,0],supervoidMax:[0,0,0,0,0,0],stability:0},toggles:{normal:[],confirm:[],hover:[],max:[],auto:[],buildings:[[]],verses:[],shop:{input:0,wait:[2]}},history:{stage:{best:[31556952e9,0,0,0,0],list:[],input:[20,100]},end:{best:[31556952e9,0,0,0,0],list:[],input:[20,100]}},event:!1,clone:{}},r={tabs:{current:"stage",list:["stage","upgrade","strangeness","inflation","settings"],stage:{current:"Structures",list:["Structures","Advanced"]},upgrade:{current:"Upgrades",list:["Upgrades","Elements"]},strangeness:{current:"Matter",list:["Matter","Milestones"]},inflation:{current:"Inflations",list:["Inflations","Milestones"]},settings:{current:"Settings",list:["Settings","Stats","History"]}},debug:{timeLimit:!1,challenge:null,rankUpdated:null,historyStage:null,historyEnd:null},offline:{active:!0,stage:[null,null],autosave:!1,cacheUpdate:!0},paused:!0,trueActive:1,lastSave:0,lastUpdate:null,hotkeys:{disabled:!0,shift:!1,ctrl:!1,tab:!1,last:""},lastUpgrade:[[null,"upgrades"]],lastElement:null,lastStrangeness:[null,0],lastInflation:[null,0],lastMilestone:[null,0],lastChallenge:[1,1],sessionToggles:[!1,!1],automatization:{autoU:[[]],autoR:[[]],autoE:[[]],autoEl:[],autoS:[]},stageInfo:{word:["","Microworld","Submerged","Accretion","Interstellar","Intergalactic","Abyss"],textColor:["","cyan","blue","gray","orange","darkorchid","darkviolet"],buttonBorder:["","darkcyan","#386cc7","#424242","#a35700","#8f004c","#6c1ad1"],imageBorderColor:["","#008b8b","#1460a8","#5b5b75","#e87400","#b324e2","#5300c1"],costName:["","Energy","Drops","Mass","Stardust","Stardust","Dark matter"],activeAll:[]},dischargeInfo:{energyType:[[],[],[],[],[],[],[]],energyStage:[0,0,0,0,0,0,0],energyTrue:0,scaling:10,next:1,total:0,base:1},vaporizationInfo:{S2Research0:0,S2Research1:0,S2Extra1:0,get:0},accretionInfo:{unlockA:[2,4,8,11],rankU:[1,1,2,2,3,3,4,4,4,4,5,5,5,7],rankR:[1,1,2,2,3,3,3,4,5],rankE:[2,3,4,5,3,6],rankCost:[59722e23,1e-7,1e10,1e24,5e29,245576045e23,198847e35],rankColor:["blue","cyan","gray","gray","gray","darkviolet","orange","gray"],rankName:["Ocean world","Cosmic dust","Meteoroid","Asteroid","Planet","Jovian planet","Protostar","Protogalaxy"],rankImage:["Ocean%20world.png","Dust.png","Meteoroids.png","Asteroid.png","Planet.png","Giant.png","Protostar.png","Protogalaxy.png"],nextRank:new T(0),maxRank:4,effective:1,disableAuto:!1,dustSoft:1},collapseInfo:{unlockB:[0,.01235,.23,10,40,1e3],unlockU:[.01235,.076,1.3,10,40,1e3],unlockR:[.18,.3,.8,1.3,40,1e3],newMass:0,starCheck:[0,0,0],trueStars:0,pointsLoop:0,solarCap:.01235},mergeInfo:{unlockU:[0,0,0,0,1,1,4],unlockR:[0,0,3,3,60],unlockE:[0,2,4,4,60,60],S5Extra2:0,checkReward:[0,0,0,0],galaxies:0},inflationInfo:{globalSpeed:1,trueUniverses:0,totalSuper:0,newFluid:0},intervalsId:{main:void 0,numbers:void 0,visual:void 0,autoSave:void 0,mouseRepeat:void 0},buildingsInfo:{maxActive:[0,4,6,5,5,4,1],name:[[],["Mass","Preons","Quarks","Particles","Atoms","Molecules"],["Moles","Drops","Puddles","Ponds","Lakes","Seas","Oceans"],["Mass","Cosmic dust","Planetesimals","Protoplanets","Satellites","Subsatellites"],["Stardust","Brown dwarfs","Main sequence","Red supergiants","Blue hypergiants","Quasi-stars"],["Stars","Nebulas","Star clusters","Galaxies"],["Dark matter","Dark planets"]],hoverText:[[],["Mass","Preons","Quarks","Particles","Atoms"],["Tritium","Drops","Puddles","Puddles","Puddles","Puddles"],["Preons hardcap","Cosmic dust","Planetesimals","Protoplanets","Satellites"],["Stardust","Stardust","Stardust","Stardust","Stardust"],["Interstellar Stars","Interstellar Stars","Nebulas and Star clusters"],["Dark matter softcap"]],type:[[],["producing","producing","producing","producing","producing"],["improving","producing","improving","improving","improving","improving"],["delaying","producing","producing","improving","improving"],["producing","producing","producing","producing","producing"],["producing","improving","improving"],["delaying"]],firstCost:[[],[0,.005476,6,3,24,3],[0,.0027753108348135,100,1e7,1e18,1e23,2676e22],[0,1e-19,1e-9,1e21,1e17,1e22],[0,1,1e5,1e15,1e27,1e50],[0,1e50,1e54,1e5],[0,1e8]],increaseStart:[[]],increase:[[],[0,1.4,1.4,1.4,1.4,1.4],[0,1.15,1.2,1.25,1.35,1.4,4],[0,1.15,1.25,1.35,10,10],[0,1.4,1.55,1.7,1.85,2],[0,2,2,1.11],[0,1.4]],producing:[[]]},strangeInfo:{name:["Strange quarks","Strangelets"],stageBoost:[1,1,1,1,1,1],strangeletsInfo:[0,1],strange0Gain:0,strange1Gain:0},upgradesInfo:[{},{name:["Weak force","Strong force","Electrons","Protons","Neutrons","Superposition","Protium","Deuterium","Tritium","Nuclear fusion","Nuclear fission"],effectText:[()=>"Particles will produce 8 times more Quarks.",()=>"Gluons will be able to bind Quarks into Particles, which will make Particles 16 times cheaper.",()=>`${e.inflation.vacuum?"Atoms":"Particles"} will be 8 times cheaper.`,()=>`Atoms will produce ${e.inflation.vacuum?6:4} times more Particles.`,()=>"Molecules will produce 4 times more Atoms.",()=>`Ability to regain spent Energy and if had enough Energy, it will also boost production of ${e.inflation.vacuum?"Microworld":"all"} Structures by ${f(r.dischargeInfo.base,{padding:!0})}.${e.inflation.vacuum?`
(In true Vacuum it will also reset resources and all non-self-made Structures from all Stages${e.stage.true>=7?" before Abyss":""}, and enough self-made Structures to fully regain spent Energy)`:""}`,()=>`Decrease Structures cost scaling by -${f(y.S1Upgrade6())}.`,()=>`Make self-made Structures boost themselves by ${f(y.S1Upgrade7())}.${e.inflation.vacuum?`
(${e.challenges.supervoid[4]>=4?`First ${f(1001)} self`:"Self"}-made Preons boost themselves by ${f(y.S1Upgrade7(!0),{padding:e.buildings[1][1].true<1001})} instead${e.challenges.supervoid[4]>=4?`, ${f(1.04)} afterwards`:`, softcaps instantly and gets completely disabled after ${f(1001)} Preons`})`:""}`,()=>`Molecules will produce Molecules, at a reduced rate.
(${f(new T(E.tritium).multiply(r.inflationInfo.globalSpeed),{padding:!0})} Molecules per second)`,()=>`Unspent Energy ${e.upgrades[1][10]===1?"":`^${f(.5)}`} will boost 'Tritium' production of Molecules.
(Boost: ${f(y.S1Upgrade9(),{padding:!0})})`,()=>"Unlock the full strength of 'Nuclear fusion' and increase effective Energy by 2."],cost:[40,60,100,120,180,360,1200,3600,12e3,8e4,24e5],maxActive:10},{name:["Molecules to Moles","Water spread","Vaporization","Surface tension","Surface stress","Stream","River","Tsunami","Tide"],effectText:[()=>`Drops will ${e.inflation.vacuum?"improve Tritium":"produce Moles"} ${f(e.inflation.vacuum?1.02:1.04)} times ${e.inflation.vacuum?"more":"faster"} for every self-made Drop.`,()=>`Spread water faster with every Puddle, current formula is ${f(e.challenges.active===0&&e.challenges.super?1.01:1.02)} ^ effective Puddles.
Puddles after 200 and non-self-made ones are raised to the power of ${f(.7)}.
(Total effect: ${f(y.S2Upgrade1(),{padding:!0})})`,()=>`Gain ability to convert Drops into Clouds. Cloud gain formula: (Drops / ${f(y.S2Upgrade2())}) ^${f(y.cloudsGain())}, gain is reduced with Clouds.`,()=>`Puddles will get a boost based on Moles ^${f(y.S2Upgrade3_power())}.
(Boost: ${f(y.S2Upgrade3(),{padding:!0})})`,()=>`Puddles will get a boost based on Drops ^${f(y.S2Upgrade4_power())}.
(Boost: ${f(y.S2Upgrade4(),{padding:!0})})`,()=>{let t=1+e.researches[2][4];return`Ponds will increase current Puddle amount. (${t} extra Puddle${t!==1?"s":""} per Pond)`},()=>{let t=1+e.researches[2][5];return`Lakes will increase current Pond amount. (${t} extra Pond${t!==1?"s":""} per Lake)`},()=>{let t=1+e.researches[2][6];return`Spreads enough water to make Seas increase current Lake amount. (${t} extra Lake${t!==1?"s":""} per Sea)`},()=>`Spreads water too fast. 1 extra Sea per Ocean.
It will also improve Oceans effect scaling.`],cost:[10,1e6,1e10,1e3,1e4,2e9,5e20,1e28,2e48],maxActive:8},{name:["Brownian motion","Gas","Micrometeoroid","Streaming instability","Gravitational field","Rubble pile","Magma ocean","Hydrostatic equilibrium","Satellite system","Atmosphere","Pebble accretion","Tidal force","Ring system","Self-gravity"],effectText:[()=>`Through random collisions every self-made Cosmic dust will ${e.inflation.vacuum?"delay Preons hardcap even more":"produce even more Mass"}.
(By ${f(y.S3Upgrade0())} per self-made Cosmic dust)`,()=>`A new substance for the Accretion, it will provide boost to Cosmic dust based on its quantity.
(Formula: (self-made * current) ^${f(y.S3Upgrade1_power())} | Boost: ${f(y.S3Upgrade1(),{padding:!0})})`,()=>`Just a small meteoroid, but it will be a good base for what to come.
(Unlock a new Structure and get 2x boost to Cosmic dust)`,()=>`Small bodies will spontaneously concentrate into clumps.
(Self-made Planetesimals will boost each other by ${f(y.S3Upgrade3())})`,()=>`Bodies will become massive enough to affect each other with their own gravity.
(Unlock a new Structure and get 3x boost to Planetesimals)`,()=>`Shattered pieces will fall back together. ${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will be increased by 3.`,()=>`Melt the core to increase Accretion speed.
(Cosmic dust strength will be increased by ${f(2*1.5**e.researches[3][7])})`,()=>`After reaching equilibrium, self-made Protoplanets will boost each other by ${f(1.02)}.`,()=>"Unlock yet another Structure.",()=>`${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will be increased again (because of drag and escape velocity), by 2.`,()=>`${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will be greatly increased by ${8*2**e.researches[3][8]}.`,()=>`Satellites cost scaling will be 2 times smaller.${e.inflation.vacuum?`
Also unlock a new Structure.`:""}`,()=>"Satellites effect will scale better.",()=>`Allow for Star clusters to be boosted by ('Gravity' / ${f(2e5)}) ^${f(.8)} + 1.${e.strangeness[3][7]>=2?`
Boost from 'Gravity' that didn't originated from Mass is instead raised to ^${f(.1)}.`:""}
(Boost is equal to ${f(y.S3Upgrade13(),{padding:!0})})`],cost:[1e-16,1e-13,1e-13,1,1e14,1e17,1e10,1e22,1e22,1e23,1e9,1e26,1e29,1e86],maxActive:13},{name:["Gravitational Collapse","Proton-proton chain","Carbon-Nitrogen-Oxygen cycle","Helium fusion","Nucleosynthesis","Proton capture"],effectText:[()=>`As fuel runs out, every Star will boost production in its own special way.
Solar mass ${e.inflation.vacuum?`on Collapse is Accretion Mass / ${f(198847e28)} and `:""}will not decrease if to reset below current. (Hover over Remnants effects to see what they boost)`,()=>"Fuse with Protium instead of Deuterium. Unlocks 5 first Elements. ('Elements' subtab)",()=>"Unlock 5 more Elements through the CNO cycle, which is also is a better source of Helium and Energy.",()=>"Through Triple-alpha and then Alpha process unlock 2 more Elements.",()=>{let t=1+Y();return`Create new Atomic nuclei with Neutron capture (s-process and r-process).
Unlocks ${t} more Element${t!==1?"s":""}${e.stage.true>=7?` (+1 for every ${e.challenges.active===0?"Void":"self-made"} Universe)`:""}.`},()=>{let t=1+e.verses[1].true;return`Speed up the creation of new Elements by adding even more Protons (p-process and rp-process).
Unlocks ${t} more Element${t!==1?"s":""} (+1 for every self-made Multiverse).`}],cost:[100,1e3,1e9,1e48,1e128,1e256],maxActive:4},{name:["Molecular cloud","Super Star cluster","Quasar","Galactic Merger","Starburst region","Globular cluster","Starburst Galaxy"],effectText:[()=>`Nebula that is dense enough to block the light, it will boost Nebulas by ${f(y.S5Upgrade0())}.`,()=>`A very massive Star cluster that will boost Star clusters by ${f(y.S5Upgrade1())}.`,()=>`Boost per Galaxy will be increased by +${f(y.S5Upgrade2(!1,1),{padding:!0})}.
(Effect will be stronger with more Solar mass past ${f(1e5)})`,()=>`Unlock a new reset type that will bring Galaxies closer for potential Merging.${e.inflation.vacuum?" That reset behaves like a Galaxy reset, while also converting self-made Galaxies into bonus ones. Can only be done a limited amount of times per Stage reset.":""}`,()=>`Region of space that is undergoing a larger amount of Star formations, it will boost Nebulas by ${f(1e3*10**e.researches[5][4])}.`,()=>`A spheroidal conglomeration of Stars that is even more dense than Super Star cluster, it will boost Star clusters by ${f(1e3*10**e.researches[5][4])}.`,()=>`An entire Galaxy that is undergoing higher rate of Star formations, it will boost Galaxies by ${f(100*10**e.researches[5][4])}.`],cost:[1e56,1e60,1e120,1e160,1e200,1e210,"1e360"],maxActive:4},{name:["Dark nucleation","Placeholder"],effectText:[()=>`Unlock a new Dark reset, it will start the formation of the new Dark resources by modifing existing physics.
(Formula for Dark fluid gain is (log2(Dark matter / ${f(1e8)}) + Dark energy) ^${f(y.S6Upgrade0())}, gain is reduced with more Dark fluid. Dark fluid boost Dark matter production and effective Dark energy)`,()=>"No effect, boost something based on Merge score."],cost:[8e12,2e20],maxActive:0}],researchesInfo:[{},{name:["Stronger Protium","Better Deuterium","Improved Tritium","Requirement decrease","Discharge improvement","Radioactive Discharge"],effectText:[()=>`Cost scaling will be -${f(.03)} smaller with every level.`,()=>`Self-made Structures will boost each other by an additional +${f(.01)}.`,()=>`Molecules will produce themselves ${f(y.S1Research2())} times quicker.`,()=>`Discharge goals requirement will scale slower. (-2)
(Creating this Research will make the next Discharge goal to be ${f(y.dischargeCost(y.dischargeScaling(e.researches[1][3]+1)))} Energy)`,()=>{let t=y.dischargeBase(e.researches[1][4]+1);return`Discharge production boost from reached Goals will be increased by +${f(t-r.dischargeInfo.base)}.
(This is equal to ${f((t/r.dischargeInfo.base)**r.dischargeInfo.total,{padding:!0})}x boost improvement)`},()=>`Discharge goals will be able to boost 'Tritium'.
(Current effect: ${f(y.S1Research5())} ^ level)`],cost:[],firstCost:[1600,4800,16e3,32e3,16e3,24e3],scaling:[400,1200,8e3,4e4,16e3,16e3],max:[5,4,8,2,4,3],maxActive:6},{name:["Better Mole production","Better Drop production","Stronger surface tension","Stronger surface stress","More streams","Distributary channel","Megatsunami"],effectText:[()=>`Drops will ${e.inflation.vacuum?"improve Tritium":"produce Moles"} ${e.challenges.active===0&&e.challenges.super?2:3} times more.${e.upgrades[2][2]===1||e.inflation.vacuum?`
Effective level ${r.vaporizationInfo.S2Research0!==e.researches[2][0]?`is ${f(r.vaporizationInfo.S2Research0,{padding:!0})}, will be restored with more Drops`:"will be set to 0 after any reset"}.`:""}`,()=>`Puddles will produce ${e.challenges.active===0&&e.challenges.super?f(1.4):2} times more Drops.${e.upgrades[2][2]===1||e.inflation.vacuum?`
Effective level ${r.vaporizationInfo.S2Research1!==e.researches[2][1]?`is ${f(r.vaporizationInfo.S2Research1,{padding:!0})}, will be restored with more Drops`:"will be set to 0 after any reset"}.`:""}`,()=>{let t=y.S2Upgrade3_power(e.researches[2][2]+1)-y.S2Upgrade3_power();return`'Surface tension' base will be +${f(t)} stronger.
(This is equal to ${f(y.S2Upgrade3(t),{padding:!0})}x boost improvement)`},()=>{let t=y.S2Upgrade4_power(e.researches[2][3]+1)-y.S2Upgrade4_power();return`'Surface stress' base will be +${f(t)} stronger.
(This is equal to ${f(y.S2Upgrade4(t),{padding:!0})}x boost improvement)`},()=>"With more streams, will be able to have even more extra Puddles. (+1 extra Puddles per Pond)",()=>"Rivers will be able to split, which will allow even more Ponds per Lake. (+1 per)",()=>"Big enough to allow even more Lakes per Sea. (+1)"],cost:[],firstCost:[10,400,1e4,1e5,1e14,1e22,1e80],scaling:[1.366,5,100,1e3,1e3,1e4,1],max:[8,8,4,4,2,1,1],maxActive:6},{name:["More massive bodies","Adhesion","Space weathering","Inelastic collisions","Destructive collisions","Contact binary","Gravity","Planetary differentiation","Aerodynamic drag"],effectText:[()=>"Increase strength of Cosmic dust by 3.",()=>`Cosmic dust particles will cling to each other. (+${f(.01)} to 'Brownian motion')`,()=>"Planetesimals will produce more Cosmic dust. (3 times more)",()=>`Slow encounter velocities will result in a more efficient growth.
${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will be increased by 2.`,()=>`When shattered, Planetesimals will replenish small grains quantity.
'Streaming instability' effect will be increased by +${f(.005)}.`,()=>`Instead of shattering, some Planetesimals will form a contact binary or even trinary.
${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will be increased by 3.`,()=>`Planetesimals will attract other bodies and get a boost to their own production based on unspent Mass ^${f(new T(y.S3Research6_base()).log(e.buildings[3][0].current),{padding:!0})}.
(Boost: ${f(y.S3Research6(),{padding:!0})} \u27F6 ${f(y.S3Research6(y.S3Research6_base(e.researches[3][6]+1)),{padding:!0})}, weaker after ${f(1e21)} Mass)`,()=>`'Magma Ocean' will become stronger, by ${f(1.5)}.`,()=>`Improve 'Pebble accretion' Accretion speed even more.
${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will increased by 2.`],cost:[],firstCost:[1e-16,1e-15,1e-5,100,1e10,1e11,1e15,1e14,1e12],scaling:[11,111,22,10,100,100,10,1e4,1e3],max:[9,3,8,8,2,2,6,4,4],maxActive:9},{name:["Planetary system","Star system","Protoplanetary disk","Planetary nebula","Gamma-ray burst","Inner Black hole"],effectText:[()=>`From Planetesimals to Planets, will get ${f(y.S4Research0_base())}x boost to Interstellar Stars with every level.
(Total boost: ${f(y.S4Research0(),{padding:!0})})`,()=>{let t=y.S4Research1();return`All self-made Stars will boost each other by ${f(t,{padding:!0})}.
(Total boost: ${f(new T(t).power(r.collapseInfo.trueStars),{padding:!0})} \u27F6 ${f(new T(y.S4Research1(e.researches[4][1]+1)).power(r.collapseInfo.trueStars),{padding:!0})})`},()=>`Improve effect scaling of 'Planetary system', as well increase its max level by +3.
(Total boost from 'Planetary system' will be increased by ${f(y.S4Research0(y.S4Research0_base(e.researches[4][2]+1)/y.S4Research0_base()),{padding:!0})})`,()=>"Matter will be expelled from Red giants, this will boost Main-sequence Stars by 2, and also increase 'Planetary system' max level by +3.",()=>`An immensely energetic explosion that will boost Interstellar Stars by ${f(y.S4Research4(),{padding:!0})}${e.researches[4][4]<2?` \u27F6 ${f(y.S4Research4(!1,e.researches[4][4]+1),{padding:!0})}`:""}.
(Effect will be stronger with more Black holes${e.elements[23]>=1?" and Solar mass":""})`,()=>"Quasi-stars will Collapse into Intermediate-mass Black holes that are equivalent to +1 (Stellar) Black holes per level."],cost:[],firstCost:[1e3,5e4,1e8,1e11,1e28,1e154],scaling:[10,200,1e12,1,2e8,1e306],max:[3,2,1,1,2,1],maxActive:5},{name:["Higher density","Type frequency","Jeans instability","Gravitational binding Energy","Star formation"],effectText:[()=>{let t=r.buildingsInfo.name[4],s=t[1];for(let a=2;a<e.researches[5][0]+2;a++)s+=`, ${t[a]}`;return`Higher density of Nebulas will allow them to produce Stars of higher tier, but each tier is 4 times slower than the previous one. It will also boost Nebulas by 2.
Next tier will be ${t[Math.min(e.researches[5][0]+2,e.inflation.vacuum?5:4)]}. Currently can produce: ${s}.`},()=>{let t=r.buildingsInfo.name[4],s=e.inflation.vacuum?5:4,a=t[s];for(let o=1;o<e.researches[5][1]+1;o++)a+=`, ${t[s-o]}`;return`More of the same Star type will be found within Star cluster. Star clusters and their minimum strength will be improved by 2. It will also boost Stars of lower tier, but 2 times less than the previous one.
Next tier will be ${t[Math.max(s-e.researches[5][1]-1,1)]}. Currently can boost: ${a}.`},()=>`Weaken internal gas pressure within Nebulas to cause even more gravitational Collapses.
This will make every self-made Nebula boost each other by ${f(y.S5Research2(),{padding:!0})}. (+${f(.00625)} per level)${Ae(4,5,60)}`,()=>`Increase the Energy required for Star clusters to cease being in a gravitationally bound state.
This will make every self-made Star cluster boost each other by ${f(y.S5Research3(),{padding:!0})}. (+${f(.00625)} per level)${Ae(4,5,60)}`,()=>`Produce even more stars and increase strength of 'Starburst region', 'Globular cluster' and 'Starburst Galaxy' effects by 10 per level.${Ae(70)}`],cost:[],firstCost:[1e54,1e58,1e280,1e290,"1e550"],scaling:[1e8,1e8,1e30,1e30,1e30],max:[4,4,1,1,1],maxActive:2},{name:["Dark aggregation","Acceleration","Self-interaction","Composition"],effectText:[()=>`Boost production of Dark matter by 3 for the first ${6+e.researchesExtra[6][0]} levels and by 2 for the rest.
(First time reaching levels 6, 10, 12 and 20 also unlocks something new)`,()=>`Boost global speed by ${f(1.1)}.
Also delays Dark matter softcap by 1 + level.`,()=>`Make self-made Dark planets boost each other by 1 + ${f(.01)} * level and scale in cost slower by -${f(.05)} * level.`,()=>"Have more Dark energy by increasing its gain by 1 + level."],cost:[],firstCost:[2e6,2e9,8e9,5e15],scaling:[2,2,3,20],max:[20,8,5,4],maxActive:0}],researchesExtraInfo:[{},{name:["Extra strong force","Improved formula","Accretion","Later Preons","Impulse","Radioactive decay"],effectText:[()=>`Mesons will be able to bind Particles to form Atoms, which will make Atoms to be affected by 'Strong force'.
(Atoms will be 16 times cheaper)`,()=>{let t=y.S1Extra1(),s=y.S1Extra1(e.researchesExtra[1][1]+1);return`Improve 'Tritium' formula, current formula is log${f(t)}${e.researchesExtra[1][1]<4?` \u27F6 log${f(s)}.
(Which is equal to ${f(ge(t,s),{padding:!0})}x improvement)`:"."}`},()=>`First level is to begin the Accretion, second level is to Submerge it.
All Structures produce Energy on creation and all resets affect all lower Stages, while also doing Discharge reset.
Accretion Mass is Microworld Mass * ${f(178266192e-41)} and Moles are Molecules / ${f(602214076e15)}.`,()=>{let t=y.S1Extra3(),s=y.effectiveEnergy();return`Boost Preons and delay hardcap by current Energy ^${f(t)}.
(Effect: ${f(s**t,{padding:!0})} \u27F6 ${f(s**y.S1Extra3(e.researchesExtra[1][3]+1),{padding:!0})})`},()=>{let t=y.S1Extra4();return`Discharge goals will be able to boost Interstellar Stars. Their strength is based on Energy and Discharge base.
Current base is ${f(t,{padding:!0})}, total boost is ${f(t**r.dischargeInfo.total,{padding:!0})}.`},()=>`Improve 'Impulse' base strength even more.
(This will increase total boost by ${f((y.S1Extra4(e.researchesExtra[1][5]+1)/y.S1Extra4())**r.dischargeInfo.total,{padding:!0})})`],cost:[],firstCost:[2e3,4e4,12e3,16e3,16e4,16e5],scaling:[0,16e3,68e3,16e3,0,16e5],max:[1,4,2,4,1,2],maxActive:0},{name:["Natural Vaporization","Rain Clouds","Storm Clouds","Water Accretion","Jeans Mass"],effectText:[()=>{if(!e.inflation.vacuum||e.tree[1][5]<1)return"When formed, Clouds will use Drops produced this reset instead of current ones.";let t=e.researchesExtra[2][0],s=e.strangeness[2][4]>=2?1:4;return`Passively gain ${f(t*(5+5*t)/s)}% \u27F6 ${f((t+1)*(10+5*t)/s)}% Clouds per second. (Not affected by global speed)`},()=>{let t=e.researchesExtra[2][1],s=r.vaporizationInfo.S2Extra1,a=e.buildings[2][2].true<1,o=y.S2Extra1;return`Some Clouds will start pouring Drops themselves. This will boost Puddles, even if there are none, based on current Clouds.
Effective level ${s!==t?`is ${f(s,{padding:!0})}, will be restored with more Drops, this doesn't`:"will be set to 0 after any reset, this won't"} affect pre-Puddles boost.
(Effect: ${f(a?(o(t)-1)*r.inflationInfo.globalSpeed:o(s),{padding:!0})} \u27F6 ${f(a?(o(t+1)-1)*r.inflationInfo.globalSpeed:o(t+(s===t?1:0)),{padding:!0})}, weaker after ${f(1e6)} Clouds)`},()=>`Make 'Rain Clouds' boost Seas and their own pre-Puddles effect, at a reduced rate.
(Effect: ${f(y.S2Extra2(y.S2Extra1(e.buildings[2][2].true<1?e.researchesExtra[2][1]:r.vaporizationInfo.S2Extra1),1),{padding:!0})})`,()=>{let t=e.researchesExtra[2][3];return`Submerge and boost Interstellar Stars with 'Surface tension'. Also with 'Surface stress' ^${f(.5)} at level 2, full power at level 3.
(Boost to Stars: ${t<3?`${f(t<1?1:E.S2Upgrade3*(t>1?E.S2Upgrade4**.5:1),{padding:!0})} \u27F6 `:""}${f(E.S2Upgrade3*(t<1?1:E.S2Upgrade4**(t>1?1:.5)),{padding:!0})})`},()=>{let t=e.researchesExtra[2][4];return`High density of Drops will end up boosting Nebulas with 'Surface tension'. Also with 'Surface stress' ^${f(.5)} at level 2, full power at level 3.
(Boost to Nebulas: ${t<3?`${f(t<1?1:E.S2Upgrade3*(t>1?E.S2Upgrade4**.5:1),{padding:!0})} \u27F6 `:""}${f(E.S2Upgrade3*(t<1?1:E.S2Upgrade4**(t>1?1:.5)),{padding:!0})})`}],cost:[],firstCost:[1e18,1e12,1e26,1e14,1e60],scaling:[1e8,1e3,1,1e8,1e8],max:[1,3,1,3,3],maxActive:3},{name:["Rank boost","Efficient growth","Weight","Viscosity","Efficient submersion","Ablative armor"],effectText:[()=>`Increase strength of Cosmic dust by another ${f(1.11)} per level. Max level is based on Rank.
(Total increase: ${f(1.11**e.researchesExtra[3][0],{padding:!0})})`,()=>{let t=y.S3Extra1();return`${e.inflation.vacuum?"Preons hardcap delay":"Mass production"} from Cosmic dust will be even bigger, current formula is ${f(t)} ^ Rank.
(Total boost: ${f(t**r.accretionInfo.effective,{padding:!0})} \u27F6 ${f(y.S3Extra1(e.researchesExtra[3][1]+1)**r.accretionInfo.effective,{padding:!0})})`},()=>"'Gravitational field' will be able to boost Protoplanets, but at reduced strength. (2x boost)",()=>`'Gas' will be ${f(y.S3Upgrade1(y.S3Upgrade1_power(e.researchesExtra[3][3]+1))/y.S3Upgrade1(),{padding:!0})} times stronger with every level.`,()=>`Submerge quicker by boosting Puddles, effect is based on Rank.
(Current boost: ${f(y.S3Extra4(),{padding:!0})} \u27F6 ${f(y.S3Extra4(e.researchesExtra[3][4]+1),{padding:!0})})`,()=>`Protect your Mass from being removed by removing Cosmic dust hardcap instead.
Second level will redirect delay to the hardcap as a boost to Cosmic dust that ignores softcap.
(Current hardcap delay is ${f(y.dustDelay(),{padding:!0})})`],cost:[],firstCost:[1e-18,1e-7,1e26,1e9,1e-10,198847e35],scaling:[10,100,1,1e5,1e12,5024e56],max:[14,6,1,5,1,2],maxActive:4},{name:["Nova","Mass transfer","White dwarfs","Quark-nova","White holes"],effectText:[()=>`This violent stellar explosion is the main source of Elements, but also starts the formation of new Stars.
Unlock a new Star type and even more, after Collapse of that Star type.
(Will require at least ${f(r.collapseInfo.unlockB[Math.min(e.researchesExtra[4][0]+2,4)])} Solar mass to create that new Star type)`,()=>`Star material will transfer from one Star to another, improving Solar mass gain${e.inflation.vacuum?" (also delaying Preons hardcap)":""} by ${f(y.S4Extra1())} in the process.
Improved by 'Star system' levels, but also improves their scaling (effect increase for 'Star system' is ${f(new T(y.S4Research1(void 0,1)/y.S4Research1(void 0,0)).power(r.collapseInfo.trueStars),{padding:!0})}).`,()=>`After matter were dispeled from Red giant, White dwarf was all that remained.
Improve effect of '[6] Carbon' by +${f(.5)} and increase max level of 'Star system' by +1.`,()=>`As Neutron stars spin down, some of them may get converted into Quark stars.
This will add a new effect to Neutron stars \u2012 Interstellar Stars are cheaper, and will also increase max level of 'Star system' by +1.`,()=>"Spawn White holes that will boost global speed with current Black holes effect."],cost:[],firstCost:[4e4,2e9,1e50,1e136,"1e680"],scaling:[1e10,1,1,1,1],max:[3,1,1,1,1],maxActive:3},{name:["Hypercompact stellar system","Interacting Galaxies","Central dominant Galaxy","More Merges","Compact Group","Interacting Groups"],effectText:[()=>`Super dense core which will allow creation of a new Structure. That Structure will increase Stage reset reward${e.inflation.vacuum?", starting Energy after any Reset":""}, boost Nebulas and Star clusters. But creating it will fully reset ${e.inflation.vacuum?"all":"Interstellar and Intergalactic"} Stages.
This Research also removes Solar mass and other Remnant requirements from everything in the Interstellar Stage.`,()=>`Unlock a new Result for the Merge resets, requires enough self-made Galaxies before Merging.${r.researchesExtraInfo[5].max[1]>1?`
Second level will allow the use of the excess Galaxies from previous Merge resets when forming new Galaxy groups.`:""}${Ae(4)}`,()=>{let t=e.researchesExtra[5][2]+e.merge.rewards[1],s=r.mergeInfo.S5Extra2;return`An even bigger Galaxy to improve Stage reset reward and Galaxy groups effect with every Galaxy group.
Effective level is ${f(s,{padding:s!==t})}, will be ${s!==t?"restored with more Stardust, this doesn't":"set to 0 after any reset, this won't"} affect Stage reset reward.
(Total boost: ${f(y.S5Extra2(s),{padding:!0})} \u27F6 ${f(y.S5Extra2(t+(t===s?1:0)),{padding:!0})})${Ae(5,60,70)}`},()=>`Increase max allowed Merge resets by +1 per level.${Ae(5,90,110)}`,()=>`Decrease amount of Galaxies required for the creation of a Galaxy Group.
(Effect: ${y.S5Extra4()} \u27F6 ${y.S5Extra4(e.researchesExtra[5][4]+1)})${Ae(80,100)}`,()=>`Unlock the second Merge result${r.researchesExtraInfo[5].max[5]>1?" and it make able to use excess Galaxies at level 2":""}${Ae(100)}.`],cost:[],firstCost:[1e80,1e270,"1e360","1e390","1e510","1e660"],scaling:[1,1e120,1e30,1e90,1e90,1e270],max:[1,1,1,1,1,1],maxActive:1},{name:["Faster aggregation","Time dilation","Expansion","Quintessence","Stability"],effectText:[()=>"Increases how many levels of 'Faster aggregation' boost production by 3 instead of 2 and max level by +1.",()=>`Delay 'Global boost' Inflaton Inflation softcap by (1 + level) ^2.
Also increase max level of 'Acceleration' by +2.`,()=>{let t=y.effectiveDarkEnergy();return`Delay Dark matter softcap by current Dark energy ^(level / 8).
(Current delay: ${f(t**(e.researchesExtra[6][2]/8),{padding:!0})} \u27F6 ${f(t**((e.researchesExtra[6][2]+1)/8),{padding:!0})})`},()=>{let t=y.darkSoftcap(!0);return`Buff Universes with Dark matter softcap delays ^(level / 40) by improving the ratio of kinetic and potential Dark energy.
(Current effect: ${f(t**(e.researchesExtra[6][3]/40),{padding:!0})} \u27F6 ${f(t**((e.researchesExtra[6][3]+1)/40),{padding:!0})})`},()=>`Increase Dark fluid gain by +^${f(.05)} and starting effective Dark energy by +Dark fluid effect * level / 4.`],cost:[],firstCost:[25,25,25,100,100],scaling:[25,25,25,100,200],max:[4,4,8,8,4],maxActive:0}],researchesAutoInfo:{name:["Upgrade automatization","Element automatization","Reset automatization"],effectText:[()=>{let t="none";return e.researchesAuto[0]>=1&&(t="auto Upgrades"),e.researchesAuto[0]>=2&&(t+=`, Stage${e.researchesAuto[0]>=3?" and Special":""} Researches`),`Automatically create all ${["Upgrades","Stage Researches","Special Researches"][Math.min(e.researchesAuto[0],2)]} from any Stage.
(Unlocked automatization: ${t})`},()=>`Elements will no longer require Collapse for activation.
Second level will unlock auto creation of Elements.`,()=>{let t=`Unlock auto ${["Discharge",e.inflation.vacuum?"Rank":"Vaporization",e.inflation.vacuum?"Vaporization":"Rank","Collapse"][Math.min(e.inflation.vacuum?e.researchesAuto[2]:e.stage.current-1,3)]} level 1.`;if(!e.inflation.vacuum)return t;let s=[];return(e.researchesAuto[2]>=1||e.strangeness[1][4]>=1)&&s.push("Discharge"),(e.researchesAuto[2]>=2||e.strangeness[3][4]>=1)&&s.push("Rank"),(e.researchesAuto[2]>=3||e.strangeness[2][4]>=1)&&s.push("Vaporization"),(e.researchesAuto[2]>=4||e.strangeness[4][4]>=1)&&s.push("Collapse"),`${t}
Auto resets unlocked through Strangeness will skip related levels and reduce cost by skipped levels.
(Unlocked and skipped auto resets: ${s.length===0?"none":s.join(", ")})`}],costRange:[[1e13,2e34,1e30],[136e3,272e3],[1200,1800,2400,3e3,3600]],autoStage:[[2,3,4],[1,1],[6,6,6,6,6]],max:[3,2,1]},ASRInfo:{name:"Auto Structures",effectText:()=>{let t=e.stage.active,s=Math.min(e.ASR[t]+1,Math.max(r.ASRInfo.max[t],1)),a=!0;t===3?s===2?a=e.stage.true>=6||e.stage.resets>=5||e.upgrades[3][2]===1||e.buildings[3][2].trueTotal.moreThan(0):s===3?a=e.stage.true>=6||e.stage.resets>=5||e.upgrades[3][4]===1||e.buildings[3][3].trueTotal.moreThan(0):s===5&&(a=e.stage.true>=7||e.stage.resets>=1||e.upgrades[3][11]===1||e.buildings[3][5].trueTotal.moreThan(0)):t===4?s===5&&(a=e.stage.true>=7||e.stage.resets>=1||e.elements[26]>=1):t===5?s===1?a=e.stage.true>=6||e.milestones[2][0]>=7:s===2?a=e.stage.true>=6||e.milestones[3][0]>=7:s===3&&(a=e.stage.true>=6||e.milestones[4][1]>=8):t===6&&s===1&&(a=e.stage.true>=9||e.upgrades[6][0]===1||e.researches[6][0]>=6);let o=r.buildingsInfo.name[t],i="";for(let l=1;l<e.ASR[t]+1;l++)l!==1&&(i+=", "),i+=o[l],(t===1&&(e.tree[1][8]>=1||l===1&&e.inflation.vacuum&&e.strangeness[1][8]>=1&&(e.challenges.supervoid[3]>=5||e.researchesExtra[1][2]>=1))||t===2&&e.tree[1][8]>=2||t===3&&e.tree[1][8]>=3||t===4&&e.tree[1][8]>=4||t===5&&(e.tree[1][8]>=4||l===3))&&(i+="!");return`Automatically make ${a?o[s]:"(Unknown)"} (counts as self-made) if cost is ${f(e.toggles.shop.wait[t])} times of the available resources.
(Unlocked auto Structures: ${i!==""?`${i}${i.includes("!")?". '!' means that it ignores wait value":""}`:"none"})`},costRange:[[],[2e3,8e3,16e3,32e3,56e3],[1e10,1e14,1e18,1e23,1e28,1e30],[1e-7,1e10,5e29,245576045e23,2e36],[1e6,1e17,1e28,1e39,1e52],[1e56,1e60,1e100],[8e12]],max:[0,3,5,4,4,3,0]},elementsInfo:{name:["[0] Neutronium","[1] Hydrogen","[2] Helium","[3] Lithium","[4] Beryllium","[5] Boron","[6] Carbon","[7] Nitrogen","[8] Oxygen","[9] Fluorine","[10] Neon","[11] Sodium","[12] Magnesium","[13] Aluminium","[14] Silicon","[15] Phosphorus","[16] Sulfur","[17] Chlorine","[18] Argon","[19] Potassium","[20] Calcium","[21] Scandium","[22] Titanium","[23] Vanadium","[24] Chromium","[25] Manganese","[26] Iron","[27] Cobalt","[28] Nickel","[29] Copper","[30] Zinc","[31] Gallium","[32] Germanium","[33] Arsenic","[34] Selenium","[35] Bromine","[36] Krypton"],effectText:[()=>`Element with no protons, true head of this table.
This one is ${Math.random()<.1?Math.random()<.1?"an illusive Tetraneutron, or maybe even Pentaneutron. Wait where did it go? Was it even there?":"a rare Dineutron, but it is already gone...":"a simple Mononeutron, it will stay with you for as long as it can."}`,()=>`The most basic Element, increases Brown dwarfs${e.inflation.vacuum?" and Puddles":""} production by 2.`,()=>`Fusion reaction byproduct, makes Interstellar Stars cost scale -${f(.1)} less.`,()=>`First metal, base for Solar mass gain${e.inflation.vacuum?" and delay to the Cosmic dust hardcap":""} from Brown dwarfs will be lightly increased.
(Additive, boost is equal to ${f(1.5)}x when nothing else boosting it)`,()=>`Brittle earth metal and so is the brittle increase to the production.
(${f(1.4)}x boost to Interstellar Stars${e.inflation.vacuum?" and Cosmic dust":""})`,()=>`A new color and a new additive boost to the base of Solar mass gain base ${e.inflation.vacuum?" (and delay to the Cosmic dust hardcap)":""} that is based on self-made Brown dwarfs.`,()=>`Base for organics, it will increase the boost from Red giants by ^${f(y.element6())}.`,()=>"The most abundant Element in the atmosphere of some Planets, it allows for 2 more levels of 'Star system'.",()=>`An oxidizing agent that will make Interstellar Stars cost scale even slower. (-${f(.05)} less)`,()=>"Highly toxic and reactive, +12 to max level of 'Planetary system'.",()=>`A noble 2x boost to the Solar mass gain${e.inflation.vacuum?" and delay to the Preons hardcap":""}.`,()=>"Through leaching will increase max level of 'Protoplanetary disk' by +1.",()=>"Stars are inside you, as well Neutron stars will improve themselfs by log4 of their own amount.",()=>"Has a great affinity towards Oxygen and to decrease cost of Interstellar Stars by 100.",()=>`Just another tetravalent metalloid, and so is another ${f(1.4)}x boost to Interstellar Stars${e.inflation.vacuum?" and Cosmic dust":""}.`,()=>`One of the fundamentals for Life and to make all self-made Stars to boost Solar mass gain${e.inflation.vacuum?" and delay Cosmic dust hardcap":""}.`,()=>"A burning rock that will increase max level of 'Star system' by 1.",()=>"Extremely reactive to extend max level of 'Planetary system' by another 24 levels.",()=>"Less noble, but Black holes effect will be a little stronger.",()=>"Don't forget about it and it will increase effective level of 'Planetary system' by +1.",()=>"Get stronger by increasing max level of 'Star system' by +1.",()=>`A new color and a rare bonus of ^${f(1.1)} to the Solar mass effect.`,()=>"Part of a new alloy that will allow for Red giants to be added into an effective amount of Neutron stars.",()=>`Catalyst for production of Stardust. 'Gamma-ray burst' effect will be increased by Solar mass ^${f(.1)}.
(Effect increase: ${f(e.collapse.mass**.1,{padding:!0})})`,()=>`No corrosion, only boost to Interstellar Stars that is based on unspent Stardust ^${f(y.element24_power())}.
(Boost to Stars: ${f(y.element24(),{padding:!0})})`,()=>"Brittle Element, but not the bonus \u2012 1 more level in 'Star system'.",()=>`Any further fusion will be an endothermic process. ${e.inflation.vacuum?`Unlock a new Star type${e.strangeness[5][3]>=1?" and Intergalactic Stage":""}`:"Enter Intergalactic space"}.
${e.stage.true>=6||e.strange[0].total>=1?`Current base increase for Stage reset reward is +${f(E.element26,{padding:!0})}, which is equal to log10(Stardust produced this Stage) - 48.${e.elements[29]>=1?`
(Formula doesn't show improvement from '[29] Copper', but base increase does)`:""}`:"(Can change active Stage from footer, new effect will be added after another Stage reset)"}`,()=>`Combined and ready to make Red giants effect improve Brown dwarfs.
Also improves '[24] Chromium' Element by +^${f(.01)}.`,()=>`Slow to react, but it will increase effective amount of Red giants ${f(1.5)}.
Oh, and it also will increase max level of 'Star system' by +1.`,()=>`Does not need to be prepared to increase Stage reset reward base by Arithmetic progression with step of ${f(.01)}.`,()=>`First of new Elements to come, increases max allowed Merge resets by +1 for every new Element past '[29] Copper'.
(Currently highest created Element in the current Stage reset is '${r.elementsInfo.name[e.collapse.maxElement]}', equals to +${Math.max(Math.min(e.collapse.maxElement,29+e.verses[0].true)-29,0)} allowed Merges)`,()=>"Will melt in the palm of your hand to increase max level of 'Star system' by +1.",()=>`Too late to appear, but it will make Galaxies scale in cost slower by ${f(-.01)} anyway.`,()=>"Toxic enough to make Red giants effect improve Red supergiants.",()=>"Capable of sensing an +1 increase to the max level of 'Star system'.",()=>"The only liquid nonmetal to increase the max level of 'Inner Black hole' by +1.",()=>`Nothing special, just an ${f(1.21)}x decrease to Galaxies cost.`],cost:[0,1e3,4e3,2e4,1e5,1e8,1e10,4e11,8e12,6e13,1e15,1e20,1e22,1e24,14e25,1e28,1e30,1e32,2e36,1e38,1e39,1e41,2e42,3e43,4e44,5e45,1e48,1e54,1e58,1e140,1e220,1e240,1e260,"1e330","1e450","1e6000","1e8200"],maxActive:29},strangenessInfo:[{},{name:["Fundamental boost","Better improvement","Cheaper Discharge","Free Discharge","Automatic Discharge","Auto Structures","Strange boost","Energy increase","Conservation of Mass","Conservation of Energy"],effectText:[()=>`Boost Microworld Structures by ${f(e.inflation.vacuum?2:1.8)}.`,()=>`Base for 'Improved Tritium' Research will be bigger by +${f(e.inflation.vacuum?1.5:1)}.
(Boost from it at current Research level is ${f((y.S1Research2(e.strangeness[1][1]+1)/y.S1Research2())**e.researches[1][2],{padding:!0})})`,()=>`Discharge goals requirement will scale slower. (-${f(.5)})
(Creating this Strangeness will make the next Discharge goal to be ${f(y.dischargeCost(y.dischargeScaling(void 0,e.strangeness[1][2]+1)))} Energy)`,()=>`Obtain +${f(.5)} bonus Discharge goals.`,()=>`Automatically Discharge upon reaching next Goal or spending Energy. (Needs to be enabled in Settings)${r.strangenessInfo[1].max[4]>1?`
Second level will make Discharge goals to be based on true Energy and without needing to reset.`:""}`,()=>"Make auto for all Microworld Structures permanent.",()=>`Unspent Strange quarks will boost Microworld by improving its Structures${r.strangenessInfo[1].max[6]>1?" at level 1 and by reducing Discharge goals requirement at level 2":""}.
${r.strangenessInfo[1].max[6]>1&&e.inflation.vacuum?`Second level also improves formula by +^${f(.08)}. `:""}(Formula: Strange quarks ^${f(e.inflation.vacuum?e.strangeness[1][6]>=2?.34:.26:.22)} | Effect: ${f(r.strangeInfo.stageBoost[1],{padding:!0})})`,()=>"Increase Energy gain from creating Preons by +2.",()=>{let t=e.challenges.supervoid[3]>=5;return`No Mass will be lost when creating Preons${t?"":", only works when Accretion Stage is unlocked"}.
Second level will disable auto Accretion Structures while Cosmic dust is hardcapped and don't have enough Mass for the highest Solar mass conversion${t?" or to increase current Rank, but only if Rank is below 'Protostar' and 'Automatic Rank' level is below 2":", only works if Interstellar Stage is unlocked"}.`},()=>`No Energy will be lost when creating Upgrades or Researches${e.challenges.supervoid[3]<5?", only works when Interstellar Stage is unlocked":""}.`],cost:[],firstCost:[1,1,1,2,12,2,24,2,12,15600],scaling:[2.46,2,6,4,400,1,1e308,6,10,1e308],max:[6,4,4,2,1,1,1,2,2,1],maxActive:7},{name:["More Moles","Bigger Puddles","More spread","Cloud density","Automatic Vaporization","Auto Structures","Strange boost","Improved flow","Mechanical spread","Ocean world"],effectText:[()=>`Drops will ${e.inflation.vacuum?"improve Tritium":"produce"} 2 times more${e.inflation.vacuum?"":" Moles"}.`,()=>`Puddles will produce ${f(e.inflation.vacuum?1.8:1.6)} times more Drops.`,()=>{let t="none";return e.strangeness[2][2]>=1&&(t="max level increased for 'More streams' (+1)"),e.strangeness[2][2]>=2&&(t+=" and 'Distributary channel' (+1)"),e.strangeness[2][2]>=3&&(t+=", a new Upgrade \u2012 'Tsunami'"),`Increase max level for one of the Researches. Final level will instead unlock a new Upgrade.
(Current effect: ${t})`},()=>`Decrease amount of Drops required to get a Cloud by ${f(e.inflation.vacuum?2.5:2)}.`,()=>`Automatically Vaporize when reached enough boost from new Clouds. (Needs to be enabled in Settings)${r.strangenessInfo[2].max[4]>1?`
Second level will unlock an automatic ${f(2.5)}% gain of Clouds per second${e.tree[1][5]>=1?" or if its already unlocked, then increase gain by 4":""}.${e.stage.true>=7?" (Not affected by global speed)":""}`:""}`,()=>"Make auto for all Submerged Structures permanent.",()=>`Unspent Strange quarks will boost Submerged by improving Puddles${r.strangenessInfo[2].max[6]>1?" at level 1 and by reducing Drops requirement for Clouds at level 2":""}.
(Formula: Strange quarks ^${f(e.inflation.vacuum?.22:.18)} | Effect: ${f(r.strangeInfo.stageBoost[2],{padding:!0})})`,()=>`Submerged Structures that improve other Submerged Structures will do it ${f(1.24)} times stronger.
(Affected Structures are Ponds, Lakes, Seas and Oceans)`,()=>{let t="none";return e.strangeness[2][8]>=1&&(t="max level increased for 'Stronger surface tension' (+3)"),e.strangeness[2][8]>=2&&(t+=" and 'Stronger surface stress' (+1)"),e.strangeness[2][8]>=3&&(t+=", a new Upgrade \u2012 'Tide'"),`Increase max level for one of the Researches. Final level will instead unlock an even better new Upgrade.
(Current effect: ${t})`},()=>`Increase Stage reset reward based on current Cloud amount.
(Formula: ${e.tree[1][5]>=4?`Clouds ^${f(.01)}`:"log10(Clouds) / 80 + 1"} | Effect: ${f(y.S2Strange9(),{padding:!0})})`],cost:[],firstCost:[1,1,2,2,12,4,24,16,800,9600],scaling:[2.46,2,3,4,800,1,1e308,3.4,3,1],max:[4,8,3,2,1,1,1,6,3,1],maxActive:7},{name:["Faster Accretion","Intense weathering","More levels","Improved Satellites","Automatic Rank","Auto Structures","Upgrade automatization","Strange boost","Mass delay","Rank raise"],effectText:[()=>`Increase strength of Cosmic dust by ${f(1.8)}.`,()=>`Accretion Structures that produce other Accretion Structures will do it ${f(e.inflation.vacuum?1.48:1.6)} times faster.
(Affected Structures are Planetesimals and Protoplanets)`,()=>{let t="none";return e.strangeness[3][2]>=1&&(t="max level increased for 'Rank boost' (+6)"),e.strangeness[3][2]>=2&&(t+=" and 'Efficient growth' (+2)"),e.strangeness[3][2]>=3&&(t+=", a new Upgrade \u2012 'Hydrostatic equilibrium'"),`Increase max level for one of the Rank Researches. Final level will instead unlock a new Upgrade.
(Current effect: ${t})`},()=>(r.stageInfo.activeAll.includes(3)||R.stage3Cache(),`Satellites will be able to improve remaining ${e.inflation.vacuum?"Accretion ":""} Structures, but at reduced strength (^${f(e.inflation.vacuum?.1:.2)}).
(Affected Structures are Cosmic dust and Planetesimals, boost is equal to ${f(E.S3Strange3,{padding:!0})})`),()=>`Automatically increase Rank when possible. (Needs to be enabled in Settings)${r.strangenessInfo[3].max[4]>1?`
Second level will make Rank ${e.challenges.supervoid[3]>=2?"to be based on Mass produced this reset and without needing to reset":"increase use Mass produced this reset instead of current"}.`:""}`,()=>"Make auto for all Accretion Structures permanent.",()=>{let t="none";return e.strangeness[3][6]>=1&&(t="auto Upgrades"),e.strangeness[3][6]>=2&&(t+=`, Stage${e.strangeness[3][6]>=3?" and Special":""} Researches`),`Always automatically create all ${["Upgrades","Stage Researches","Special Researches"][Math.min(e.strangeness[3][6],2)]} from any Stage${!e.inflation.vacuum&&e.strangeness[5][3]<1&&e.verses[0].current<3?" before Intergalactic":""}.
(Needs to be enabled in Settings, unlocked automatization: ${t})`},()=>`Unspent Strange quarks will boost Accretion by reducing cost for its Structures${r.strangenessInfo[3].max[7]>1?" at level 1 and by improving 'Gravity' at level 2":""}.
(Formula: Strange quarks ^${f(e.inflation.vacuum?.68:.76)} | Effect: ${f(r.strangeInfo.stageBoost[3],{padding:!0})})`,()=>`Delay Cosmic dust hardcap by ${f(1.4)} per level.`,()=>`Unlock a new Accretion Rank to achieve.${r.strangenessInfo[3].max[9]>1?`
Second level will allow Ranks to go above the max, but they will not unlock anything new.`:""}`],cost:[],firstCost:[1,2,2,24,12,4,4,24,18e3,216e4],scaling:[2,3.4,3,1,100,1,1.74,1e308,2.46,4e6],max:[8,4,3,1,1,1,3,1,6,1],maxActive:8},{name:["Hotter Stars","Cheaper Stars","New Upgrade","Main giants","Automatic Collapse","Auto Structures","Element automatization","Strange boost","Neutronium","Newer Upgrade"],effectText:[()=>`Interstellar Stars will produce ${f(1.6)} times more Stardust.`,()=>"Interstellar Stars will be 2 times cheaper.",()=>{let t="none";return e.strangeness[4][2]>=1&&(t="'Planetary nebula' (Stage Research)"),e.strangeness[4][2]>=2&&(t+=", 'White dwarfs' (Collapse Research)"),e.strangeness[4][2]>=3&&(t+=", 'Helium fusion' (Upgrade)"),`Unlock a new Upgrade, its pretty good.
(Current unlocks: ${t})`},()=>{let t=e.inflation.vacuum&&e.challenges.supervoid[4]>=3,s=t?(5+5*e.strangeness[4][3])*e.strangeness[4][3]:10,a=(10+5*e.strangeness[4][3])*(1+e.strangeness[4][3]);return`${s}%${t?` \u27F6 ${a}%`:""} of Brown dwarfs will be able to turn into Red giants after Collapse.${t?`
Also ${s}% \u27F6 ${a}% of Main-sequence into Neutron stars.`:""}`},()=>`Automatically Collapse once reached enough boost or Solar mass. (Needs to be enabled in Settings)${r.strangenessInfo[4].max[4]>1?`
Second level will unlock an automatic Star remnants${r.strangenessInfo[4].max[4]>2?" (and Solar mass with third level)":""} without needing to reset.`:""}`,()=>"Make auto for all Interstellar Structures permanent.",()=>`Elements will no longer require Collapse for activation${e.inflation.vacuum?" and related automatization Research will cost as if its level is -1":""}.
Second level will unlock auto creation of Elements. (${r.strangenessInfo[4].max[6]>1?"Needs to be enabled in settings":"Not yet unlocked for Interstellar space"})`,()=>`Unspent Strange quarks will boost Interstellar by improving its Structures${r.strangenessInfo[4].max[7]>1?" at level 1 and by reducing cost of Brown dwarfs at level 2":""}.
${r.strangenessInfo[4].max[7]>1&&e.inflation.vacuum?`Second level also improves formula by +^${f(.02)}. `:""}(Formula: Strange quarks ^${f((e.strangeness[4][7]>=2&&e.inflation.vacuum?.18:.16)*(e.elements[26]>=1?2:1))}, exponent is 2 times bigger with '[26] Iron' | Effect: ${f(r.strangeInfo.stageBoost[4],{padding:!0})})`,()=>`Increase effective amount of Neutron stars (doesn't include ones from '[22] Titanium') by 1 + level and improve Neutron stars strength by +^${f(.125)}.`,()=>{let t="none";return e.strangeness[4][9]>=1&&(t="'Nucleosynthesis' (Upgrade)"),e.strangeness[4][9]>=2&&(t+=", 'Quark-nova' (Collapse Research)"),e.strangeness[4][9]>=3&&(t+=", 'Inner Black hole' (Stage Research)"),`Unlock yet another an even better new Upgrade.
(Current unlocks: ${t})`}],cost:[],firstCost:[1,2,4,2,12,6,6,24,12e3,24e4],scaling:[2,3.4,3,4,1900,1,1.74,1e308,2,3],max:[8,4,3,2,1,1,1,1,8,3],maxActive:8},{name:["Bigger Structures","Higher density","Strange gain","Gravitational bound","Automatic Galaxy","Auto Structures","Automatic Stage","Strange boost","Strange growth","Automatic Merge","Galactic tide"],effectText:[()=>`More matter for the Accretion (flavor text), first two Intergalactic Structures will be ${f(e.inflation.vacuum?1.4:1.6)} times stronger.`,()=>`With higher density, first two Intergalactic Upgrades will be even stronger. Effects will be increased by ${f(e.inflation.vacuum?1.6:1.8)}.`,()=>`Gain ${f(1.4)} times more Strange quarks from any Stage reset.`,()=>e.inflation.vacuum?"Unlock Intergalactic Stage and increase Strange quarks from Stage resets by +1.":`Make Intergalactic Stage immune to Collapse reset${e.verses[0].current<3?" and allow 'Upgrade automatization' to work within the Intergalactic Stage":""}.`,()=>`Automatically Collapse if able to afford a new Galaxy and auto Galaxy is enabled.
(Also unlocks permanent auto Galaxies for free and removes Mass limit for auto Collapse points)`,()=>`Make auto for ${e.strangeness[5][4]>=1?"all":"the first two"} Intergalactic Structures permanent${e.strangeness[5][4]<1?" and prevent higher levels from resetting":""}.`,()=>`Automatically trigger Stage reset${e.inflation.vacuum?"":", doesn't work for the Interstellar Stage until second level"}${e.stage.true>=6?", unlocks automatic Challenge exit for Challenges instead":""}. (Needs to be enabled in Settings)`,()=>`Unspent Strange quarks will boost Intergalactic by increasing Solar mass gain${r.strangenessInfo[5].max[7]>1?" at level 1 and by improving its Structures at level 2":""}.
(Formula: Strange quarks ^${f(.06)} | Effect: ${f(r.strangeInfo.stageBoost[5],{padding:!0})})`,()=>`Unlock another Strange Structure.
(Click on that Structure to see its effects)`,()=>`Automatically Merge Galaxies if can't get any more of them quickly. (Needs to be enabled in Settings)${r.strangenessInfo[5].max[9]>1?`
Second level will unlock an automatic Merge results without needing to reset.`:""}`,()=>{let t="none",s="none";return e.strangeness[5][10]>=1&&(t=`increasing Energy gain from Galaxies by 5, decreasing Goals requirement by ${f(r.mergeInfo.galaxies**2+1,{padding:"exponent"})}`,s="'Nuclear fission' (Microworld Upgrade), 'Radioactive decay' (Energy Research)"),e.strangeness[5][10]>=2&&(t+=`, boosting Puddles ${e.strangeness[5][10]>=3?"and Cosmic dust strength ":""}by ${f(r.mergeInfo.galaxies+1,{padding:"exponent"})}`,s+=`${e.tree[1][5]>=3?", 'Megatsunami' (Submerged Research)":""}, 'Jeans Mass' (Clouds Research)`),e.strangeness[5][10]>=3&&(t+=`, delaying Cosmic dust hardcap by ${f(r.mergeInfo.galaxies/100+1,{padding:!0})}`,s+=", 'Self-gravity' (Accretion Upgrade), 'Ablative armor' (Rank Research)"),e.strangeness[5][10]>=4&&(e.tree[1][7]>=3&&(t+=`, boosting Solar mass gain by ${f(r.mergeInfo.galaxies/1e3+1,{padding:!0})}`),s+=", 'Proton capture' (Interstellar Upgrade), 'White holes' (Collapse Research)"),`Boost lower Stages based on current Galaxies and unlock new Upgrades for them.
(Passive effects: ${t})
(New Upgrades: ${s})`}],cost:[],firstCost:[24,36,4,24,15600,24,480,120,6e3,6e6,2e7],scaling:[2,2,4,1,1e308,1,1,1e308,1e308,1e308,3],max:[8,8,2,1,1,1,1,1,1,1,3],maxActive:8},{name:["Global boost","Stranger gain","More Strangeness","Darkness"],effectText:[()=>`Boost global speed by ${f(1.4)}.`,()=>`Gain ${f(1.4)} times more Strangelets from the Stage resets.`,()=>{let t="none";return e.strangeness[6][2]>=1&&(t="'Automatic Collapse' (+1)"),e.strangeness[6][2]>=2&&(t+=", 'Bigger Puddles' (+6)"),e.strangeness[6][2]>=3&&(t+=", 'Cheaper Stars' (+4)"),e.strangeness[6][2]>=4&&(t+=", 'Improved flow' (+3)"),e.strangeness[6][2]>=5&&(t+=", 'Hotter Stars' (+4)"),e.strangeness[6][2]>=6&&(t+=", 'Bigger Structures' and 'Higher density' (+1)"),`Increase max levels of the Strangeness.
(Current increases: ${t})`},()=>{let t="none";return e.strangeness[6][3]>=2&&(t="auto Dark planets"),e.strangeness[6][3]>=3&&(t+=`, auto Upgrades and ${e.strangeness[6][3]>=5?"all":"Stage"} Researches`),e.strangeness[6][3]>=4&&(t+=", auto Nucleation"),`Expand Abyss Stage by unlocking mini Stage \u2012 'Darkness' within, there is special reward for clearing it.
(This Strangeness will prevent update of the highest self-made Universe stat on Big Crunch, WIP)
Further levels will instead unlock more automatizations for Darkness.
(Unlocked automatization: ${t})`}],cost:[],firstCost:[2e13,4e13,6e13,5e12],scaling:[5,5,25e9,20],max:[9,9,6,5],maxActive:0}],treeInfo:[{name:["Overboost","Global boost","Strange gain","Instability","Void Milestones","Improved Offline","Better rewards"],effectText:[()=>`Boost global speed by 2, but reduce time limit on everything that has it by 4, if level is below 2.
If there is no time limit, then 2nd level will instead boost global speed by ${e.challenges.stability>=2?2:`${f(y.T0Inflation0(),{padding:!0})} (strength depletes over 1 hour of the Stage time)`}.`,()=>{let t=y.T0Inflation1();return`Boost global speed by unspent Dark matter ^${f((t>1?ge(t,e.buildings[6][0].current.toNumber()+1):.04)*e.tree[0][1],{padding:!0})}.
(Boost per level: ${f(t,{padding:!0})}, softcaps after ${f(y.TOInflation1_softcap())} Dark matter. Global speed doesn't speed up game ticks)`},()=>`Gain ${f(1.4)} times more Strange quarks from any Stage reset per level.${e.challenges.stability>=1?`
First ${e.challenges.stability} levels (1 per Vacuum stability completion) will also boost global speed by ${f(1.2)}, but only while inside any Challenge.`:""}`,()=>`Boost global speed and Stage reset reward by ${f(y.T0Inflation3())}, strength is based on Supervoid progress in the current End reset.`,()=>`For false Vacuum it will remove time limit from Milestones.
For true Vacuum it will unlock false Vacuum Milestones for Void. Their effects are active everywhere, but only if this Inflation is active.`,()=>{let t=e.tree[0][5];return`Unlock 1 minute Warps for the price of ${6-t}${t<4?` \u27F6 ${5-t}`:""} minutes of stored Offline time.
Increase Export storage by +${(2+2*t)*t}%${t<4?` \u27F6 ${(4+2*t)*(t+1)}%`:""} of the Stage reset value after any Stage reset.
If inside any Challenge, then it will boost global speed by ${f(5/(5-t))}${t<4?` \u27F6 ${f(5/(4-t))}`:""}, but also decrease time limit by ${f(6/(6-t))}${t<4?` \u27F6 ${f(6/(5-t))}`:""}.
(Also having this Inflation unlocked allows to store Offline time by rejecting it, max storage is 12 hours)`},()=>`More rewards from first 4 in Stage resets:
+3 free Goals, 2 times more Clouds, +1 effective Rank and ${f(1.1)}x to the Solar mass gain.`],cost:[],firstCost:[0,1,1,2,4,1,999],scaling:[2,.75,.5,2,0,1,0],max:[2,6,8,4,1,4,1]},{name:["More global speed","More Strange quarks","More Cosmons","Stranger gain","Discharge improvement","Vaporization improvement","Rank improvement","Collapse improvement","Conservation of resources"],effectText:[()=>`Boost global speed again by ${f(1.4)}.`,()=>`Boost Strange quarks gain from the Stage resets again by ${f(1.2)}.`,()=>`Gain ${f(1.4)} times more Cosmons from Universes.`,()=>`Boost Strangelets gain from the Stage resets by ${f(1.4)} and increase max level of 'Strange gain' Inflation by +1.`,()=>`True Vacuum only, gain +1 free Goal, improve Discharge base by +${f(.1)} (immune to the softcap) and decrease requirement scaling by -${f(.5)} with every level.`,()=>`True Vacuum only, make 'Natural Vaporization' Clouds Research old effect permanent and replace it with auto Vaporization level 2 (it itself will now increase strength by 4), second level will increase its max level by +3, third level will unlock a new Research for 'Galactic tide' Strangeness.
Final level will improve 'Ocean world' Strangeness formula: log10(x) / 80 + 1 \u27F6 x ^${f(.01)}.
Also decreases required Drops for a Cloud by 2 per level.`,()=>`True Vacuum only, make effective Rank boost even more: (all effects are per Rank)
+${f(.5)} Discharge goals at level 1, +1 to max level of 'Planetary system' Interstellar Research at level 2, ${f(1.01)}x to the Solar mass gain at level 3 and finally ${f(1.02)}x to Strange quarks at level 4.`,()=>`True Vacuum only, reclaim up to 25% of Remnants once (doesn't affect Milestones).
Second level will increase max level of 'Galactic tide' Strangeness, but without passive effects until level 3.
Final level will __No_Idea__.`,()=>{let t="none";e.tree[1][8]>=1&&(t="Microworld"),e.tree[1][8]>=2&&(t+=", Submerged"),e.tree[1][8]>=3&&(t+=", Accretion"),e.tree[1][8]>=4&&(t+=", Interstellar, Intergalactic");let s=Math.min(e.tree[1][8]+1,4);return`Keep more of ${r.stageInfo.word[s]}${s===4?" and Intergalactic":""} Resources by making related Structures${s>=4?" (doesn't include Galaxies)":""} not spend them on creation.
(Affected Stages: ${t})`}],cost:[],firstCost:[1,1,4,400,1.6,100,1,600,6],scaling:[.5,.5,4,2,.4,2.4,2.6,3.4,2.4],max:[1e6,1e6,1e6,8,4,4,4,4,4]}],milestonesInfo:[{},{name:["Fundamental Matter","Energized"],needText:[()=>`Produce at least ${f(r.milestonesInfo[1].need[0])} ${e.inflation.vacuum?"Preons":"Quarks"} this reset.`,()=>`Have current Energy reach ${f(r.milestonesInfo[1].need[1])}.`],rewardText:[()=>e.inflation.vacuum?`Microworld Structures strength increased by ${f(r.milestonesInfo[1].reward[0],{padding:!0})}.`:"Increase base for Strange quarks from any Stage reset by +1.",()=>e.inflation.vacuum?`Effective Energy increased by ${f(r.milestonesInfo[1].reward[1],{padding:!0})}.`:"Permanent Microworld Stage."],need:[],reward:[0,0],scaling:[[1e152,1e158,1e164,1e170,1e178,1e190],[23800,24600,25800,27e3,28200,29600]],recent:[0,0]},{name:["A Nebula of Drops","Just a bigger Puddle"],needText:[()=>`Produce at least ${f(r.milestonesInfo[2].need[0])} Drops this reset.`,()=>`${e.inflation.vacuum?"Vaporize to":"Have"} at least ${f(r.milestonesInfo[2].need[1])} ${e.inflation.vacuum?"Clouds":"Puddles at the same time"}.`],rewardText:[()=>e.inflation.vacuum?`Puddles strength increased by ${f(r.milestonesInfo[2].reward[0],{padding:!0})}.`:"First Intergalactic Structure. (Nebula)",()=>e.inflation.vacuum?`Decrease Drops requirement to get a Cloud by ${f(r.milestonesInfo[2].reward[1],{padding:!0})}.`:"Permanent Submerged Stage."],need:[],reward:[0,0],scaling:[[1e30,1e32,1e34,1e36,1e38,1e40,1e44],[1500,2300,3100,3900,4700,5500,6400]],recent:[0,0]},{name:["Cluster of Mass","Satellites of Satellites"],needText:[()=>`Produce at least ${f(r.milestonesInfo[3].need[0])} Mass this reset.`,()=>`Have more or equal to ${f(r.milestonesInfo[3].need[1])} Satellites${e.inflation.vacuum?" and Subsatellites":""}.`],rewardText:[()=>e.inflation.vacuum?`Cosmic dust strength increased by ${f(r.milestonesInfo[3].reward[0],{padding:!0})}.`:"Second Intergalactic Structure. (Star cluster)",()=>e.inflation.vacuum?`Increase effective Rank by +${f(r.milestonesInfo[3].reward[1])}.`:"Permanent Accretion Stage."],need:[],reward:[0,0],scaling:[[1e32,1e34,1e36,1e38,1e40,1e42,1e45],[24,28,32,36,40,44,50]],recent:[0,0]},{name:["Remnants of past","Supermassive"],needText:[()=>`Produce at least ${f(r.milestonesInfo[4].need[0])} Stardust this reset.`,()=>`Have ${e.inflation.vacuum?"current Black holes":"Solar mass after Collapse"} reach ${f(r.milestonesInfo[4].need[1])} or more.`],rewardText:[()=>e.inflation.vacuum?`Interstellar Stars strength increased by ${f(r.milestonesInfo[4].reward[0],{padding:!0})}.`:"New Intergalactic themed Strangeness, Milestone and second level of 'Element automatization'.",()=>e.inflation.vacuum?`Black holes effect increased by ${f(r.milestonesInfo[4].reward[1],{padding:!0})}.`:"Research to make third Intergalactic Structure and the final Milestone. (Galaxy)"],need:[],reward:[0,0],scaling:[[1e48,1e49,1e50,1e52,1e54,1e56,1e58,1e60],[9e3,12e3,16e3,22e3,3e4,42e3,6e4,84e3]],recent:[0,0]},{name:["Light in the dark","End of Greatness"],needText:[()=>`Have ${e.inflation.vacuum?"total produced":"self-made"} Stars ${e.inflation.vacuum?"this reset":"count"} reach at least ${f(r.milestonesInfo[5].need[0])}.`,()=>`Have ${f(r.milestonesInfo[5].need[1])} ${e.inflation.vacuum?"self-made ":""}Galaxies or more.`],rewardText:[()=>e.inflation.vacuum?`First two Intergalactic Structures strength increased by ${f(r.milestonesInfo[5].reward[0],{padding:!0})}.`:"Unlock a new Intergalactic Strangeness 'Strange gain' and second level of 'Automatic Stage'.",()=>e.inflation.vacuum?`Boost per Galaxy is increased by +${f(r.milestonesInfo[5].reward[1])}.`:"Unlock a new Intergalactic Upgrade 'Galactic Merger'."],need:[],reward:[0,0],scaling:[[1460,1540,1620,1700,1780,1860,1940,2020],[1,2,4,6,10,14,18,22]],recent:[0,0]}],challengesInfo:[{name:"Void",description:()=>`Result of Vacuum Instability, investigate at your own will
(${e.inflation.vacuum||e.challenges.super?`Entering will force a ${e.challenges.super?"Vacuum":"Stage"} reset, will be reverted after exiting`:"No reason to enter from false Vacuum, since all rewards are disabled"})`,effectText:()=>{let t=e.challenges,s=t.voidCheck,a=`<p class="orangeText">\u2012 Microworld Structures are 4 times weaker${s[1]>=1?`
\u2012 Discharge base is raised to the root of 2 (^${f(.5)})`:""}${s[1]>=2?`
\u2012 Energy gain from Submerged and Accretion Stages is divided by 2`:""}
${s[3]>=5?"\u2012 Energy gain from Interstellar and Intergalactic Stages is divided by 4":"More nerfs will be shown with more rewards"}</p>`;return s[1]>=3&&(a+=`<p class="blueText">\u2012 Drops above 1 do not increase their own strength
\u2012 Puddles are ${f(8e3)} times weaker
${s[2]>=1?`\u2012 Clouds gain is decreased by ^${f(.8)}`:"More nerfs will be shown with more rewards"}${t.super?t.supervoid[1]>=3?`
\u2012 'Water spread' and the first 2 Researches are weaker
\u2012 Ponds, Lakes and Seas are 2 times weaker`:`
More nerfs will be shown with more rewards`:""}</p>`),s[1]>=2&&(a+=`<p class="grayText">\u2012 Cosmic dust is softcapped (^${f(.9)})
${s[3]>=4?`\u2012 Softcap is stronger after reaching 'Jovian planet' Rank (^${f(.8)})`:"More nerfs will be shown with more rewards"}${t.super?`${t.supervoid[3]>=1?`
\u2012 Increasing Rank doesn't increase effective Rank`:""}
${t.supervoid[3]>=4?"\u2012 Effective Rank is reduced by -1 after reaching 'Jovian planet' Rank":"More nerfs will be shown with more rewards"}`:""}</p>`),s[3]>=5&&(a+=`<p class="orchidText">\u2012 Interstellar Stars are ${f(8e3)} times weaker${s[4]>=1?`
\u2012 Solar mass gain is 2 times smaller`:""}${s[4]>=2?`
\u2012 Solar mass effect is softcapped ^${f(.2)} after 1`:""}
${s[4]>=5?"\u2012 Can't create or gain Quasi-stars":"More nerfs will be shown with more rewards"}${t.super?t.supervoid[3]>=5?`
\u2012 Everything cost 100 times more Stardust (excluding Brown dwarfs)`:`
More nerfs will be shown with more rewards`:""}</p>`),s[3]>=1&&(a+=`<p class="cyanText">\u2012 All resets affect all ${e.stage.true>=7?"pre-Abyss ":""}Stages
${s[5]>=1?`\u2012 Galaxies cost scaling increased by +${f(.05)}`:"More nerfs will be shown with more rewards"}${t.super?`
\u2012 'Global boost' Inflation softcaps instanly
${t.supervoid[4]>=5?"\u2012 Stage reset is disabled":"More nerfs will be shown with more rewards"}`:""}</p>`),a},needText:[[],[()=>"Perform the Discharge",()=>"Unlock Accretion Stage",()=>"Unlock Submerged Stage"],[()=>"Vaporize the Drops",()=>`Have more than ${f(1e4)} Clouds`,()=>e.stage.true>=7?`Reach ${f(1e12)} Clouds without Rank resets`:null],[()=>"Reach 'Meteoroid' Rank",()=>"Reach 'Asteroid' Rank",()=>"Reach 'Planet' Rank",()=>"Reach 'Jovian planet' Rank",()=>"Reach 'Protostar' Rank",()=>e.stage.true>=7||e.strangeness[3][9]>=1?"Reach 'Protogalaxy' Rank":null],[()=>"Cause the Collapse",()=>"Get the first Red giant",()=>"Get the first Neutron star",()=>"Get the first Black hole",()=>"Unlock Intergalactic Stage"],[()=>"Create a Galaxy",()=>e.stage.true>=7?"Force the Galactic Merge":null,()=>e.stage.true>=8?"Create a Galaxy group":null,()=>null]],rewardText:[[[],["'Energy increase' (Microworld)","'Conservation of Mass' (Microworld)","'Improved flow' (Submerged)"],["'Mechanical spread' (Submerged)","'Ocean world' (Submerged)","'Galactic tide' (Intergalactic)"],["Multiple max level increases","Multiple max level increases","Multiple max level increases","Multiple max level increases","'Strange growth' (Intergalactic)","'Automatic Merge' (Intergalactic)"],["Max level increased for auto resets","'Conservation of Energy' (Microworld)","'Neutronium' (Interstellar)","'Mass delay' (Accretion)","'Newer Upgrade' (Interstellar)"],["'Rank raise' (Accretion)","New Abyss themed Strangeness","Multiple max level increases","Max level increased for auto resets (WIP)"]],[[],["'Discharge improvement' (Cosmons)","'Indestructible matter' (Milestone)","'Conservation of resources' (Cosmons)"],["'Vaporization improvement' (Cosmons)","'Better rewards' (Inflatons)","Missing"],["'Rank improvement' (Cosmons)","'Passive Ranks' (Milestone)","'More Cosmons' (Cosmons)","'Improved Offline' (Inflatons)","'Improved conservation' (Milestone)","Work in progress"],["'Collapse improvement' (Cosmons)","'Stranger gain' (Cosmons)","'Main Stars' (Milestone)","'Limitless Mass' (Milestone)","'Inflationary boost' (Inflatons, WIP)"],["Work in progress","Work in progress","Work in progress","Work in progress"]]],resetType:"stage",time:3600,color:"darkviolet"},{name:"Vacuum stability",description:()=>`A more stable, but still the false Vacuum state
(Entering will force a Vacuum reset, will be reverted after exiting)`,effectText:()=>{let t=e.challenges.stability;return`<p class="orchidText">\u2012 Global speed is decreased by ${f(4*4**t,{padding:"exponent"})}
\u2012 Milestones time limit is 0 seconds
\u2012 Permanent Stages are removed from reset cycle</p>
            <p class="greenText">\u2012 Strange quarks from Stage resets are decreased by ${f(2**t,{padding:"exponent"})}
\u2012 Strange quarks from non-Interstellar Stage resets are further decreased by ${f(4*2**t,{padding:"exponent"})}
\u2012 Stage resets above ${9-t} decrease Strange quarks from the Stage resets by 2
\u2012 Going above 10 minutes of the Stage time will force Stage reset</p>
            <p class="darkvioletText">\u2012 Galaxies scale in cost faster by +${f(.01)}
\u2012 Intergalactic Upgrade 'Galactic Merger' cost ${f(1e10)} times more</p>`},needText:["1 Completion","2 Completions"],rewardText:["'Strange gain' Inflaton Inflation is improved","'Overboost' Inflaton Inflation is improved"],resetType:"vacuum",time:7200,color:"darkorchid"}],historyStorage:{stage:[],end:[]},loadouts:{input:[],open:!1,buttons:[]}},Le={true:{build0Start:[new T(0),new T(.005476),new T(0),new T(976185667392e-47),new T(1)],buildS1Cost:[],upgradesS1:[],upgradesS4:[],upgradesS5:[],researchesS1Cost:[],researchesS1Scale:[],researchesS4:[],researchesS5:[],extrasS4:[],extrasS5:[],ASRS1:[],ASR3S3:r.ASRInfo.costRange[3][3],elements:[],strangenessS1Cost:[],strangenessS1Scale:[],strangenessS2Cost:[],strangenessS2Scale:[],strangenessS3Cost:[],strangenessS3Scale:[],strangenessS4Cost:[],strangenessS4Scale:[],strangenessS5Cost:[],strangenessS5Scale:[],rest:[new T(r.upgradesInfo[2].cost[0]),r.researchesInfo[2].scaling[2],r.researchesInfo[2].scaling[3]]},false:{build0Start:[new T(0),new T(3),new T(.0027753108348135),new T(1e-19),new T(1)],buildS1Cost:[0,3,24,3],upgradesS1:[0,0,12,36,120,240,480,1600,3200,20800],upgradesS5:[new T(1e150)],researchesS1Cost:[600,2e3,4e3,4e3,6e3,6e3],researchesS1Scale:[200,400,2e3,12e3,4e3,6e3],ASRS1:[2e3,8e3,16e3],ASR3S3:2e30,elements:[new T(1e52),new T(1e54)],strangenessS1Cost:[1.25,1,1.5,2,4,2,24],strangenessS1Scale:[.75,.5,.75,2,0,0,0],strangenessS2Cost:[1,1.2,2,2,4,2,24],strangenessS2Scale:[.5,.6,1,2,0,0,0],strangenessS3Cost:[1.2,1,2,4,4,2,4,24],strangenessS3Scale:[.6,1,1,0,0,0,2,0],strangenessS4Cost:[1.5,1.5,4,2,4,2,4,24],strangenessS4Scale:[.75,1.5,1,2,0,0,68,0],strangenessS5Cost:[20,24,240,24,6e3,24,20,120],strangenessS5Scale:[20,24,240,0,0,0,220,0],rest:[new T(1e4),1e3,100]}},Ae=(...t)=>{let s=Y();for(let a=0;a<t.length;a++)if(!(s>=t[a]))return`
(Max level will be increased at ${t[a]} ${e.challenges.active===0?"Void":"self-made"} Universes)`;return""},E={microworld:0,S1Upgrade6:0,S1Upgrade7:0,tritium:0,S2Upgrade3:0,S2Upgrade4:0,interstellar:0,star:[0,0,0],galaxyBase:0,strangeMiltipliers:0,element26:0,S1SolarDelay:0,S3SolarDelay:0,fluid:0,S3Strange1:0,S3Strange3:0,T0Inflation3:0},xe=t=>{let s=Le[t?"true":"false"],{buildingsInfo:a,upgradesInfo:o,researchesInfo:i,researchesExtraInfo:l,elementsInfo:u,strangenessInfo:g}=r,m=w.buildings;for(let S=1;S<=3;S++)m[S][0].current.setValue(s.build0Start[S]),m[S][0].total.setValue(s.build0Start[S]),m[S][0].trueTotal.setValue(s.build0Start[S]);a.firstCost[1]=I(s.buildS1Cost),o[1].cost=I(s.upgradesS1),o[2].cost[0]=new T(s.rest[0]),o[5].cost[3]=new T(s.upgradesS5[t?3:0]),i[1].firstCost=I(s.researchesS1Cost),i[1].scaling=I(s.researchesS1Scale),i[2].scaling[2]=s.rest[1],i[2].scaling[3]=s.rest[2],r.ASRInfo.costRange[1]=I(s.ASRS1),r.ASRInfo.costRange[3][3]=s.ASR3S3,u.cost[27].setValue(s.elements[t?27:0]),u.cost[28].setValue(s.elements[t?28:1]),g[1].firstCost=I(s.strangenessS1Cost),g[1].scaling=I(s.strangenessS1Scale),g[2].firstCost=I(s.strangenessS2Cost),g[2].scaling=I(s.strangenessS2Scale),g[3].firstCost=I(s.strangenessS3Cost),g[3].scaling=I(s.strangenessS3Scale),g[4].firstCost=I(s.strangenessS4Cost),g[4].scaling=I(s.strangenessS4Scale),g[5].firstCost=I(s.strangenessS5Cost),g[5].scaling=I(s.strangenessS5Scale);let c=x("#milestone1Stage1Div > input"),d=x("#milestone1Stage2Div > input"),p=x("#milestone2Stage2Div > input"),h=x("#milestone1Stage3Div > input"),v=x("#milestone2Stage4Div > input");if(t){k.footerStatsHTML[1][0]=["Energy%20mass.png","stage1borderImage cyanText","Mass"],a.hoverText[2][0]="Tritium",a.hoverText[3][0]="Preons hardcap",a.type[2][0]="improving",a.type[3][0]="delaying",a.name[1][0]!=="Mass"&&(a.name[1].unshift("Mass","Preons"),a.hoverText[1].unshift("Mass","Preons"),k.buildingHTML[1].unshift("Preon.png","Quarks.png"));for(let S=1;S<7;S++)S!==5&&(a.maxActive[S]=a.firstCost[S].length),o[S].maxActive=o[S].cost.length,S!==1&&S!==3&&(i[S].maxActive=i[S].firstCost.length),l[S].maxActive=l[S].firstCost.length,g[S].maxActive=g[S].firstCost.length;u.maxActive=u.cost.length,n("milestonesExtra").innerHTML='Requires <span class="darkvioletText">Void Milestones</span> Inflation to be active to enable effects',c.src="Used_art/Preon.png",r.milestonesInfo[2].name[0]="Just a bigger Puddle",x("#milestone1Stage2Main > span").textContent="Just a bigger Puddle",d.alt="Just a bigger Puddle",r.milestonesInfo[2].name[1]="Distant Clouds",x("#milestone2Stage2Main > span").textContent="Distant Clouds",p.src="Used_art/Clouds.png",p.alt="Distant Clouds",h.alt="Center of gravity",r.milestonesInfo[3].name[0]="Center of gravity",x("#milestone1Stage3Main > span").textContent="Center of gravity",v.src="Used_art/Black%20hole.png",n("mergeResetText").innerHTML='<span class="darkvioletText">Merge</span> does a <span class="grayText">Galaxy</span> reset, while also converting all self-made <span class="grayText">Galaxies</span> into bonus ones.',x("#stageHistory > h3").textContent="Stage resets:",n("preonCap").style.display="",n("molesProduction").style.display="",n("massProduction").style.display="",n("mainCapHardS5").style.display="",n("element0").style.display="",n("strangePeak").style.display="",n("strange1Effect1Allowed").style.display="",n(`strangeness${b.MDSettings[0]?"Page":"Section"}5`).style.display="",n("strange7Stage1").style.display="",n("strange7Stage2").style.display="",n("strange8Stage3").style.display="",n("strange8Stage4").style.display="",n("strange3Stage5").style.display="",n("strange4Stage5").style.display="",n("milestone1Stage5Div").style.display="",n("milestone2Stage5Div").style.display="",n("stageAutoInterstellar1").style.display="",n("stageAutoInterstellar2").style.display="",n("vaporizationLimit").style.display="",n("collapseCapped").style.display="",n("strange1Effect1Disabled").style.display="none",x("#stageAutoInterstellar1 span").style.display="none",x("#stageAutoElse > span").textContent="Auto disable if still capable to do more automatic Merges",x("#stageAutoElse > span:last-of-type").style.display="none"}else{k.footerStatsHTML[1][0]=["Quarks.png","stage1borderImage cyanText","Quarks"],a.hoverText[2][0]="Moles",a.hoverText[3][0]="Mass",a.type[2][0]="producing",a.type[3][0]="producing",a.name[1][0]==="Mass"&&(a.name[1].splice(0,2),a.hoverText[1].splice(0,2),k.buildingHTML[1].splice(0,2)),r.buildingsInfo.producing[4][5].setValue(0),n("star3Effect").dataset.title="Boost to the Solar mass gain",a.maxActive[1]=4,a.maxActive[2]=6,a.maxActive[3]=5,a.maxActive[4]=5,a.maxActive[6]=0,o[1].maxActive=10,o[2].maxActive=8,o[3].maxActive=13,o[4].maxActive=4,o[5].maxActive=4,o[6].maxActive=0,i[2].maxActive=6,i[4].maxActive=5,i[5].maxActive=2,i[6].maxActive=0,l[1].maxActive=0,l[2].maxActive=3,l[3].maxActive=4,l[4].maxActive=3,l[5].maxActive=1,l[6].maxActive=0,u.maxActive=29,g[1].maxActive=7,g[2].maxActive=7,g[3].maxActive=8,g[4].maxActive=8,g[5].maxActive=8,g[6].maxActive=0,n("milestonesExtra").innerHTML='Completing any tier will award 1 <span class="greenText">Strange quark</span>',c.src="Used_art/Quarks.png",r.milestonesInfo[2].name[0]="A Nebula of Drops",x("#milestone1Stage2Main > span").textContent="A Nebula of Drops",d.alt="A Nebula of Drops",r.milestonesInfo[2].name[1]="Just a bigger Puddle",x("#milestone2Stage2Main > span").textContent="Just a bigger Puddle",p.src="Used_art/Puddle.png",p.alt="Just a bigger Puddle",h.alt="Cluster of Mass",r.milestonesInfo[3].name[0]="Cluster of Mass",x("#milestone1Stage3Main > span").textContent="Cluster of Mass",v.src="Used_art/Main_sequence%20mass.png",n("mergeResetText").innerHTML='Attempt to <span class="darkvioletText">Merge</span> <span class="grayText">Galaxies</span> together, which will result in <span class="orchidText">Vacuum</span> decaying into its true state.',x("#stageHistory > h3").textContent="Interstellar Stage resets:",n("strange8Stage5").style.display="",n("milestonesProgressArea").style.display="",x("#stageAutoElse > span").textContent="Reset pre-Interstellar Stages only if all Milestones are maxed",x("#stageAutoElse > span:last-of-type").style.display="",n("rankStat0").style.display="",n("preonCap").style.display="none",n("molesProduction").style.display="none",n("massProduction").style.display="none",n("dustCap").style.display="none",n("submersionBoost").style.display="none",n("mainCap").style.display="none",n("mainCapHardS5").style.display="none",n("mergeBoost").style.display="none",n("mergeEffects").style.display="none",n("mergeBoostTotal").style.display="none",n("darkEnergySpent").style.display="none",n("nucleationBoostTotal").style.display="none",n("researchAuto1").style.display="none",n("researchAuto2").style.display="none",n("vaporizationLimit").style.display="none",n("collapseCapped").style.display="none",n("element0").style.display="none",n(`strangeness${b.MDSettings[0]?"Page":"Section"}6`).style.display="none";for(let S=1;S<=5;S++)for(let M=g[S].maxActive+1;M<=g[S].cost.length;M++)n(`strange${M}Stage${S}`).style.display="none";x("#stageAutoInterstellar1 span").style.display="",n("toggleAuto9Info").style.display="none",n("energyGainStage1Build1").style.display="none",n("energyGainStage1Build2").style.display="none";for(let S=2;S<=6;S++)n(`energyGainStage${S}`).style.display="none";n("mergeResets").style.display="none",n("mergeResetsS6").style.display="none",n("nucleationBoost").style.display="none",n("effectiveDarkEnergyStat").style.display="none",n("maxDarkEnergyStat").style.display="none"}},Fe=()=>{let t=e.challenges.active,s=t===null?null:t===0&&!e.challenges.super?0:t+1,a=r.debug.challenge,o=Le.true,i=r.elementsInfo.cost,l=r.upgradesInfo[4].cost,u=r.upgradesInfo[5].cost,g=r.researchesInfo[4].firstCost,m=r.researchesInfo[5].firstCost,c=r.researchesExtraInfo[4].firstCost,d=r.researchesExtraInfo[5].firstCost;if(s===0||s===1){if(r.buildingsInfo.producing[4][5].setValue(0),r.buildingsInfo.maxActive[4]=5,s===1){let p=new T(100);if(i[1].equal(o.elements[1])){for(let h=1;h<i.length;h++)i[h].multiply(p);for(let h=0;h<l.length;h++)l[h].multiply(p);for(let h=0;h<u.length;h++)u[h].multiply(p);for(let h=0;h<g.length;h++)g[h].multiply(p);for(let h=0;h<m.length;h++)m[h].multiply(p);for(let h=0;h<c.length;h++)c[h].multiply(p);for(let h=0;h<d.length;h++)d[h].multiply(p)}else i[27].equal(o.elements[27])&&(i[27].multiply(p),i[28].multiply(p),u[3].multiply(p))}}else s===2&&u[3].setValue(o.upgradesS5[3]);if(s!==a)if(r.debug.challenge=s,a===0||a===1){if(e.inflation.vacuum&&(r.buildingsInfo.maxActive[4]=r.buildingsInfo.firstCost[4].length),a===1){for(let p=1;p<i.length;p++)i[p].setValue(o.elements[p]);for(let p=0;p<l.length;p++)l[p].setValue(o.upgradesS4[p]);for(let p=0;p<u.length;p++)u[p].setValue(o.upgradesS5[p]);for(let p=0;p<g.length;p++)g[p].setValue(o.researchesS4[p]);for(let p=0;p<m.length;p++)m[p].setValue(o.researchesS5[p]);for(let p=0;p<c.length;p++)c[p].setValue(o.extrasS4[p]);for(let p=0;p<d.length;p++)d[p].setValue(o.extrasS5[p]);e.inflation.vacuum||(u[3].setValue(Le.false.upgradesS5[0]),i[27].setValue(Le.false.elements[0]),i[28].setValue(Le.false.elements[1]))}}else a===2&&(e.inflation.vacuum||u[3].setValue(Le.false.upgradesS5[0]))},O=(t,s)=>{for(let a=t.length;a<s.length;a++)t[a]=F(s[a])},ft=t=>{if(t.inflation===void 0)throw new ReferenceError("This save file is not from this game or too old");xe(t.inflation.vacuum);let s=t.version;if(s!==w.version){if(t.version==="v0.1.2"&&(t.version="v0.1.3",t.stage.time=0,t.inflation.age=0),["v0.1.3","v0.1.4","v0.1.5","v0.1.6","v0.1.7","v0.1.8"].includes(t.version)&&(t.version="v0.1.9",t.discharge=F(w.discharge),t.researchesAuto=I(w.researchesAuto),delete t.saveUpdate016,delete t.accretion.input),(t.version==="v0.1.9"||t.version==="v0.2.0")&&(t.version="v0.2.1",t.inflation.resets=t.inflation.vacuum?1:0,t.buildings=F(w.buildings),delete t.separator,delete t.intervals,delete t.stage.best,delete t.stage.export),t.version==="v0.2.1"&&(t.version="v0.2.2",t.elements=I(w.elements),t.collapse=F(w.collapse),t.inflation.time=t.inflation.age,delete t.events),["v0.2.2","v0.2.3","v0.2.4","v0.2.5"].includes(t.version)&&(t.version="v0.2.6",t.inflation.loadouts=[],t.vaporization=F(w.vaporization),delete t.inflation.spent,delete t.inflation.tree,delete t.maxASR,t.time=F(w.time),t.verses=F(w.verses),t.verses[0].true=t.buildings[6][1].true,t.verses[0].current=t.buildings[6][1].true,t.toggles=F(w.toggles)),t.version==="v0.2.6"&&(t.version="v0.2.7",t.merge=F(w.merge)),t.version==="v0.2.7"){t.version="v0.2.8";let l=Math.max(t.inflation.ends!==void 0?t.inflation.ends[2]:0,t.verses[0].true);t.inflation.ends=I(w.inflation.ends),t.inflation.peak=I(w.inflation.peak),t.upgrades[6]=I(w.upgrades[6]),t.researches[6]=I(w.researches[6]),t.researchesExtra[6]=I(w.researchesExtra[6]),t.strangeness[6]=I(w.strangeness[6]),t.stage.peak=I(w.stage.peak),t.stage.input=I(w.stage.input),t.darkness=F(w.darkness),t.challenges=F(w.challenges),t.cosmon=F(w.cosmon),t.tree=F(w.tree),t.history=F(w.history),t.event=!1,delete t.inflation.voidVerses,t.time.export[3]=0,l>2&&(t.cosmon[1].current=l-2,t.verses[0].true>2&&(t.verses[0].true=2),t.milestones=F(w.milestones),t.buildings[6]=F(w.buildings[6]),t.strange[0].current>1e12&&(t.strange[0].current=1e12),t.strange[1].current>1e11&&(t.strange[1].current=1e11)),t.verses[0].current=t.verses[0].true,t.verses[0].total=t.verses[0].true,t.verses[0].other=I(w.verses[0].other),t.stage.true>=8?(t.inflation.ends[0]=1,t.verses[0].current++,t.verses[0].total+=2,t.verses[0].highest=2,t.stage.true=7):t.verses[0].highest=0,t.verses[0].lowest=255,t.cosmon[1].total=t.cosmon[1].current,t.cosmon[0].current=t.verses[0].true>=2?4:t.verses[0].true>=1?1:0,t.inflation.vacuum&&(t.verses[0].true>=1||t.inflation.ends[0]>=1)&&t.cosmon[0].current++,t.cosmon[0].total=t.cosmon[0].current,t.inflation.peak[0]=(t.verses[0].true+(t.inflation.vacuum?1:0))/t.time.end,t.inflation.peak[1]=t.time.end,t.toggles.confirm[6]="All",delete t.vaporization.cloudsMax}if(t.version==="v0.2.8"&&(t.version="v0.2.8_will_be_deleted"),t.version!==w.version)throw new ReferenceError(`Save file version ${t.version} is not allowed`)}t.verses[0].other===void 0&&(t.verses[0].other=I(w.verses[0].other),t.verses[0].lowest=255,t.tree[1]=I(w.tree[1]),t.cosmon[1].current=t.cosmon[1].total,t.time.export[3]=0,t.event=!1),t.darkness.energyMax===void 0&&(t.darkness.energyMax=0,t.challenges.voidCheck.length=6,t.challenges.supervoid.length=6,delete t.verses[0].void,delete t.vaporization.cloudsMax);for(let l=1;l<=6;l++)O(t.buildings[l],w.buildings[l]),O(t.toggles.buildings[l],w.toggles.buildings[l]),t.toggles.shop.wait[l]>=1||(t.toggles.shop.wait[l]=2),O(t.upgrades[l],w.upgrades[l]),O(t.researches[l],w.researches[l]),O(t.researchesExtra[l],w.researchesExtra[l]),t.ASR[l]??=0,O(t.strangeness[l],w.strangeness[l]),!(l>=6)&&O(t.milestones[l],w.milestones[l]);O(t.strange,w.strange),O(t.verses,w.verses),O(t.cosmon,w.cosmon),O(t.researchesAuto,w.researchesAuto),O(t.elements,w.elements);for(let l=0;l<w.tree.length;l++)O(t.tree[l],w.tree[l]);O(t.toggles.verses,w.toggles.verses),O(t.toggles.normal,w.toggles.normal),O(t.toggles.confirm,w.toggles.confirm),O(t.toggles.hover,w.toggles.hover),O(t.toggles.max,w.toggles.max),O(t.toggles.auto,w.toggles.auto),t.challenges.active===null&&(t.clone={}),t.time.export[0]<-36e5&&(t.time.export[0]=-36e5),t.time.offline<-36e5&&(t.time.offline=-36e5),t.time.excess<-12e5&&(t.time.excess=-12e5),t.accretion.rank===0&&(t.buildings[3][0].current="5.9722e27");let a=t.clone;if(a.depth!==void 0){for(let l=1;l<=6;l++)O(a.upgrades[l],w.upgrades[l]),O(a.researches[l],w.researches[l]),O(a.researchesExtra[l],w.researchesExtra[l]),a.ASR[l]??=0,a.depth!=="stage"&&(O(a.strangeness[l],w.strangeness[l]),!(l>=6)&&O(a.milestones[l],w.milestones[l]));O(a.researchesAuto,w.researchesAuto),O(a.elements,w.elements)}t.fileName=new TextDecoder().decode(Uint8Array.from(t.fileName,l=>l.codePointAt(0)));for(let l=0;l<t.inflation.loadouts.length;l++)t.inflation.loadouts[l][0]=new TextDecoder().decode(Uint8Array.from(t.inflation.loadouts[l][0],u=>u.codePointAt(0)));for(let l=1;l<t.buildings.length;l++)for(let u=0;u<t.buildings[l].length;u++){let g=t.buildings[l][u];g.current=new T(g.current),g.total=new T(g.total),g.trueTotal=new T(g.trueTotal)}Object.assign(e,t),Fe(),r.trueActive=e.stage.active,r.debug.historyStage=null,r.debug.historyEnd=null,r.debug.timeLimit=!1;let o=e.challenges.supervoidMax;r.inflationInfo.totalSuper=o[1]+o[2]+o[3]+o[4]+o[5];let i=e.buildings[4];r.collapseInfo.trueStars=i[1].true+i[2].true+i[3].true+i[4].true+i[5].true,r.collapseInfo.pointsLoop=0,r.mergeInfo.galaxies=e.buildings[5][3].current.toNumber(),r.inflationInfo.trueUniverses=y.trueUniverses(),r.historyStorage.stage=e.history.stage.list,r.historyStorage.end=e.history.end.list;for(let l=1;l<=5;l++)for(let u=0;u<w.milestones[l].length;u++)r.milestonesInfo[l].recent[u]=0,ve(u,l);for(let l=1;l<=6;l++){let u=e.strangeness[l],g=r.strangenessInfo[l].max;for(let h=0;h<r.strangenessInfo[l].maxActive;h++)C(h,l,"strangeness"),u[h]>g[h]&&(u[h]=g[h]);let m=e.researchesExtra[l],c=r.researchesExtraInfo[l].max;for(let h=0;h<r.researchesExtraInfo[l].maxActive;h++)C(h,l,"researchesExtra"),m[h]>c[h]&&(m[h]=c[h]);let d=e.researches[l],p=r.researchesInfo[l].max;for(let h=0;h<r.researchesInfo[l].maxActive;h++)C(h,l,"researches"),d[h]>p[h]&&(d[h]=p[h]);C(0,l,"ASR"),r.automatization.autoU[l]=[],r.automatization.autoR[l]=[],r.automatization.autoE[l]=[],n(`stageSwitch${l}`).style.textDecoration=r.trueActive===l?"underline":"",r.lastUpgrade[l][0]=null}for(let l=0;l<w.researchesAuto.length;l++)C(l,0,"researchesAuto");for(let l=0;l<w.tree.length;l++){let u=e.tree[l],g=r.treeInfo[l].max;for(let m=0;m<w.tree[l].length;m++)C(m,l,"inflations"),u[m]>g[m]&&(u[m]=g[m])}r.automatization.autoEl=[],r.automatization.autoS=[],qe();for(let l=0;l<r.challengesInfo.length;l++)be(l);r.lastElement=null,r.lastStrangeness=[null,0],r.lastMilestone=[null,0],r.lastChallenge[0]=e.challenges.active===null?1:e.challenges.active,r.lastInflation=[null,0],R.strange1(),R.strange0(),R.S2Levels(!0),R.S4Levels(!0),B.rankInformation(),B.trueEnergy(),fe(),j(),n("saveFileNameInput").value=e.fileName,n("vaporizationInput").value=f(e.vaporization.input[0],{type:"input"}),n("vaporizationInputMax").value=f(e.vaporization.input[1],{type:"input"}),n("collapseInput").value=f(e.collapse.input[0],{type:"input"}),n("collapseInputWait").value=f(e.collapse.input[1],{type:"input"}),n("mergeInput").value=f(e.merge.input[0],{type:"input"}),n("mergeInputSince").value=f(e.merge.input[1],{type:"input"}),n("nucleationInput").value=f(e.darkness.input,{type:"input"}),n("stageHistorySave").value=`${e.history.stage.input[0]}`,n("stageHistoryShow").value=`${e.history.stage.input[1]}`,n("endHistorySave").value=`${e.history.end.input[0]}`,n("endHistoryShow").value=`${e.history.end.input[1]}`;for(let l=0;l<w.toggles.normal.length;l++)_(l,"normal");for(let l=0;l<w.toggles.confirm.length;l++)Xt(l);for(let l=0;l<w.toggles.hover.length;l++)_(l,"hover");for(let l=0;l<w.toggles.max.length;l++)_(l,"max");for(let l=0;l<w.toggles.auto.length;l++)_(l,"auto");return n("buyAnyInput").value=f(e.toggles.shop.input,{type:"input"}),r.loadouts.open&&(r.loadouts.open=!1,n("loadoutsMain").style.display="none",b.SRSettings[0]&&(n("inflationLoadouts").ariaExpanded="false")),kt(),s};var I=t=>t.slice(0),F=t=>{if(typeof t!="object"||t===null)return t;let s;if(Array.isArray(t)){if(t instanceof T)return new T(t);s=[];for(let a=0;a<t.length;a++)s.push(F(t[a]))}else{s={};for(let a in t)s[a]=F(t[a])}return s},n=(t,s=!1)=>{let a=k.cache.idMap.get(t);if(a!==void 0)return a;let o=document.getElementById(t);if(o!==null)return k.cache.idMap.set(t,o),o;if(s)return null;throw Ie(`Error encountered, ID \u2012 '${t}' doesn't exist`),new ReferenceError(`ID \u2012 '${t}' doesn't exist`)},x=(t,s=!1)=>{let a=k.cache.queryMap.get(t);if(a!==void 0)return a;let o=document.querySelector(t);if(o!==null)return k.cache.queryMap.set(t,o),o;if(s)return null;throw Ie(`Error encountered, Query \u2012 '${t}' failed to find anything`),new ReferenceError(`Query \u2012 '${t}' failed to find anything`)},it=t=>{let s=k.cache.classMap.get(t);if(s!==void 0)return s;let a=document.getElementsByClassName(t);return k.cache.classMap.set(t,a),a},Rt=()=>{let t=Date.now(),s=t-e.time.updated;return e.time.updated=t,e.time.export[0]+=s,s},De=async(t,s=e.toggles.normal[4])=>{let a=r.offline;a.active||$e(),t+=e.time.excess,e.time.excess=0;let o=!1;if(t>=20&&!s){o=!await X(`Accept and use ${f(Math.min(t/1e3,43200),{type:"time",padding:!1})} worth of Offline time?${e.challenges.supervoid[3]>=4?" Or reject it to store it instead.":""}
(Includes time spent to click any of the buttons)`,2)&&(b.developerMode||e.challenges.supervoid[3]>=4||!await X("Press 'Cancel' again to confirm losing Offline time, 'Confirm' to use it instead"));let Z=Rt();r.lastSave+=Z,t+=Z}if(t>432e5&&(t=432e5),o||t<20){o&&e.challenges.supervoid[3]>=4&&(e.time.offline=Math.min(e.time.offline+t,432e5)),t<0&&(e.time.excess=t-20),$e(!1),Ye(20,20),q(),P(),a.autosave&&(a.autosave=!1,Te());return}let i=20,l=t,u=e.stage.active;a.stage[0]=null,a.stage[1]=null,e.time.online+=t;let g=document.documentElement,m=n("offlineMain"),c=n("offlineAccelerate"),d=n("offlineDeaccelerate"),p=n("offlineCancel"),h=document.activeElement,v=()=>{i*=2},S=()=>{i=Math.max(i/2,20)},M=()=>{i=0},N=Z=>{let le=de(Z);if(!(le===null||Z.code!=="Tab")){if(le&&document.activeElement===c)p.focus();else if(!le&&document.activeElement===p)c.focus();else return;Z.preventDefault()}},A=()=>{$e(!1),a.stage[0]!==null&&(e.stage.active=u,Q(a.stage[0])),a.stage[1]!==null?J(a.stage[1]):(q(),P()),m.style.display="none",c.removeEventListener("click",v),d.removeEventListener("click",S),p.removeEventListener("click",M),g.removeEventListener("keydown",N),h?.focus(),b.SRSettings[0]&&(n("SRMain").textContent="Offline calculation ended"),a.autosave&&(a.autosave=!1,Te())};c.addEventListener("click",v),d.addEventListener("click",S),p.addEventListener("click",M),g.addEventListener("keydown",N),b.SRSettings[0]&&(n("SRMain").textContent="Offline calculation started"),m.style.display="",c.focus();let D=n("offlineTick"),G=n("offlineRemains"),V=x("#offlinePercentage > span"),z=()=>{let Z=i<=0?t:Math.min(600*i,t);t-=Z;try{Ye(Math.max(Z/600,20),Z)}catch(le){A();let dt=le.stack;throw ae(`Offline calculation failed due to error:
${typeof dt=="string"?dt.replaceAll(`${window.location.origin}/`,""):le}`,1),le}t>=20?(setTimeout(z),D.textContent=f(i),G.textContent=f(t/1e3,{type:"time"}),V.textContent=f(100-t/l*100,{padding:!0})):(e.time.excess+=t,A())};z()},It=()=>{let t=r.intervalsId,s=r.offline.active||r.paused;clearInterval(t.main),clearInterval(t.numbers),clearInterval(t.visual),t.main=s?void 0:setInterval(Ye,20,20),t.numbers=s?void 0:setInterval(P,b.intervals.numbers),t.visual=s?void 0:setInterval(q,b.intervals.visual)},$e=(t=!0)=>{if(!t&&r.paused){let s=n("pauseButton");s.style.borderColor="",s.style.color="",n("gamePaused").style.display="none",r.paused=!1,b.SRSettings[0]&&(n("SRMain").textContent="Game unpaused"),r.intervalsId.autoSave=setTimeout(Te,b.intervals.autoSave)}r.hotkeys.disabled=t,r.offline.active=t,It(),!t&&r.offline.cacheUpdate&&(r.offline.cacheUpdate=!1,Kt())},Qt=()=>{if(r.offline.active)return;if(!r.paused){let s=n("pauseButton");s.style.borderColor="forestgreen",s.style.color="var(--green-text)",n("gamePaused").style.display="",r.paused=!0,It(),clearTimeout(r.intervalsId.autoSave),b.SRSettings[0]&&(n("SRMain").textContent="Game paused");return}let t=Rt();r.lastSave+=t,De(t)},Te=(t=!1)=>{if(r.offline.active)return r.offline.autosave=!0,null;try{e.history.stage.list=r.historyStorage.stage.slice(0,e.history.stage.input[0]),e.history.end.list=r.historyStorage.end.slice(0,e.history.end.input[0]);let s={...e};s.fileName=String.fromCharCode(...new TextEncoder().encode(s.fileName)),s.inflation=F(s.inflation);for(let o=0;o<s.inflation.loadouts.length;o++)s.inflation.loadouts[o][0]=String.fromCharCode(...new TextEncoder().encode(s.inflation.loadouts[o][0]));let a=btoa(JSON.stringify(s));return t||(localStorage.setItem(k.localStorage.main,a),n("isSaved").textContent="Saved",r.lastSave=0,r.paused||(clearTimeout(r.intervalsId.autoSave),r.intervalsId.autoSave=setTimeout(Te,b.intervals.autoSave))),a}catch(s){let a=s.stack;throw ae(`Failed to save the game
${typeof a=="string"?a.replaceAll(`${window.location.origin}/`,""):s}`,1),s}},ks=t=>{if(!r.offline.active){$e();try{let s=ft(JSON.parse(atob(t)));r.lastSave=Rt(),U(`This save is ${f(r.lastSave/1e3,{type:"time",padding:!1})} old${s!==e.version?`
Save file version is ${s}`:""}`),J(!0,!0),De(r.lastSave)}catch(s){throw ft(e),$e(!1),ae(`Incorrect save file format
${s}`),s}}},Es=(t=e.fileName)=>{let s=new Date,a=t.indexOf("[date");if(a>=0){let u=t.indexOf("]",a+5);if(u>=0){let g=t.substring(a+5,u),m=["Y","M","D"],c=[`${s.getFullYear()}`,`${s.getMonth()+1}`.padStart(2,"0"),`${s.getDate()}`.padStart(2,"0")];for(let d=0;d<m.length;d++)g=g.replace(m[d],c[d]);t=t.replace(t.substring(a,u+1),g)}}let o=t.indexOf("[time");if(o>=0){let u=t.indexOf("]",o+5);if(u>=0){let g=t.substring(o+5,u),m=["H","M","S"],c=[`${s.getHours()}`.padStart(2,"0"),`${s.getMinutes()}`.padStart(2,"0"),`${s.getSeconds()}`.padStart(2,"0")];for(let d=0;d<m.length;d++)g=g.replace(m[d],c[d]);t=t.replace(t.substring(o,u+1),g)}}let i=["[version]","[stage]","[strange]","[inflaton]","[cosmon]","[vacuum]","[galaxy]","[universe]"],l=[e.version,r.stageInfo.word[e.stage.current],f(e.strange[0].total,{type:"input",padding:!0}),f(e.cosmon[0].total,{type:"input",padding:"exponent"}),f(e.cosmon[1].total,{type:"input",padding:!0}),`${e.inflation.vacuum}`,`${f(e.buildings[5][3].current,{type:"input",padding:"exponent"})} [${f(e.buildings[5][3].true,{type:"input",padding:"exponent"})}]`,`${f(e.verses[0].current,{type:"input",padding:"exponent"})} [${f(r.inflationInfo.trueUniverses,{type:"input",padding:"exponent"})}]`];for(let u=0;u<i.length;u++)t=t.replace(i[u],l[u]);return`${t}.txt`},_=(t,s,a=!1)=>{let o=s==="buildings"?e.toggles.buildings[e.stage.active]:e.toggles[s];a&&(o[t]=!o[t]);let i,l;s==="buildings"||s==="verses"?(l=n(`toggle${s==="buildings"?"Building":"Verse"}${t}`),i="Auto ",a&&q()):s==="hover"?(l=n(`toggleHover${t}`),i="Hover to create "):s==="max"?(l=n(`toggleMax${t}`),i="Max create "):s==="auto"?(l=n(`toggleAuto${t}`),i="Auto "):(l=n(`toggleNormal${t}`),i=""),o[t]?(l.style.color="var(--green-text)",l.style.borderColor="forestgreen",l.textContent=`${i}ON`):(l.style.color="",l.style.borderColor="",l.textContent=`${i}OFF`)},Xt=(t,s=!1)=>{let a=e.toggles.confirm;s&&(a[t]=a[t]==="All"?"Safe":a[t]==="Safe"?"None":"All");let o=n(`toggleConfirm${t}`);o.textContent=a[t],a[t]!=="None"?(o.style.color="var(--green-text)",o.style.borderColor="forestgreen"):(o.style.color="",o.style.borderColor="")},H=t=>{r.intervalsId.mouseRepeat===void 0&&(r.intervalsId.mouseRepeat=setTimeout(()=>{r.intervalsId.mouseRepeat=setInterval(t,50)},200))},$t=()=>{clearInterval(r.intervalsId.mouseRepeat),r.intervalsId.mouseRepeat=void 0},Tt=t=>{t.style.right="",t.style.display="";let s=t.getBoundingClientRect();if(s.left<0)t.style.right=`calc(50% - ${-s.left}px)`;else{let a=document.documentElement.clientWidth;s.right>a&&(t.style.right=`calc(50% + ${s.right-a}px)`)}},Ke=(t,s)=>{if(s==="elements")r.lastElement=t;else{if((s==="upgrades"||s==="researches"||s==="researchesExtra")&&r[`${s}Info`][e.stage.active].maxActive<=t)return;r.lastUpgrade[e.stage.active]=[t,s]}rt(t,s)},Yt=(t,s,a)=>{a==="inflations"?r.lastInflation=[t,s]:a==="strangeness"?r.lastStrangeness=[t,s]:r.lastMilestone=[t,s],at(t,s,a)},Ms=t=>{r.lastChallenge[0]=t,Ft(t),t===0?lt(r.lastChallenge[1]):t===1&&Ot(),q()},mt=(t=!r.sessionToggles[0])=>{r.sessionToggles[0]=t,n("voidRewardsType").textContent=`${t?"Supervoid":"Void"} rewards:`},$s=t=>{if(e.researchesAuto[t]>=r.researchesAutoInfo.max[t])return;let s=e.stage.active;if(pe(t,s,"researchesAuto")){W(t,s,"researchesAuto");return}let a=r.researchesAutoInfo.autoStage[t][e.researchesAuto[t]];r.lastUpgrade[a][0]=t,r.lastUpgrade[a][1]="researchesAuto",tt(a,s)},_e=t=>{if(!r.loadouts.open)return;let s=r.treeInfo[0].max,a={},o=0,i="";for(let l=0,u=0;l<t.length;l+=u,u=0){let g=t[l];a[g]??=0;let m=pe(g,0,"inflations");do{if(a[g]>=20){t.splice(l+u,1);continue}m&&a[g]<s[g]&&(o+=et(g,0,a[g])),a[g]+=1,u++}while(t[l+u]===g);u<1||(i+=`${l>0?", ":""}${g+1}${u!==1?`x${u}`:""}`)}r.loadouts.input=t,x("#loadoutsEditLabel > span").textContent=f(o,{padding:"exponent"}),n("loadoutsEdit").value=i},Ct=()=>{let t=r.loadouts.buttons;for(let o=0;o<t.length;o++)t[o][0].removeEventListener("click",t[o][1]);let s=[],a=x("#loadoutsList > span");a.textContent="";for(let o=0;o<e.inflation.loadouts.length;o++){let i=document.createElement("button");i.textContent=e.inflation.loadouts[o][0],i.className="selectBtn redText",i.type="button";let l=()=>{let u=e.inflation.loadouts[o];n("loadoutsName").value=u[0],_e(I(u[1])),r.hotkeys.shift&&Is(u[1])};s[o]=[i,l],a.append(i,", "),i.addEventListener("click",l)}r.loadouts.buttons=s},Ts=()=>{let t=n("loadoutsName").value;if(t.length===0)return;let s=e.inflation.loadouts,a=s.length;for(let o=0;o<a;o++)if(t===s[o][0]){a=o;break}s[a]=[t,I(r.loadouts.input)],Ct(),U(`Saved loadout as '${t}'`)},Is=async(t=null)=>{if(await Gt(r.hotkeys.shift,!0)){t===null&&(t=r.loadouts.input);for(let s=0;s<t.length;s++)pe(t[s],0,"inflations")&&yt(t[s],0,"inflations",!0);P(),b.SRSettings[0]&&(n("SRMain").textContent="Loaded loadout")}},Cs=()=>{let t=[];for(let s=0;s<e.tree[0].length;s++)for(let a=e.tree[0][s];a>0;a--)t.push(s);_e(t)};{let t=(m,c)=>{let d=[];for(let p=0;p<m;p++)d.push(c);return d},s=Le.true,{toggles:a,buildings:o}=e,{buildingsInfo:i,upgradesInfo:l,strangenessInfo:u,milestonesInfo:g}=r;for(let m=1;m<i.firstCost.length;m++){o[m]=[],a.buildings[m]=t(i.firstCost[m].length,!1),i.producing[m]=[];for(let c=0;c<i.firstCost[m].length;c++){let d=c===0&&m<5?s.build0Start[m]:0;o[m][c]={current:new T(d),total:new T(d),trueTotal:new T(d)},c!==0&&(o[m][c].true=0),i.producing[m][c]=new T(0)}i.increaseStart[m]=I(i.increase[m])}s.buildS1Cost=I(i.firstCost[1]),a.verses=t(e.verses.length,!1);for(let m=1;m<l.length;m++){let c=l[m].cost;if(e.upgrades[m]=t(c.length,0),r.automatization.autoU[m]=[],r.lastUpgrade[m]=[null,"upgrades"],m===1){s.upgradesS1=I(c);continue}for(let d=0;d<c.length;d++)c[d]=new T(c[d]),(m===4||m===5)&&(s[`upgradesS${m}`][d]=new T(c[d]))}for(let m of["researches","researchesExtra"]){let c=r[`${m}Info`];for(let d=1;d<c.length;d++){let p=c[d].firstCost;if(e[m][d]=t(p.length,0),d===1||d===6&&m==="researchesExtra"){c[d].cost=I(p);continue}for(let h=0;h<p.length;h++)p[h]=new T(p[h]),c[d].cost[h]=new T(p[h]),(d===4||d===5)&&(s[`${m==="researches"?"researches":"extras"}S${d}`][h]=new T(p[h]));r.automatization[`auto${m==="researches"?"R":"E"}`][d]=[]}m==="researches"&&(s.researchesS1Cost=I(c[1].firstCost),s.researchesS1Scale=I(c[1].scaling))}e.researchesAuto=t(r.researchesAutoInfo.costRange.length,0),e.ASR=t(r.ASRInfo.costRange.length,0),s.ASRS1=I(r.ASRInfo.costRange[1]);{let m=r.elementsInfo.cost;e.elements=t(m.length,0);for(let c=0;c<m.length;c++)m[c]=new T(m[c]),s.elements[c]=new T(m[c])}for(let m=1;m<u.length;m++)e.strangeness[m]=t(u[m].firstCost.length,0),u[m].cost=I(u[m].firstCost),!(m>5)&&(s[`strangenessS${m}Cost`]=I(u[m].firstCost),s[`strangenessS${m}Scale`]=I(u[m].scaling));for(let m=1;m<g.length;m++){e.milestones[m]=t(g[m].needText.length,0);for(let c=0;c<g[m].needText.length;c++)g[m].need[c]=new T("1e1e308")}for(let m=0;m<r.treeInfo.length;m++)e.tree[m]=t(r.treeInfo[m].firstCost.length,0),r.treeInfo[m].cost=I(r.treeInfo[m].firstCost);a.normal=t(document.getElementsByClassName("toggleNormal").length,!1),a.confirm=t(document.getElementsByClassName("toggleConfirm").length,"Safe"),a.hover=t(document.getElementsByClassName("toggleHover").length,!1),a.max=t(document.getElementsByClassName("toggleMax").length,!1),a.auto=t(document.getElementsByClassName("toggleAuto").length,!1),a.normal[1]=!0,a.confirm[6]="All"}var w=F(e),ie=F(b);try{let t=document.documentElement,s=localStorage.getItem(k.localStorage.settings);if(s!==null)try{Object.assign(b,JSON.parse(atob(s)));let c=new TextDecoder;for(let d in b.hotkeys){let p=b.hotkeys[d];for(let h=0;h<p.length;h++)p[h]=c.decode(Uint8Array.from(p[h],v=>v.codePointAt(0)))}O(b.toggles,ie.toggles),O(b.MDSettings,ie.MDSettings),O(b.SRSettings,ie.SRSettings);for(let d in ie.hotkeys)b.hotkeys[d]??=["None","None"]}catch(c){U("Global settings failed to parse, default ones will be used instead"),console.log(`(Full parse error) ${c}`)}n("decimalPoint").value=b.format[0],n("thousandSeparator").value=b.format[1],n("numbersInterval").value=`${b.intervals.numbers}`,n("visualInterval").value=`${b.intervals.visual}`,n("autoSaveInterval").value=`${b.intervals.autoSave/1e3}`;for(let c=0;c<ie.toggles.length;c++)me(c,"global");if(b.fontSize!==16&&jt(!0),b.toggles[8]&&n("alertCancel").after(n("alertConfirm")),b.toggles[7]&&document.addEventListener("visibilitychange",()=>{r.offline.active||r.paused||document.visibilityState!=="hidden"||Te()}),b.toggles[5]&&(k.styleSheet.textContent+="body::-webkit-scrollbar { display: none; } "),b.toggles[4]&&(n("globalStats").style.display="none"),b.toggles[3]){x("#footer > div:first-child").style.display="none";let c=document.createElement("div");c.style.height="max(calc(6.08em + 32px), 7.92em)",n("body").prepend(n("footer"),c),n("fakeFooter").after(n("shortcuts"));let d=document.createElement("div");d.append(n("footerStats"),x("#footerMain > nav"),n("stageSelect")),n("footerMain").append(d,n("subtabs")),k.styleSheet.textContent+=`.insideTab { margin-top: 0.6rem; }
            #footer { top: 0; bottom: unset; }
            #footerMain { flex-direction: row; padding: 0.6em 0; gap: 0.6em; }
            #footerMain > div { display: flex; flex-direction: column; row-gap: 0.6em; margin: 0 0 0 auto; }
            #footerMain > div > nav { display: flex; flex-flow: row nowrap; justify-content: center; column-gap: 0.4em; }
            #footerStats { justify-content: center; column-gap: 0.6em; margin: 0; }
            #stageSelect { position: unset; margin: 0; max-width: unset; }
            #subtabs { flex-flow: column-reverse wrap; gap: 0.6em !important; align-self: end; margin: 0 auto 0 0 !important; max-height: 6.72em; width: 0; /* min-width: 7em; */ }
            #footerMain button, #shortcuts button { width: min-content; min-width: 4em; height: 2em; border-radius: 10px; font-size: 0.92em; }
            #subtabs button { width: 100%; min-width: 7em; }
            #globalStats { bottom: 3.04em; right: calc(50vw - 6.325em); }
            #shortcuts { flex-direction: row-reverse; gap: 0.4em; justify-content: center; position: fixed; width: 100vw; max-width: unset; bottom: 0.6em; margin: 0; }
            #fakeFooter { height: 3.04em; } `}if(b.toggles[2]&&t.classList.remove("noTextSelection"),b.toggles[1]){let c=n("upgradeSubtabElements");c.id="ElementsTab",n("upgradeTab").after(c);let d=n("upgradeSubtabBtnElements");d.id="ElementsTabBtn",d.classList.add("stage4Include"),n("upgradeTabBtn").after(d),r.tabs.Elements={current:"Elements",list:[]},r.tabs.upgrade.list.splice(r.tabs.upgrade.list.indexOf("Elements"),1),r.tabs.list.splice(r.tabs.list.indexOf("upgrade")+1,0,"Elements")}if(me(0,"mobile"),me(0,"reader"),b.MDSettings[0]){k.styleSheet.textContent+=`html.noTextSelection, img, input[type = "image"], button, #load, a, #notifications > p, #globalStats { user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; } /* Safari junk to disable image hold menu and text selection */
            #themeArea > div > div { position: unset; display: flex; width: 15em; }
            #themeArea > div > button { display: none; } /* More Safari junk to make windows work without focus */`,n("file").accept="",r.debug.MDStrangePage=1;for(let M=0;M<=2;M++){let N=document.createElement("button");N.innerHTML='<span class="downArrow"></span>',N.type="button",n(`reset${M}Main`).append(N),N.addEventListener("click",()=>n(`reset${M}Main`).classList.toggle("open")),N.addEventListener("blur",()=>n(`reset${M}Main`).classList.remove("open"))}k.styleSheet.textContent+=`#resets { row-gap: 1em; }
            #resets > section { position: relative; flex-direction: row; justify-content: center; width: unset; padding: unset; row-gap: unset; background-color: unset; border: unset; }
            #resets > section:not(.open) > p { display: none !important; }
            #resets > section > button:last-of-type { display: flex; justify-content: center; align-items: center; width: 2.2em; margin-left: -2px; }
            #resets .downArrow { width: 1.24em; height: 1.24em; }
            #resets p { position: absolute; width: 17.4em; padding: 0.5em 0.6em 0.6em; background-color: var(--window-color); border: 2px solid var(--window-border); top: calc(100% - 2px); z-index: 2; box-sizing: content-box; } `;let c=document.createElement("button");c.className="hollowButton",c.textContent="Create",c.id="upgradeCreate",c.type="button",n("createAllUpgrades").before(c);let d=document.createElement("button");d.className="hollowButton",d.textContent="Activate",d.id="inflationActivate",d.type="button",n("inflationRefund").before(d);let p=document.createElement("div");p.id="strangenessPages",p.innerHTML='<button type="button" id="strangenessPage1" class="stage1borderImage hollowButton">1</button><button type="button" id="strangenessPage2" class="stage2borderImage hollowButton">2</button><button type="button" id="strangenessPage3" class="stage3borderImage hollowButton">3</button><button type="button" id="strangenessPage4" class="stage4borderImage hollowButton">4</button><button type="button" id="strangenessPage5" class="stage5borderImage hollowButton">5</button><button type="button" id="strangenessPage6" class="stage6borderImage hollowButton">6</button>',k.styleSheet.textContent+=`#strangenessPages { display: flex; justify-content: center; column-gap: 0.36em; }
            #strangenessPages button { width: 2.08em; height: calc(2.08em - 2px); border-top: none; border-radius: 0 0 4px 4px; }`,n("strangenessResearch").append(p);let h=document.createElement("button");h.className="hollowButton",h.textContent="Create",h.id="strangenessCreate",h.type="button",n("createAllStrangeness").before(h),n("strangenessToggles").style.display="";let v=document.createElement("li");v.innerHTML='<label>Keep mouse events<button type="button" id="MDToggle1" class="specialToggle">OFF</button></label>';let S=document.createElement("li");S.innerHTML='<label>Allow zoom<button type="button" id="MDToggle2" class="specialToggle">OFF</button></label>',n("MDLi").after(v,S);for(let M=1;M<ie.MDSettings.length;M++)n(`MDToggle${M}`).addEventListener("click",()=>{me(M,"mobile",!0,M===1),M===2&&(n("viewportMeta").content=`width=device-width${b.MDSettings[2]?"":", minimum-scale=1.0, maximum-scale=1.0"}, initial-scale=1.0`)}),me(M,"mobile");b.MDSettings[2]&&(n("viewportMeta").content="width=device-width, initial-scale=1.0")}if(b.SRSettings[0]){let c=n("SRMessage1");c.textContent="Screen reader support is enabled, disable it if its not required",c.className="greenText",c.ariaHidden="true";for(let h=0;h<w.strange.length;h++)n(`strange${h}`).tabIndex=0;let d=document.createElement("article");d.innerHTML='<h5>Information for the Screen reader</h5><p id="SRTab" aria-live="polite"></p><p id="SRStage" aria-live="polite"></p><p id="SRMain" aria-live="assertive"></p>',d.className="reader",n("fakeFooter").before(d);let p=document.createElement("li");p.innerHTML='<label>Keep tab index on created Upgrades<button type="button" id="SRToggle1" class="specialToggle">OFF</button></label>',n("SRLi").after(p);for(let h=1;h<ie.SRSettings.length;h++)n(`SRToggle${h}`).addEventListener("click",()=>{me(h,"reader",!0)}),me(h,"reader")}else{let c=b.toggles[0]?0:1;x("#SRMessage1 span").textContent=`${b.hotkeys.tabLeft[c]} and ${b.hotkeys.tabRight[c]}`,x("#SRMessage1 span:last-of-type").textContent=`${b.hotkeys.subtabDown[c]} and ${b.hotkeys.subtabUp[c]}`}let a=e.version,o=localStorage.getItem(k.localStorage.main);o!==null?a=ft(JSON.parse(atob(o))):(xe(!1),ft(F(w))),Ee();let i=b.MDSettings[0],l=b.SRSettings[0],u=!i||b.MDSettings[1],g=c=>{let d=r.hotkeys;d.shift&&(c===null||c.key==="Shift")&&(d.shift=!1,P()),d.ctrl&&(c===null||c.key==="Control")&&(d.ctrl=!1,P()),d.tab=!1,d.last=""};t.addEventListener("contextmenu",c=>{let d=document.activeElement?.type;d!=="text"&&d!=="number"&&!b.developerMode&&c.preventDefault()}),t.addEventListener("keydown",c=>hs(c)),t.addEventListener("keyup",g),u&&(t.addEventListener("mouseup",$t),t.addEventListener("mouseleave",()=>{g(null),$t()})),i?(t.addEventListener("touchstart",c=>{k.mobileDevice.start=[c.touches[0].clientX,c.touches[0].clientY]}),t.addEventListener("touchend",c=>{$t();let d=[n("globalStats"),n("footerMain")];for(let p=c.target;p!=null;p=p.parentElement)if(d.includes(p)){p!==d[0]&&(d[0].style.opacity="1");return}d[0].style.opacity="1",ys(c)}),t.addEventListener("touchcancel",()=>{g(null),$t()})):t.addEventListener("touchstart",()=>U("Touch events require mobile device support enabled in settings"),{once:!0});{let c=d=>{let p=d.currentTarget,h=n("hoverWindow");k.hoverText=()=>{h.textContent=p.dataset.title},k.hoverText(),h.style.display="";let v=S=>{h.style.left=`${Math.min(S.clientX+10,document.documentElement.clientWidth-h.getBoundingClientRect().width)}px`,h.style.top=`${S.clientY+10}px`};v(d),p.addEventListener("mousemove",v),p.addEventListener("mouseleave",()=>{k.hoverText=null,h.style.display="none",p.removeEventListener("mousemove",v)},{once:!0})};for(let d of it("hasTitle"))d.addEventListener("mouseenter",c)}for(let c=0;c<ie.toggles.length;c++){let d=[1,3,5,7];n(`globalToggle${c}`).addEventListener("click",()=>{if(me(c,"global",!0,d.includes(c)),c===0){Ee();let p=b.toggles[0]?0:1;for(let h in ie.hotkeys)x(`#${h}Hotkey button`).textContent=b.hotkeys[h][p]}else c===2?document.documentElement.classList[b.toggles[2]?"remove":"add"]("noTextSelection"):c===4?(n("globalStats").style.display=b.toggles[4]?"none":"",q(),P()):c===8&&n("alertCancel")[b.toggles[8]?"after":"before"](n("alertConfirm"))})}for(let c=1;c<k.longestBuilding;c++)n(`toggleBuilding${c}`).addEventListener("click",()=>_(c,"buildings",!0));for(let c=0;c<w.toggles.normal.length;c++)n(`toggleNormal${c}`).addEventListener("click",()=>_(c,"normal",!0));for(let c=0;c<w.toggles.confirm.length;c++)n(`toggleConfirm${c}`).addEventListener("click",()=>Xt(c,!0));for(let c=0;c<w.toggles.hover.length;c++)n(`toggleHover${c}`).addEventListener("click",()=>_(c,"hover",!0));for(let c=0;c<w.toggles.max.length;c++)n(`toggleMax${c}`).addEventListener("click",()=>_(c,"max",!0));for(let c=0;c<w.toggles.auto.length;c++)n(`toggleAuto${c}`).addEventListener("click",()=>_(c,"auto",!0));{let c=n("reset2Button"),d=n("reset2Footer"),p=()=>H(Oe);c.addEventListener("click",Oe),d.addEventListener("click",Oe),u&&(c.addEventListener("mousedown",p),d.addEventListener("mousedown",p)),i&&(c.addEventListener("touchstart",p),d.addEventListener("touchstart",p))}{let c=n("reset1Button"),d=n("reset1Footer"),p=()=>H(()=>{e.inflation.vacuum||e.stage.active>=4||ze()});c.addEventListener("click",ze),d.addEventListener("click",ze),u&&(c.addEventListener("mousedown",p),d.addEventListener("mousedown",p)),i&&(c.addEventListener("touchstart",p),d.addEventListener("touchstart",p))}{let c=n("reset0Button"),d=n("reset0Footer"),p=()=>{let v=e.stage.active;v===1?vt():v===2?bt():v===3?St():v===4?st():v===5?nt():v===6&&xt()},h=()=>H(()=>{e.stage.active!==1&&e.stage.active!==3||p()});c.addEventListener("click",p),d.addEventListener("click",p),u&&(c.addEventListener("mousedown",h),d.addEventListener("mousedown",h)),i&&(c.addEventListener("touchstart",h),d.addEventListener("touchstart",h))}{let c=n("resetExtraFooter"),d=()=>{let h=e.stage.active;h===4?oe(3,5):h===5?st():h===6&&nt()},p=()=>{H(()=>{e.stage.active===4&&d()})};c.addEventListener("click",d),u&&c.addEventListener("mousedown",p),i&&c.addEventListener("touchstart",p)}let m=()=>r.hotkeys.shift?r.hotkeys.ctrl?100:1:r.hotkeys.ctrl?10:void 0;for(let c=1;c<k.longestBuilding;c++){let d=n(`building${c}Btn`),p=()=>oe(c,e.stage.active,m());d.addEventListener("click",p),u&&d.addEventListener("mousedown",()=>H(p)),i&&d.addEventListener("touchstart",()=>H(p))}for(let c=0;c<w.verses.length;c++){let d=n(`verse${c}Btn`),p=()=>ht(c);d.addEventListener("click",p),u&&d.addEventListener("mousedown",()=>H(p)),i&&d.addEventListener("touchstart",()=>H(p))}{let c=n("makeAllStructures"),d=n("makeAllFooter");c.addEventListener("click",Me),d.addEventListener("click",Me),u&&(c.addEventListener("mousedown",()=>H(Me)),d.addEventListener("mousedown",()=>H(Me))),i&&(c.addEventListener("touchstart",()=>H(Me)),d.addEventListener("touchstart",()=>H(Me)))}n("toggleAll").addEventListener("click",Et),n("buyAnyInput").addEventListener("focus",()=>{let c=x("#buyAnyMain > label");Tt(c);let d=n("buyAnyInput"),p=()=>{e.toggles.shop.input=Math.max(Math.trunc(Number(d.value)),0),d.value=f(e.toggles.shop.input,{type:"input"}),P()};d.addEventListener("change",p),d.addEventListener("blur",()=>{c.style.display="none",d.removeEventListener("change",p)},{once:!0})}),n("autoWaitInput").addEventListener("focus",()=>{let c=x("#autoWaitMain > label");Tt(c);let d=n("autoWaitInput"),p=()=>{let h=Math.max(Number(d.value),1);d.value=f(e.toggles.shop.wait[e.stage.active]=isNaN(h)?2:h,{type:"input"})};d.addEventListener("change",p),d.addEventListener("blur",()=>{c.style.display="none",d.removeEventListener("change",p)},{once:!0})}),n("exitFooter").addEventListener("click",()=>Be(null));for(let c=0;c<r.challengesInfo.length;c++){let d=n(`challenge${c+1}`);i||d.addEventListener("mouseenter",()=>Ms(c)),d.addEventListener("click",()=>{r.lastChallenge[0]===c?Be(c):Ms(c)})}n("challengeName").addEventListener("click",()=>{qe(!0)}),n("voidRewardsType").addEventListener("click",()=>{mt(),lt(r.lastChallenge[1])});for(let c=1;c<=5;c++){let d=n(`voidReward${c}`),p=()=>{r.lastChallenge[1]=c,lt(c)};d.addEventListener("mouseenter",p),(u||l)&&d.addEventListener("focus",()=>{r.hotkeys.tab&&p()})}for(let c=0;c<k.longestUpgrade;c++){let d=n(`upgrade${c+1}`),p=()=>Ke(c,"upgrades"),h=()=>W(c,e.stage.active,"upgrades");u&&d.addEventListener("mouseenter",()=>{p(),e.toggles.hover[0]&&h()}),i?d.addEventListener("touchstart",()=>{p(),e.toggles.hover[0]&&(h(),H(h))}):(d.addEventListener("click",h),d.addEventListener("mousedown",()=>H(h))),(u||l)&&d.addEventListener("focus",()=>{r.hotkeys.tab&&(p(),e.toggles.hover[0]&&h())})}for(let c=0;c<k.longestResearch;c++){let d=n(`research${c+1}`),p=x(`#research${c+1} > input`),h=()=>Ke(c,"researches"),v=()=>W(c,e.stage.active,"researches");u&&(d.addEventListener("mouseenter",h),p.addEventListener("mouseenter",()=>{e.toggles.hover[0]&&v()})),i?d.addEventListener("touchstart",()=>{h(),e.toggles.hover[0]&&(v(),H(v))}):(d.addEventListener("mousedown",()=>H(v)),p.addEventListener("click",v)),(u||l)&&p.addEventListener("focus",()=>{r.hotkeys.tab&&(h(),e.toggles.hover[0]&&v())})}for(let c=0;c<k.longestResearchExtra;c++){let d=n(`researchExtra${c+1}`),p=x(`#researchExtra${c+1} > input`),h=()=>Ke(c,"researchesExtra"),v=()=>W(c,e.stage.active,"researchesExtra");u&&(d.addEventListener("mouseenter",h),p.addEventListener("mouseenter",()=>{e.toggles.hover[0]&&v()})),i?d.addEventListener("touchstart",()=>{h(),e.toggles.hover[0]&&(v(),H(v))}):(d.addEventListener("mousedown",()=>H(v)),p.addEventListener("click",v)),(u||l)&&p.addEventListener("focus",()=>{r.hotkeys.tab&&(h(),e.toggles.hover[0]&&v())})}for(let c=0;c<w.researchesAuto.length;c++){let d=n(`researchAuto${c+1}`),p=x(`#researchAuto${c+1} > input`),h=()=>Ke(c,"researchesAuto"),v=()=>$s(c);u&&(d.addEventListener("mouseenter",h),p.addEventListener("mouseenter",()=>{e.toggles.hover[0]&&W(c,e.stage.active,"researchesAuto")})),i?d.addEventListener("touchstart",()=>{h(),e.toggles.hover[0]&&(v(),H(v))}):(d.addEventListener("mousedown",()=>H(v)),p.addEventListener("click",v)),(u||l)&&p.addEventListener("focus",()=>{r.hotkeys.tab&&(h(),e.toggles.hover[0]&&W(c,e.stage.active,"researchesAuto"))})}{let c=n("ASR"),d=x("#ASR > input"),p=()=>Ke(0,"ASR"),h=()=>W(0,e.stage.active,"ASR");u&&(c.addEventListener("mouseenter",p),d.addEventListener("mouseenter",()=>{e.toggles.hover[0]&&h()})),i?c.addEventListener("touchstart",()=>{p(),e.toggles.hover[0]&&(h(),H(h))}):(c.addEventListener("mousedown",()=>H(h)),d.addEventListener("click",h)),(u||l)&&d.addEventListener("focus",()=>{r.hotkeys.tab&&(p(),e.toggles.hover[0]&&h())})}if(i){let c=n("upgradeCreate"),d=()=>{let p=e.stage.active,h=r.lastUpgrade[p];if(h[0]!==null){if(h[1]==="researchesAuto")return $s(h[0]);W(h[0],p,h[1])}};c.addEventListener("click",d),c.addEventListener("touchstart",()=>H(d)),u&&c.addEventListener("mousedown",()=>H(d))}{let c=n("createAllUpgrades"),d=n("createAllFooter");c.addEventListener("click",Re),d.addEventListener("click",Re),u&&(c.addEventListener("mousedown",()=>H(Re)),d.addEventListener("mousedown",()=>H(Re))),i&&(c.addEventListener("touchstart",()=>H(Re)),d.addEventListener("touchstart",()=>H(Re)))}{let c=n("element0"),d=()=>{r.lastElement=0,rt(0,"elements")};l&&(n("element1").addEventListener("keydown",p=>{if(p.code!=="Tab"||de(p)!==!0)return;let h=n("element0");h.tabIndex=0,h.ariaHidden="false"}),c.addEventListener("keydown",p=>{p.code==="Enter"&&de(p)===!1&&(p.preventDefault(),d())}),c.addEventListener("blur",()=>{let p=n("element0");p.tabIndex=-1,p.ariaHidden="true"})),u&&c.addEventListener("dblclick",d),i&&c.addEventListener("touchstart",()=>{r.intervalsId.mouseRepeat===void 0&&(r.intervalsId.mouseRepeat=setTimeout(d,3e3))})}for(let c=1;c<w.elements.length;c++){let d=n(`element${c}`),p=()=>W(c,4,"elements"),h=()=>Ke(c,"elements");u&&(d.addEventListener("mouseenter",()=>{h(),e.toggles.hover[0]&&p()}),d.addEventListener("mousedown",()=>H(p))),i?d.addEventListener("touchstart",()=>{h(),e.toggles.hover[0]&&p(),H(p)}):d.addEventListener("click",p),(u||l)&&d.addEventListener("focus",()=>{r.hotkeys.tab&&(h(),e.toggles.hover[0]&&p())})}for(let c=0;c<w.strange.length;c++){let d=n(`strange${c}`),p=(h=!1)=>{if(c===0&&e.stage.true<6&&e.milestones[4][0]<8)return;let v=n(`strange${c}EffectsMain`);if(v.dataset.focus==="true")return;let S=n(`strange${c}`);h?(v.dataset.focus="true",S.addEventListener("blur",()=>{v.style.display="none",v.dataset.focus=""},{once:!0})):S.addEventListener("mouseleave",()=>{v.dataset.focus!=="true"&&(v.style.display="none")},{once:!0}),v.style.display="",P(),q()};d.addEventListener("mouseenter",()=>p()),l&&d.addEventListener("focus",()=>p(!0))}for(let c=1;c<w.strangeness.length;c++){i&&n(`strangenessPage${c}`).addEventListener("click",()=>ot(c));for(let d=0;d<w.strangeness[c].length;d++){let p=n(`strange${d+1}Stage${c}`),h=x(`#strange${d+1}Stage${c} > input`),v=()=>Yt(d,c,"strangeness"),S=()=>He(d,c,"strangeness");u&&(p.addEventListener("mouseenter",v),h.addEventListener("mouseenter",()=>{e.toggles.hover[1]&&S()})),i?p.addEventListener("touchstart",()=>{v(),e.toggles.hover[1]&&(S(),H(S))}):(p.addEventListener("mousedown",()=>H(S)),h.addEventListener("click",S)),(u||l)&&h.addEventListener("focus",()=>{r.hotkeys.tab&&(v(),e.toggles.hover[1]&&S())})}}if(i){let c=n("strangenessCreate"),d=()=>{let p=r.lastStrangeness;p[0]!==null&&He(p[0],p[1],"strangeness")};c.addEventListener("click",d),c.addEventListener("touchstart",()=>H(d)),u&&c.addEventListener("mousedown",()=>H(d))}{let c=n("createAllStrangeness"),d=()=>{if(b.MDSettings[0]){let p=r.debug.MDStrangePage;for(let h=0;h<r.strangenessInfo[p].maxActive;h++)He(h,p,"strangeness")}else for(let p=1;p<r.strangenessInfo.length;p++)for(let h=0;h<r.strangenessInfo[p].maxActive;h++)He(h,p,"strangeness")};c.addEventListener("click",d),u&&c.addEventListener("mousedown",()=>H(d)),i&&c.addEventListener("touchstart",()=>H(d))}n("strangenessVisibility").addEventListener("click",()=>{r.sessionToggles[1]=!r.sessionToggles[1],n("strangenessVisibility").textContent=`Permanent ones are ${r.sessionToggles[1]?"shown":"hidden"}`,q()});for(let c=1;c<w.milestones.length;c++)for(let d=0;d<w.milestones[c].length;d++){let p=x(`#milestone${d+1}Stage${c}Div > input`),h=()=>Yt(d,c,"milestones");u&&p.addEventListener("mouseenter",h),i&&p.addEventListener("touchstart",h),(u||l)&&p.addEventListener("focus",()=>{r.hotkeys.tab&&h()})}for(let c=0;c<=1;c++)for(let d=0;d<w.tree[c].length;d++){let p=n(`inflation${d+1}Tree${c+1}`),h=x(`#inflation${d+1}Tree${c+1} > input`),v=()=>Yt(d,c,"inflations"),S=()=>He(d,c,"inflations");u&&(p.addEventListener("mouseenter",v),h.addEventListener("mouseenter",()=>{e.toggles.hover[2]&&S()})),i?p.addEventListener("touchstart",()=>{v(),e.toggles.hover[2]&&(S(),H(S))}):(p.addEventListener("mousedown",()=>H(S)),h.addEventListener("click",S)),(u||l)&&h.addEventListener("focus",()=>{r.hotkeys.tab&&(v(),e.toggles.hover[2]&&S())})}{let c=n("loadoutsName");c.addEventListener("change",()=>{let d=n("loadoutsName");d.value=d.value.trim()}),c.addEventListener("keydown",d=>{de(d)===!1&&d.code==="Enter"&&(d.preventDefault(),Ts())})}if(n("inflationRefund").addEventListener("click",()=>void Gt(r.hotkeys.shift)),n("inflationLoadouts").addEventListener("click",()=>{(r.loadouts.open=!r.loadouts.open)?(n("loadoutsMain").style.display="",n("loadoutsName").value="Current",Cs(),Ct()):n("loadoutsMain").style.display="none",b.SRSettings[0]&&(n("inflationLoadouts").ariaExpanded=`${r.loadouts.open}`)}),n("loadoutsEdit").addEventListener("change",()=>{let c=n("loadoutsEdit").value.split(/[,\\/_ |]+/),d=[];for(let p=0;p<c.length;p++){let h=c[p].indexOf("x"),v=1;h!==-1&&(v=Math.min(Math.max(Number(c[p].slice(h+1)),0),20),isNaN(v)&&(v=1),c[p]=c[p].slice(0,h));let S=Math.trunc(Number(c[p])-1);if(!(S<0||!isFinite(S)))for(let M=0;M<v;M++)d.push(S)}_e(d)}),n("loadoutsLoadAuto").addEventListener("click",Cs),n("loadoutsSave").addEventListener("click",Ts),n("loadoutsLoad").addEventListener("click",()=>void Is()),n("loadoutsMove").addEventListener("click",()=>{let c=n("loadoutsName").value,d,p=e.inflation.loadouts;for(let S=0;S<p.length;S++)if(c===p[S][0]){d=S;break}if(d===void 0)return;let h=p.splice(d,1)[0],v=d+(r.hotkeys.shift?-1:1);v<0?p.push(h):v>p.length?p.unshift(h):p.splice(v,0,h),Ct()}),n("loadoutsDelete").addEventListener("click",async()=>{let c=e.inflation.loadouts;if(r.hotkeys.shift){if(c.length===0||!await X("Delete all loadouts?"))return;c.length=0}else{let d=n("loadoutsName").value,p;for(let h=0;h<c.length;h++)if(d===c[h][0]){p=h;break}if(p===void 0||!await X(`Delete selected loadout '${d}'?
(Hold shift before clicking 'delete' to delete all)`))return;c.splice(p,1)}Ct()}),i){let c=n("inflationActivate"),d=()=>{r.lastInflation[0]!==null&&He(r.lastInflation[0],r.lastInflation[1],"inflations")};c.addEventListener("click",d),c.addEventListener("touchstart",()=>H(d)),u&&c.addEventListener("mousedown",()=>H(d))}for(let c of[0,2,4,9,10]){let d=n(`toggleAuto${c}Info`),p=(h=!1)=>{let v=n(`toggleAuto${c}Menu`);if(v.dataset.click==="true")return;let S=n(`toggleAuto${c}Info`),M=document.documentElement;if(h)S.addEventListener("mouseleave",()=>{v.dataset.click!=="true"&&(v.style.display="none")},{once:!0});else{v.dataset.click="true";let N=A=>{for(let D=A.target;D!=null;D=D.parentElement)if(v===D)return;M.removeEventListener("click",N,{capture:!0}),v.style.display="none",v.dataset.click=""};M.addEventListener("click",N,{capture:!0})}Tt(v),c===0&&q()};d.addEventListener("click",()=>p()),u&&d.addEventListener("mouseenter",()=>p(!0))}n("stageInput").addEventListener("change",()=>{let c=n("stageInput"),d=Number(c.dataset.type);w.stage.input[d]!==void 0?c.value=f(e.stage.input[d]=Number(c.value),{type:"input"}):e.stage.input[0]=1});{let c=n("stageInputType");c.addEventListener("change",()=>{let d=n("stageInputType"),p=Math.trunc(Number(d.value));d.value=f(e.stage.input[0]=Math.min(Math.max(1,isNaN(p)?1:p),w.stage.input.length-1),{type:"input"})}),c.addEventListener("blur",()=>{q()})}n("vaporizationInput").addEventListener("change",()=>{let c=n("vaporizationInput");c.value=f(e.vaporization.input[0]=Math.max(Number(c.value),0),{type:"input"})}),n("vaporizationInputMax").addEventListener("change",()=>{let c=n("vaporizationInputMax");c.value=f(e.vaporization.input[1]=Number(c.value),{type:"input"})}),n("collapseInput").addEventListener("change",()=>{let c=n("collapseInput");c.value=f(e.collapse.input[0]=Math.max(Number(c.value),1),{type:"input"})}),n("collapseInputWait").addEventListener("change",()=>{let c=n("collapseInputWait");c.value=f(e.collapse.input[1]=Number(c.value),{type:"input"})}),n("collapseAddNewPoint").addEventListener("change",()=>{let c=n("collapseAddNewPoint"),d=Number(c.value);if(c.value="",isFinite(d))if(d===0)e.collapse.points=[];else{let p=e.collapse.points,h=p.indexOf(Math.abs(d));d>0&&h===-1?(p.push(d),p.sort((v,S)=>v-S)):d<0&&h!==-1&&(p.splice(h,1),p.sort((v,S)=>v-S))}r.collapseInfo.pointsLoop=0,kt()}),n("mergeInput").addEventListener("change",()=>{let c=n("mergeInput");c.value=f(e.merge.input[0]=Math.trunc(Number(c.value)),{type:"input"})}),n("mergeInputSince").addEventListener("change",()=>{let c=n("mergeInputSince");c.value=f(e.merge.input[1]=Number(c.value),{type:"input"})}),n("nucleationInput").addEventListener("change",()=>{let c=n("nucleationInput");c.value=f(e.darkness.input=Math.max(Number(c.value),0),{type:"input"})}),n("versionButton").addEventListener("click",xs),n("hotkeysButton").addEventListener("click",ws),n("save").addEventListener("click",()=>{Te()}),n("file").addEventListener("change",async()=>{let c=n("file");try{ks(await c.files[0].text())}finally{c.value=""}}),n("export").addEventListener("click",()=>{let c=e.time.export;if((e.stage.true>=7||e.strange[0].total>0)&&(e.challenges.active===null||r.challengesInfo[e.challenges.active].resetType==="stage")&&c[0]>0)if(b.developerMode)U("Export reward is disabled when using 'devMode', disable it by writting this into save options (case sensitive)");else{let h=e.inflation.ends[0]>=1?1:2.5,v=Math.min(c[0]/432e5,1);if(e.strangeness[5][8]>=1){let S=c[2]/h*v;e.strange[1].current+=S,e.strange[1].total+=S,c[2]-=Math.max(c[2]-S,0),R.strange1()}{let S=(c[1]/h+1)*v;e.strange[0].current+=S,e.strange[0].total+=S,c[1]=Math.max(c[1]-S,0),R.strange0()}c[0]=0,P()}let d=Te(b.developerMode);if(d===null)return;let p=document.createElement("a");p.href=`data:text/plain,${d}`,p.download=Es(),p.click()}),n("saveConsole").addEventListener("click",async()=>{let c=await Mt(`Available options:
'Copy' \u2012 copy save file to the clipboard
'Delete' \u2012 delete your save file
'Clear' \u2012 clear all the domain data
'Global' \u2012 open options for global settings
(Adding '_' will skip options menu)
Or insert save file text here to load it`);if(c===null||c==="")return;let d=c.trim().toLowerCase();if(d==="global"){if(c=await Mt(`Available options:
'Reset' \u2012 reset global settings
'Copy' \u2012 copy global settings to the clipboard
Or insert global settings text here to load it`),c===null||c==="")return;d=`global_${c.trim().toLowerCase()}`}if(d==="copy"||d==="global_copy"){let p=d==="global_copy"?se(!0):Te(!0);if(p!==null)try{await navigator.clipboard.writeText(p),U(`${d==="global_copy"?"Settings have":"Save has"} been copied to the clipboard`)}catch(h){if(console.warn(`Full error for being unable to write to the clipboard:
${h}`),await X("Could not copy text into clipboard, press 'Confrim' to save it as a file instead")){let v=document.createElement("a");v.href=`data:text/plain,${p}`,v.download=`Fundamental ${d==="global_copy"?"settings":"save"} clipboard`,v.click()}}}else if(d==="delete"||d==="clear"||d==="global_reset")$e(),d==="delete"?localStorage.removeItem(k.localStorage.main):d==="global_reset"?localStorage.removeItem(k.localStorage.settings):localStorage.clear(),window.location.reload(),ae("Awaiting game reload");else if(c==="devMode")U(`Developer mode is ${(b.developerMode=!b.developerMode)?"now":"no longer"} active`),se();else if(d==="console"&&b.developerMode)console.log(F(e),F(b),F(r));else if(d==="achievement")U("Unlocked a new Achievement! (If there were any)");else if(d==="slow"||d==="free"||d==="boost")U("Game speed was increased by 1x");else if(d==="secret"||d==="global_secret"||d==="secret_secret")U(`Found a ${d==="secret_secret"?"ultra rare secret, but it doesn't proof anything":`${d==="global_secret"?"global":"rare"} secret, don't share it with anybody`}`);else if(d==="secret_proof")U("Found a proof that you were looking for!");else if(d==="quantum")n("body").style.display="none",document.documentElement.style.backgroundColor="black",await ae("Close when you are done enjoying the Quantum Vacuum"),document.documentElement.style.backgroundColor="",n("body").style.display="";else{if(c.length<20)return void ae(`Input '${c}' doesn't match anything`);if(d.includes("global_")){if(!await X(`Press 'Confirm' to load input as a new global settings, this will reload the page
(Input is too long to be displayed)`))return;localStorage.setItem(k.localStorage.settings,c[6]==="_"?c.substring(7):c),window.location.reload(),ae("Awaiting game reload")}else{if(!await X(`Press 'Confirm' to load input as a save file
(Input is too long to be displayed)`))return;ks(c)}}}),n("switchTheme0").addEventListener("click",()=>Qe(null));for(let c=1;c<r.stageInfo.word.length;c++)n(`switchTheme${c}`).addEventListener("click",()=>Qe(c));n("saveFileNameInput").addEventListener("focus",()=>{let c=n("saveFileNameLabel"),d=n("saveFileNameInput"),p=()=>{let v=d.value.trim();n("saveFileNamePreview").textContent=Es(v.length===0?w.fileName:v)};Tt(c),p();let h=()=>{let v=d.value.trim();v.length===0&&(v=w.fileName,d.value=v),e.fileName=v};d.addEventListener("change",h),d.addEventListener("input",p),d.addEventListener("blur",()=>{c.style.display="none",d.removeEventListener("input",p),d.removeEventListener("change",h)},{once:!0})}),n("numbersInterval").addEventListener("change",()=>{let c=n("numbersInterval");b.intervals.numbers=Math.min(Math.max(Math.trunc(Number(c.value)),40),200),c.value=`${b.intervals.numbers}`,se(),It()}),n("visualInterval").addEventListener("change",()=>{let c=n("visualInterval");b.intervals.visual=Math.min(Math.max(Math.trunc(Number(c.value)),200),2e3),c.value=`${b.intervals.visual}`,se(),It()}),n("autoSaveInterval").addEventListener("change",()=>{let c=n("autoSaveInterval");b.intervals.autoSave=Math.min(Math.max(Math.trunc(Number(c.value)),5),9999)*1e3,c.value=`${b.intervals.autoSave/1e3}`,se(),r.paused||(clearTimeout(r.intervalsId.autoSave),r.intervalsId.autoSave=setTimeout(Te,b.intervals.autoSave))}),n("thousandSeparator").addEventListener("change",()=>Jt(!1)),n("decimalPoint").addEventListener("change",()=>Jt(!0)),n("MDToggle0").addEventListener("click",()=>me(0,"mobile",!0,!0)),n("SRToggle0").addEventListener("click",()=>me(0,"reader",!0,!0)),n("pauseButton").addEventListener("click",Qt),n("reviewEvents").addEventListener("click",vs),n("fullscreenButton").addEventListener("click",()=>{document.fullscreenElement===null?document.documentElement.requestFullscreen({navigationUI:"hide"}):document.exitFullscreen()});{let c=n("warpButton");c.addEventListener("click",gt),c.addEventListener("touchstart",()=>H(gt)),u&&c.addEventListener("mousedown",()=>H(gt))}n("customFontSize").addEventListener("change",()=>jt()),n("stageHistorySave").addEventListener("change",()=>{let c=n("stageHistorySave");e.history.stage.input[0]=Math.min(Math.max(Math.trunc(Number(c.value)),0),20),c.value=`${e.history.stage.input[0]}`}),n("stageHistoryShow").addEventListener("change",()=>{let c=n("stageHistoryShow");e.history.stage.input[1]=Math.min(Math.max(Math.trunc(Number(c.value)),10),100),c.value=`${e.history.stage.input[1]}`,r.debug.historyStage=null,q()}),n("endHistorySave").addEventListener("change",()=>{let c=n("endHistorySave");e.history.end.input[0]=Math.min(Math.max(Math.trunc(Number(c.value)),0),20),c.value=`${e.history.end.input[0]}`}),n("endHistoryShow").addEventListener("change",()=>{let c=n("endHistoryShow");e.history.end.input[1]=Math.min(Math.max(Math.trunc(Number(c.value)),10),100),c.value=`${e.history.end.input[1]}`,r.debug.historyEnd=null,q()});{let c=d=>{let p=d instanceof MouseEvent,h=document.documentElement,v=h.clientWidth,S=h.clientHeight,M=d.currentTarget,N=M.getBoundingClientRect(),A=N.right-(p?d.clientX:d.changedTouches[0].clientX),D=N.bottom-(p?d.clientY:d.changedTouches[0].clientY),G=z=>{let Z=M.getBoundingClientRect();M.style.right=`${Math.max(1-Math.max((p?z.clientX:z.changedTouches[0].clientX)+A,Z.width)/v,0)*100}%`,M.style.bottom=`${Math.max(1-Math.max((p?z.clientY:z.changedTouches[0].clientY)+D,Z.height)/S,0)*100}%`,p||(M.style.opacity="1")},V=p?()=>{h.removeEventListener("mousemove",G),h.removeEventListener("mouseup",V),h.removeEventListener("mouseleave",V),M.style.opacity=""}:()=>{h.removeEventListener("touchmove",G),h.removeEventListener("touchend",V),h.removeEventListener("touchcancel",V)};p?(h.addEventListener("mousemove",G),h.addEventListener("mouseup",V),h.addEventListener("mouseleave",V),M.style.opacity="1"):(d.preventDefault(),h.addEventListener("touchmove",G),h.addEventListener("touchend",V),h.addEventListener("touchcancel",V),M.style.opacity="0.2")};u&&n("globalStats").addEventListener("mousedown",c),i&&n("globalStats").addEventListener("touchstart",c,{capture:!0})}for(let c of r.tabs.list){n(`${c}TabBtn`).addEventListener("click",()=>j(c));for(let d of r.tabs[c].list)n(`${c}SubtabBtn${d}`).addEventListener("click",()=>j(c,d))}for(let c=1;c<r.stageInfo.word.length;c++)n(`stageSwitch${c}`).addEventListener("click",()=>tt(c));if(n("shiftFooter").addEventListener("click",()=>{r.hotkeys.shift=!r.hotkeys.shift,P()}),document.head.append(k.styleSheet),J(!0,!0),b.theme!==null&&(n("currentTheme").textContent=r.stageInfo.word[b.theme],n(`switchTheme${b.theme}`).style.textDecoration="underline",n("switchTheme0").style.textDecoration="",Qe()),o!==null){r.lastSave=Rt();let c=r.lastSave,d=Date.now();De(r.lastSave),(async()=>{let p=await fetch("./last_build.txt");p.ok&&(r.lastUpdate=Number((await p.text()).replace(`
`,"")),(r.lastUpdate===0||isNaN(r.lastUpdate))&&(r.lastUpdate=null)),U(`Welcome back, you were away for ${f(c/1e3,{type:"time",padding:!1})}${a!==e.version?`
Game has been updated from ${a} to ${e.version}`:""}${r.lastUpdate!==null?`
Last update was ${f((d-r.lastUpdate)/1e3,{type:"time",padding:!1})} ago`:""}${b.developerMode?`
Game loaded after ${f((d-w.time.started)/1e3,{type:"time",padding:!1})}`:""}
            `)})()}else $e(!1);n("body").style.display="",n("loading").style.display="none",document.title=`Fundamental ${w.version}`,k.cache.idMap.clear(),k.cache.queryMap.clear(),k.cache.classMap.clear()}catch(t){let s=t.stack;ae(`Game failed to load
${typeof s=="string"?s.replaceAll(`${window.location.origin}/`,""):t}`,2);let a=document.createElement("div");a.innerHTML='<button type="button" id="exportError" style="width: 7em;">Export save</button><button type="button" id="deleteError" style="width: 7em;">Delete save</button>',a.style.cssText="display: flex; column-gap: 0.6em; margin-top: 0.4em;",n("loading").append(a);let o=!1;throw n("exportError").addEventListener("click",()=>{o=!0;let i=localStorage.getItem(k.localStorage.main);if(i===null)return void ae("Couldn't find any save files");let l=document.createElement("a");l.href=`data:text/plain,${i}`,l.download="Fundamental post error export",l.click()}),n("deleteError").addEventListener("click",async()=>{!b.developerMode&&!o&&!await X(`It's recommended to export save file first
Press 'Confirm' to confirm and delete your save file`)||(localStorage.removeItem(k.localStorage.main),window.location.reload(),ae("Awaiting game reload"))}),t}})();
//# sourceMappingURL=Code.js.map
